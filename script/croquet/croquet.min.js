/**
 * @license UNLICENSED
 * Copyright Croquet Corporation 2020
 * Bundle of @croquet/croquet
 * Date: 2020-11-20
 * Version: 0.4.1-1
 */

var Croquet=function(t){"use strict";if(void 0===window.TextEncoder){window.TextEncoder=function(){},TextEncoder.prototype.encode=function(t){for(var e=t.length,n=-1,r="undefined"==typeof Uint8Array?new Array(1.5*e):new Uint8Array(3*e),i=0,o=0,a=0;a!==e;){if(i=t.charCodeAt(a),a+=1,i>=55296&&i<=56319){if(a===e){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;break}if(!((o=t.charCodeAt(a))>=56320&&o<=57343)){r[n+=1]=239,r[n+=1]=191,r[n+=1]=189;continue}if(a+=1,(i=1024*(i-55296)+o-56320+65536)>65535){r[n+=1]=240|i>>>18,r[n+=1]=128|i>>>12&63,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i;continue}}i<=127?r[n+=1]=0|i:i<=2047?(r[n+=1]=192|i>>>6,r[n+=1]=128|63&i):(r[n+=1]=224|i>>>12,r[n+=1]=128|i>>>6&63,r[n+=1]=128|63&i)}return"undefined"!=typeof Uint8Array?r.subarray(0,n+1):(r.length=n+1,r)},TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(t){TextEncoder.prototype.encoding="utf-8"}"undefined"!=typeof Symbol&&(TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,n,r,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function r(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,c,"next",t)}function c(t){n(a,i,o,s,c,"throw",t)}s(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t,e,n){return(m=f()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&h(i,n.prototype),i}).apply(null,arguments)}function p(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){var e=f();return function(){var n,r=d(t);if(e){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function v(t,e){return X(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||G(t,e)||L()}function Z(t){return X(t)||w(t)||G(t)||L()}function g(t){return function(t){if(Array.isArray(t))return x(t)}(t)||w(t)||G(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t){if(Array.isArray(t))return t}function w(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function G(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=G(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function S(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return C(null==e&&n.path)}},n.exports),n.exports}function Y(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}function C(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}S((function(t){var n=function(t){var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,o=Object.create(i.prototype),a=new Y(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===m)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return K()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=m;var c=d(t,e,n);if("normal"===c.type){if(r=n.done?p:f,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",m="executing",p="completed",y={};function b(){}function v(){}function Z(){}var g={};g[a]=function(){return this};var X=Object.getPrototypeOf,w=X&&X(X(C([])));w&&w!==r&&i.call(w,a)&&(g=w);var G=Z.prototype=b.prototype=Object.create(g);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,n){function r(o,a,s,c){var l=d(t[o],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===e(h)&&i.call(h,"__await")?n.resolve(h.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):n.resolve(h).then((function(t){u.value=t,s(u)}),(function(t){return r("throw",t,s,c)}))}c(l.arg)}var o;this._invoke=function(t,e){function i(){return new n((function(n,i){r(t,e,n,i)}))}return o=o?o.then(i,i):i()}}function k(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,k(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var i=d(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,y;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function W(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(W,this),this.reset(!0)}function C(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:K}}function K(){return{value:n,done:!0}}return v.prototype=G.constructor=Z,Z.constructor=v,v.displayName=l(Z,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,Z):(t.__proto__=Z,l(t,c,"GeneratorFunction")),t.prototype=Object.create(G),t},t.awrap=function(t){return{__await:t}},x(L.prototype),L.prototype[s]=function(){return this},t.AsyncIterator=L,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new L(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(G),l(G,c,"Generator"),G[a]=function(){return this},G.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,Y.prototype={constructor:Y,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:C(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}},t}(t.exports);try{globalThis.regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}}));S((function(t){t.bundle&&t.bundle.modules&&t.bundle.cache&&function(){for(var e=t.bundle,n={},r={},i={},o=0,a=Object.entries(e.modules);o<a.length;o++){var s=v(a[o],2),c=s[0],l=s[1],u=""+e.modules[c][0],d=r[u];d?i[c]=d:r[u]=c;for(var h=0,f=Object.entries(l[1]);h<f.length;h++){var m=v(f[h],2),p=m[0],y=m[1];(n[y]||(n[y]=new Set)).add(p)}}for(var b=function(t){return n[t]?"".concat(g(n[t]).sort().join('" and "')):"top-level"},Z={},X=[],w=0,G=Object.entries(e.modules);w<G.length;w++)for(var x=v(G[w],2),L=x[0],W=x[1],S=0,Y=Object.entries(W[1]);S<Y.length;S++){var C=v(Y[S],2),K=C[0],I=C[1],P=i[I];P&&(e.cache[I]?Z[P]=I:(W[1][K]=P,delete e.modules[I],X.push('"'.concat(K,'" in "').concat(b(L),'" (').concat(L,")"))))}for(var T=0,H=Object.entries(e.modules);T<H.length;T++)for(var N=v(H[T],2),M=N[0],V=N[1],R=0,z=Object.entries(V[1]);R<z.length;R++){var j=v(z[R],2),F=j[0],J=j[1],_=Z[J];_&&(e.cache[J]?console.warn('Could not deduplicate import "'.concat(F,'" in "').concat(b(M),'" (to fix, import "').concat(b(t.id),'" earlier)')):(V[1][F]=_,delete e.modules[J],X.push('"'.concat(F,'" in "').concat(b(M),'" (').concat(M,")"))))}var E,Q=k(X.sort());try{for(Q.s();!(E=Q.n()).done;){var D=E.value;console.log("Deduplicated import",D)}}catch(t){Q.e(t)}finally{Q.f()}}()}));var K=window.location.hostname.endsWith("croquet.studio"),I="",P="";function T(t,e){if(e){var n,r=k(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value.split("="),o=i[0],a=!0;if(i.length>1&&(a=decodeURIComponent(i.slice(1).join("="))).match(/^(true|false|null|[0-9.]*|["[{].*)$/))try{a=JSON.parse(a)}catch(t){"["===a[0]&&(a=a.slice(1,-1).split(","))}t[o]=a}}catch(t){r.e(t)}finally{r.f()}}}var H=new(function(){function t(){i(this,t),this.getSession(),T(this,window.location.search.slice(1)),T(this,K?window.location.hash.slice(1):P),window.location.pathname.indexOf("/ar.html")>=0&&(this.ar=!0)}return a(t,[{key:"has",value:function(t,e,n){"boolean"!=typeof n&&(n=this.isHost(n));var r=this[t];if("string"!=typeof r)return n;var i=r.split(",");return!0===n&&(e="no".concat(e)),e.endsWith("s")&&(e=e.slice(0,-1)),i.includes(e)||i.includes("".concat(e,"s"))?!n:n}},{key:"getSession",value:function(){if(K){var t=window.location.pathname.match(/^\/([^/]+)\/(.*)$/);if(t)return I=t[1],t[2]}else{var e=window.location.hash.match(/^#([^&]+)&?(.*)$/);if(e)return e[1].includes("=")?(P="".concat(e[1],"&").concat(e[2]),""):(P=e[2],e[1])}return"string"==typeof this.session?(P=window.location.hash.slice(1),this.session):""}},{key:"setSession",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==K&&this.getSession();var n=window.location,r=n.search,i=n.hash,o=K?"/".concat(I,"/").concat(t).concat(r).concat(i):"#".concat(t).concat(P?"&"+P:"");e?window.history.replaceState({},"",o):window.history.pushState({},"",o)}},{key:"isHost",value:function(t){var e=window.location.hostname;return e===t||"localhost"===t&&(!!e.endsWith(".ngrok.io")||["127.0.0.1","[::1]"].includes(e))}},{key:"isLocalhost",value:function(){return this.isHost("localhost")}}]),t}()),N=function(t,n){n||(n={}),"function"==typeof n&&(n={cmp:n});var r,i="boolean"==typeof n.cycles&&n.cycles,o=n.cmp&&(r=n.cmp,function(t){return function(e,n){var i={key:e,value:t[e]},o={key:n,value:t[n]};return r(i,o)}}),a=[];return function t(n){if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0!==n){if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!==e(n))return JSON.stringify(n);var r,s;if(Array.isArray(n)){for(s="[",r=0;r<n.length;r++)r&&(s+=","),s+=t(n[r])||"null";return s+"]"}if(null===n)return"null";if(-1!==a.indexOf(n)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=a.push(n)-1,l=Object.keys(n).sort(o&&o(n));for(s="",r=0;r<l.length;r++){var u=l[r],d=t(n[u]);d&&(s&&(s+=","),s+=JSON.stringify(u)+":"+d)}return a.splice(c,1),"{"+s+"}"}}(t)},M=window.location.hostname.endsWith("croquet.io")?window.location.host:"croquet.io";function V(){var t="string"==typeof H.files?H.files:"https://".concat(M,"/files/v1");return t.endsWith("/")?t.slice(0,-1):t}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"code";return"".concat(V(),"/").concat(t,"/")}function z(t){return btoa(String.fromCharCode.apply(String,g(new Uint8Array(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function j(t){return F.apply(this,arguments)}function F(){return(F=r(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return","47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU");case 2:return t.next=4,window.crypto.subtle.digest("SHA-256",e);case 4:return n=t.sent,t.abrupt("return",z(n));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(){return H.has("debug","hashing",!1)}window.crypto&&window.crypto.subtle&&"function"==typeof window.crypto.subtle.digest||console.error("ERROR: crypto.subtle.digest() browser API not available. Please access this page via https or localhost.");var _={},E=new TextEncoder;function Q(t){return D.apply(this,arguments)}function D(){return(D=r(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=E.encode(e),t.next=3,j(n);case 3:return r=t.sent,J()&&(_[r]={string:e,buffer:n}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var U=[];function O(t,e){var n=function(t){function e(t){var e=t.indexOf("{"),n=t.lastIndexOf("}"),r=t.slice(0,e).replace(/\s+/g," ").replace(/\s\(/,"("),i=t.slice(e+1,n);return"".concat(r.trim(),"{").concat(i.trim(),"}")}var n=""+t,r=e(n);if(!n.startsWith("class")){var i=t.prototype;r+=Object.getOwnPropertyNames(i).map((function(t){return"".concat(t,":").concat(e(""+i[t]))})).join("")}return r}(t),r=Q("".concat(e,":").concat(n));U.push(r),J()&&r.then((function(t){_[t].name="Class ".concat(e)}))}function B(t,e){return A.apply(this,arguments)}function A(){return(A=r(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Q(e+N(n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t,e,n,r){return $.apply(this,arguments)}function $(){return($=r(regeneratorRuntime.mark((function t(e,n,r,i){var o,a,s,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(U);case 2:return o=t.sent,t.next=5,Q([i].concat(g(o)).join("|"));case 5:return a=t.sent,t.next=8,B(e,n);case 8:return s=t.sent,t.next=11,Q(s+N(r)+a);case 11:return c=t.sent,J()&&(g(document.getElementsByTagName("meta")).find((function(t){return t.getAttribute("charset")}))||console.warn('Missing <meta charset="..."> declaration. Croquet model code hashing might differ between browsers.'),_[a].name="Code hashes",_[s].name="Name and options",_[c].name="Session ID",u=[].concat(g(o),[a,s,c]).map((function(t){return l({hash:t},_[t])})),console.log("Debug Hashing for session ".concat(c),u)),t.abrupt("return",{id:c,islandId:s,codeHash:a});case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var tt,et=function(){function t(){i(this,t),this.values=[],this.resolves=[]}var e;return a(t,[{key:"next",value:(e=r(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.values.length>0)){t.next=2;break}return t.abrupt("return",this.values.shift());case 2:return t.abrupt("return",new Promise((function(t){return e.resolves.push(t)})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"put",value:function(t){var e=this.resolves.shift();e?e(t):this.values.push(t)}},{key:"putAll",value:function(t){var e,n=k(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.put(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"peek",value:function(){return this.values[0]}},{key:"nextNonBlocking",value:function(){return this.values.shift()}},{key:"allNonBlocking",value:function(){if(0===this.values.length)return[];var t=this.values;return this.values=[],t}},{key:"size",get:function(){return this.values.length-this.resolves.length}}]),t}(),nt=S((function(t){var n,r;n=W,r=function(t){var n=function t(e){return new t.lib.init(e)};function r(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:e.offset[t]+"px":"0px"}function i(t,e){return!(!t||"string"!=typeof e||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(e)>-1))}return n.lib=n.prototype={toastify:"1.9.1",constructor:n,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||"Hi there!",this.options.node=t.node,this.options.duration=0===t.duration?0:t.duration||3e3,this.options.selector=t.selector,this.options.callback=t.callback||function(){},this.options.destination=t.destination,this.options.newWindow=t.newWindow||!1,this.options.close=t.close||!1,this.options.gravity="bottom"===t.gravity?"toastify-bottom":"toastify-top",this.options.positionLeft=t.positionLeft||!1,this.options.position=t.position||"",this.options.backgroundColor=t.backgroundColor,this.options.avatar=t.avatar||"",this.options.className=t.className||"",this.options.stopOnFocus=void 0===t.stopOnFocus||t.stopOnFocus,this.options.onClick=t.onClick,this.options.offset=t.offset||{x:0,y:0},this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");if(t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(t.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor&&(t.style.background=this.options.backgroundColor),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(t.innerHTML=this.options.text,""!==this.options.avatar){var n=document.createElement("img");n.src=this.options.avatar,n.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(n):t.insertAdjacentElement("afterbegin",n)}if(!0===this.options.close){var i=document.createElement("span");i.innerHTML="&#10006;",i.className="toast-close",i.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var o=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&o>360?t.insertAdjacentElement("afterbegin",i):t.appendChild(i)}if(this.options.stopOnFocus&&this.options.duration>0){var a=this;t.addEventListener("mouseover",(function(e){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){a.removeElement(t)}),a.options.duration)}))}if(void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"===e(this.options.offset)){var s=r("x",this.options),c=r("y",this.options),l="left"==this.options.position?s:"-".concat(s),u="toastify-top"==this.options.gravity?c:"-".concat(c);t.style.transform="translate(".concat(l,", ").concat(u,")")}return t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t=void 0===this.options.selector?document.body:document.getElementById(this.options.selector)))throw"Root element is not defined";return t.insertBefore(this.toastElement,t.firstChild),n.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),n.reposition()}.bind(this),400)}},n.reposition=function(){for(var t,e={top:15,bottom:15},n={top:15,bottom:15},r={top:15,bottom:15},o=document.getElementsByClassName("toastify"),a=0;a<o.length;a++){t=!0===i(o[a],"toastify-top")?"toastify-top":"toastify-bottom";var s=o[a].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(o[a].style[t]=r[t]+"px",r[t]+=s+15):!0===i(o[a],"toastify-left")?(o[a].style[t]=e[t]+"px",e[t]+=s+15):(o[a].style[t]=n[t]+"px",n[t]+=s+15)}return this},n.lib.init.prototype=n.lib,n},t.exports?t.exports=r():n.Toastify=r()})),rt=Y(Object.freeze({__proto__:null})),it=S((function(t){!function(n,r,i){var o,a=256,s=i.pow(a,6),c=i.pow(2,52),l=2*c,u=255;function d(t,e,u){var d=[],b=p(m((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(r)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(a):(t=new Uint8Array(a),(n.crypto||n.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=n.navigator,i=e&&e.plugins;return[+new Date,n,i,n.screen,y(r)]}}():t,3),d),v=new h(d),Z=function(){for(var t=v.g(6),e=s,n=0;t<c;)t=(t+n)*a,e*=a,n=v.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return Z.int32=function(){return 0|v.g(4)},Z.quick=function(){return v.g(4)/4294967296},Z.double=Z,p(y(v.S),r),(e.pass||u||function(t,e,n,r){return r&&(r.S&&f(r,v),t.state=function(){return f(v,{})}),n?(i.random=t,e):t})(Z,b,"global"in e?e.global:this==i,e.state)}function h(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<a;)s[i]=i++;for(i=0;i<a;i++)s[i]=s[o=u&o+t[i%n]+(e=s[i])],s[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,s=r.S;t--;)e=s[i=u&i+1],n=n*a+s[u&(s[i]=s[o=u&o+e])+(s[o]=e)];return r.i=i,r.j=o,n})(a)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,n){var r,i=[],o=e(t);if(n&&"object"==o)for(r in t)try{i.push(m(t[r],n-1))}catch(t){}return i.length?i:"string"==o?t:t+"\0"}function p(t,e){for(var n,r=t+"",i=0;i<r.length;)e[u&i]=u&(n^=19*e[u&i])+r.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(p(i.random(),r),t.exports){t.exports=d;try{o=rt}catch(t){}}else i.seedrandom=d}("undefined"!=typeof self?self:W,[],Math)}));!function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var i=[],o=this.data.charCodeAt(e);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=h.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,a=0;a<this.modules[i].length;a++){var s=1*a;this.modules[i][a]&&(r.beginFill(0,100),r.moveTo(s,o),r.lineTo(s+1,o),r.lineTo(s+1,o+1),r.lineTo(s,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=h.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var a=-2;a<=2;a++)this.modules[r+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},setupTypeNumber:function(t){for(var e=h.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=h.getBCHTypeInfo(n),i=0;i<15;i++){var o=!t&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!t&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[r][a-s]){var c=!1;o<t.length&&(c=1==(t[o]>>>i&1)),h.getMask(e,r,a-s)&&(c=!c),this.modules[r][a-s]=c,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,r){for(var i=y.getRSBlocks(t,n),o=new b,a=0;a<r.length;a++){var s=r[a];o.put(s.mode,4),o.put(s.getLength(),h.getLengthInBits(s.mode,t)),s.write(o)}var c=0;for(a=0;a<i.length;a++)c+=i[a].dataCount;if(o.getLengthInBits()>8*c)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*c+")");for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c||(o.put(e.PAD0,8),o.getLengthInBits()>=8*c));)o.put(e.PAD1,8);return e.createBytes(o,i)},e.createBytes=function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var c=e[s].dataCount,l=e[s].totalCount-c;r=Math.max(r,c),i=Math.max(i,l),o[s]=new Array(c);for(var u=0;u<o[s].length;u++)o[s][u]=255&t.buffer[u+n];n+=c;var d=h.getErrorCorrectPolynomial(l),f=new p(o[s],d.getLength()-1).mod(d);a[s]=new Array(d.getLength()-1);for(u=0;u<a[s].length;u++){var m=u+f.getLength()-a[s].length;a[s][u]=m>=0?f.get(m):0}}var y=0;for(u=0;u<e.length;u++)y+=e[u].totalCount;var b=new Array(y),v=0;for(u=0;u<r;u++)for(s=0;s<e.length;s++)u<o[s].length&&(b[v++]=o[s][u]);for(u=0;u<i;u++)for(s=0;s<e.length;s++)u<a[s].length&&(b[v++]=a[s][u]);return b};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i=0,o=1,a=2,s=3,c=4,l=5,u=6,d=7,h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;h.getBCHDigit(e)-h.getBCHDigit(h.G15)>=0;)e^=h.G15<<h.getBCHDigit(e)-h.getBCHDigit(h.G15);return(t<<10|e)^h.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;h.getBCHDigit(e)-h.getBCHDigit(h.G18)>=0;)e^=h.G18<<h.getBCHDigit(e)-h.getBCHDigit(h.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return h.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case i:return(e+n)%2==0;case o:return e%2==0;case a:return n%3==0;case s:return(e+n)%3==0;case c:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case l:return e*n%2+e*n%3==0;case u:return(e*n%2+e*n%3)%2==0;case d:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new p([1],0),n=0;n<t;n++)e=e.multiply(new p([1,f.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var o=0,a=t.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var c=-1;c<=1;c++)i+c<0||e<=i+c||0==s&&0==c||a==t.isDark(r+s,i+c)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<e-1;r++)for(i=0;i<e-1;i++){var l=0;t.isDark(r,i)&&l++,t.isDark(r+1,i)&&l++,t.isDark(r,i+1)&&l++,t.isDark(r+1,i+1)&&l++,0!=l&&4!=l||(n+=3)}for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var u=0;for(i=0;i<e;i++)for(r=0;r<e;r++)t.isDark(r,i)&&u++;return n+=10*(Math.abs(100*u/e/e-50)/5)}},f={glog:function(t){if(t<1)throw new Error("glog("+t+")");return f.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return f.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)f.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)f.EXP_TABLE[m]=f.EXP_TABLE[m-4]^f.EXP_TABLE[m-5]^f.EXP_TABLE[m-6]^f.EXP_TABLE[m-8];for(m=0;m<255;m++)f.LOG_TABLE[f.EXP_TABLE[m]]=m;function p(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function y(t,e){this.totalCount=t,this.dataCount=e}function b(){this.buffer=[],this.length=0}p.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=f.gexp(f.glog(this.get(n))+f.glog(t.get(r)));return new p(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=f.glog(this.get(0))-f.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<t.getLength();r++)n[r]^=f.gexp(f.glog(t.get(r))+e);return new p(n,0).mod(t)}},y.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],y.getRSBlocks=function(t,e){var n=y.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var a=n[3*o+0],s=n[3*o+1],c=n[3*o+2],l=0;l<a;l++)i.push(new y(s,c));return i},y.getRsBlockTable=function(t,e){switch(e){case r.L:return y.RS_BLOCK_TABLE[4*(t-1)+0];case r.M:return y.RS_BLOCK_TABLE[4*(t-1)+1];case r.Q:return y.RS_BLOCK_TABLE[4*(t-1)+2];case r.H:return y.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},b.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],Z=function(){var t=function(t,e){this._bIsPainted=!1,this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return t.prototype.draw=function(t){var e=this._oContext,n=this._htOption,r=t.getModuleCount(),i=n.width/r,o=n.height/r,a=Math.round(i),s=Math.round(o);this.clear();for(var c=0;c<r;c++)for(var l=0;l<r;l++){var u=t.isDark(c,l),d=l*i,h=c*o;e.strokeStyle=u?n.colorDark:n.colorLight,e.lineWidth=1,e.fillStyle=u?n.colorDark:n.colorLight,e.fillRect(d,h,i,o),e.strokeRect(Math.floor(d)+.5,Math.floor(h)+.5,a,s),e.strokeRect(Math.ceil(d)-.5,Math.ceil(h)-.5,a,s)}this._bIsPainted=!0},t.prototype.isPainted=function(){return this._bIsPainted},t.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},t.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},t}();function g(t,e){for(var n=1,i=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),o=0,a=v.length;o<=a;o++){var s=0;switch(e){case r.L:s=v[o][0];break;case r.M:s=v[o][1];break;case r.Q:s=v[o][2];break;case r.H:s=v[o][3]}if(i<=s)break;n++}if(n>v.length)throw new Error("Too long data");return n}(tt=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(Z=svgDrawer),this._el=t,this._oQRCode=null,this._oDrawing=new Z(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new e(g(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode)},tt.prototype.clear=function(){this._oDrawing.clear()},tt.prototype.getCanvas=function(){for(var t=0;t<this._el.children.length;t++){var e=this._el.children[t];if("CANVAS"===e.tagName)return e}return null},tt.CorrectLevel=r}();var ot=tt,at=Date.now();"undefined"==typeof performance&&(window.performance={now:function(){return Date.now()-at}});var st,ct,lt=["simulate","update","render","snapshot"],ut={total:"black",update:"blue",render:"magenta",simulate:"yellow",snapshot:"green",backlog:"red",network:"lightgray"},dt=null,ht=null,ft=null,mt=0,pt=null,yt=null;function bt(t){for(dt=t;t.firstChild;)t.removeChild(t.firstChild);t.style.background="#faf0dc",pt=document.createElement("canvas"),yt=pt.getContext("2d"),pt.id="text_stats",pt.width=Math.min(140,window.innerWidth),pt.height=36,pt.style.width=pt.width,pt.style.height=pt.height,yt.font="9.5pt sans-serif",t.appendChild(pt),t.title=Object.entries(ut).map((function(t){var e=v(t,2),n=e[0],r=e[1];return"".concat(r,": ").concat(n)})).join("\n"),(ht=document.createElement("canvas")).width=Math.min(125,window.innerWidth),ht.height=125,ht.style.width="100%";var e=document.createElement("div");e.id="innerDiv",t.appendChild(e),e.appendChild(ht),ft=ht.getContext("2d")}var vt=[],Zt=0,gt=!1,Xt=Lt(0),wt=1e3/60;function Gt(t){return 20*(1-t/wt)+60}function xt(t){st=function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.style.width="100%",e.style.position="absolute",e.style.left="0px",dt.querySelector("#innerDiv").appendChild(e),e}(t),(ct=st.getContext("2d")).strokeStyle="rgba(255, 255, 255, 0.5)";for(var e=0;e<60;e+=wt){var n=Gt(e);ct.moveTo(0,n),ct.lineTo(st.width,n),ct.stroke()}}function Lt(t){return{start:t,total:0,items:{},users:0,backlog:0,network:0,latency:0,activity:1e3,connected:gt}}function kt(t){Xt.total=t-Xt.start;var e=Math.min(120,window.innerWidth);if(vt.length>=e&&vt.splice(0,vt.length-e+1),vt.push(Xt),!(vt.length<=1)&&dt&&0!==dt.offsetHeight){var n=vt.slice(1).filter((function(t){return t.total})),r=n.map((function(t){return t.total})).reduce((function(t,e){return t+e}),0)/n.length,i=Math.max.apply(Math,g(n.map((function(t){return t.total}))));Math.max.apply(Math,g(n.map((function(t){return Math.max(t.backlog,t.network)}))));Zt=1e3,function(t,e){yt.globalCompositeOperation="copy",yt.fillStyle="rgb(255, 255, 255, 0)",yt.fillRect(0,0,pt.width,pt.height),yt.fillStyle="rgb(0, 0, 0, 1)",yt.globalCompositeOperation="source-over";var n="".concat(Xt.users," users, ").concat(Math.round(1e3/t)," fps");e>70&&(n+=" ".concat(Math.ceil(e).toLocaleString(),"ms")),yt.fillText(n,2,15),n=Xt.backlog<100&&Xt.activity<1e3?"latency: ".concat(Xt.latency," ms"):"backlog: ".concat(Xt.backlog<100?"0.0":(Xt.backlog/1e3).toFixed(1)," s"),yt.fillText(n,2,33)}(r,i),st||xt(ht),mt===ht.width?(ft.globalCompositeOperation="copy",ft.drawImage(ht,1,0,ht.width-1,ht.height,0,0,ht.width-1,ht.height),ft.globalCompositeOperation="source-over",ft.fillStyle="transparent",ft.fillRect(ht.width-1,0,1,ht.height)):mt++;var o=function(t){return Gt(t/Zt*-2*wt)+5},a=vt[vt.length-1],s=mt-.5,c=Gt(0);ft.beginPath(),ft.moveTo(s,c),ft.lineTo(s,Gt(a.total)),ft.strokeStyle=ut[a.connected?"total":"network"],ft.stroke(),ft.beginPath(),ft.moveTo(s,c),c=Gt(a.total);var l,u=0,d=k(lt);try{for(d.s();!(l=d.n()).done;){var h=l.value;a.items[h]&&(c=Gt(u+=a.items[h]),ft.lineTo(s,c),ft.strokeStyle=ut[h],ft.stroke(),ft.beginPath(),ft.moveTo(s,c))}}catch(t){d.e(t)}finally{d.f()}a.network&&(ft.beginPath(),ft.moveTo(s,o(0)),ft.lineTo(s,o(a.network)),ft.strokeStyle=ut.network,ft.stroke())}}var Wt,St,Yt,Ct=[],Kt={animationFrame:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};kt(t),Xt=Lt(t);for(var n=0,r=Object.entries(e);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];this[o](a)}},begin:function(t){var e=performance.now();Xt.items[t]=(Xt.items[t]||0)-e;var n=Ct[Ct.length-1];return n&&(Xt.items[n]+=e),Ct.push(t),e},end:function(t){var e=performance.now();Xt.items[t]+=e;var n=Ct.pop();if(n!==t)throw Error('Unmatched stats calls: expected end("'.concat(n,'"), got end("').concat(t,'")'));var r=Ct[Ct.length-1];return r&&(Xt.items[r]-=e),e},backlog:function(t){Xt.backlog=Math.max(t,Xt.backlog)},network:function(t){Xt.network=t},starvation:function(t){Xt.network=t},latency:function(t){Xt.latency=t},activity:function(t){Xt.activity=t},users:function(t){Xt.users=t},connected:function(t){var e=gt;Xt.connected=gt=t,e&&!gt&&st&&(st.remove(),ct=null)}},It="ontouchstart"in document.documentElement,Pt=It?20:12,Tt=It?0:15;Wt="\n        #croquet_dock { position: absolute; z-index: 2; border: 3px solid white; bottom: 6px; left: 6px; width: 84px; height: 36px; box-sizing: border-box; background: white; opacity: 0.4; transition: all ".concat(.3,"s ease; }\n        #croquet_dock.active { opacity: 0.95; border-radius: 12px; }\n        #croquet_dock_bar { position: absolute; border: 3px solid white; width: 100%; height: 30px; box-sizing: border-box; background: white; }\n\n        #croquet_badge { position: absolute; width: 72px; height: 24px; top: 50%; transform: translate(0px, -50%); cursor: none; }\n        #croquet_dock.active #croquet_badge { left: 2%; }\n\n        .croquet_dock_button { position: absolute; width: ").concat(Pt,"%; height: 90%; top: 50%; transform: translate(0px, -50%); border-radius: 20%; }\n        .croquet_dock_button:focus { outline: 0; }\n        .croquet_dock_button canvas { position: absolute; width: 100%; height: 100%; top: 0px; left: 0px; }\n        #croquet_dock:not(.active) .croquet_dock_button { display: none; }\n        #croquet_dock_left { right: ").concat(2+Tt+Pt+2,"% }\n        #croquet_dock_right { right: ").concat(2+Tt,"%; }\n        #croquet_dock_pin { right: ").concat(2,"%; }\n        #croquet_dock_pin.pinned { background: #cce6ff; }\n\n        #croquet_dock_content { position: absolute; left: ").concat(2,"px; top: ").concat(2,"px; right: ").concat(2,"px; bottom: ").concat(2,"px; background: white; overflow: hidden; }\n        #croquet_dock:not(.active) #croquet_dock_content { display: none; }\n        #croquet_dock:not(.active) #croquet_dock_content div { display: none; }\n\n        #croquet_qrcode { position: absolute; border: 6px solid white; width: 100%; height: 100%;box-sizing: border-box; cursor: crosshair; }\n        #croquet_qrcode:not(.active) { display: none; }\n        #croquet_qrcode canvas { image-rendering: pixelated; }\n\n        #croquet_stats { position: absolute; width: 70%; height: 90%; left: 15%; top: 5%; opacity: 0.8; font-family: sans-serif; }\n        #croquet_stats:not(.active) { display: none; }\n\n        #croquet_spinnerOverlay {\n            z-index: 1000;\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            background-color:#333;\n            opacity:0.9;\n            display:flex;\n            align-items:center;\n            justify-content:center;\n            transition: opacity 1.0s ease-out;\n        }\n        /* https://github.com/lukehaas/css-loaders */\n        @keyframes dots {\n            0%, 80%, 100% { box-shadow: 0 2.5em 0 -1.3em; }\n            40% { box-shadow: 0 2.5em 0 0; }\n        }\n        #croquet_loader,\n        #croquet_loader:before,\n        #croquet_loader:after {\n          border-radius: 50%;\n          width: 2.5em;\n          height: 2.5em;\n          animation: dots 1.8s infinite ease-in-out;\n        }\n        #croquet_loader {\n          color: #fff;\n          font-size: 10px;\n          margin: 80px auto;\n          position: relative;\n          text-indent: -9999em;\n          animation-delay: -0.16s;\n        }\n        #croquet_loader:before,\n        #croquet_loader:after {\n          content: '';\n          position: absolute;\n          top: 0;\n        }\n        #croquet_loader:before { left: -3.5em; animation-delay: -0.32s; }\n        #croquet_loader:after { left: 3.5em; }\n"),(St=document.createElement("style")).innerHTML=Wt,document.head.insertBefore(St,document.head.getElementsByTagName("style")[0]),(Yt=document.createElement("style")).innerHTML="/*!\n        * Toastify js 1.5.0\n        * https://github.com/apvarun/toastify-js\n        * @license MIT licensed\n        *\n        * Copyright (C) 2018 Varun A P\n        */\n        .toastify {\n            padding: 12px 20px;\n            color: #ffffff;\n            display: inline-block;\n            box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);\n            background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);\n            background: linear-gradient(135deg, #73a5ff, #5477f5);\n            position: fixed;\n            opacity: 0;\n            transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);\n            border-radius: 2px;\n            cursor: pointer;\n            text-decoration: none;\n            max-width: calc(50% - 20px);\n            z-index: 2147483647;\n        }\n        .toastify.on {\n            opacity: 1;\n        }\n        .toast-close {\n            opacity: 0.4;\n            padding: 0 5px;\n        }\n        .toastify-right {\n            right: 15px;\n        }\n        .toastify-left {\n            left: 15px;\n        }\n        .toastify-top {\n            top: -150px;\n        }\n        .toastify-bottom {\n            bottom: -150px;\n        }\n        .toastify-rounded {\n            border-radius: 25px;\n        }\n        .toastify-avatar {\n            width: 1.5em;\n            height: 1.5em;\n            margin: 0 5px;\n            border-radius: 2px;\n        }\n        @media only screen and (max-width: 360px) {\n            .toastify-right, .toastify-left {\n                margin-left: auto;\n                margin-right: auto;\n                left: 0;\n                right: 0;\n                max-width: fit-content;\n            }\n        }\n\n        .toastify { font-family: sans-serif; border-radius: 8px; }\n",document.head.insertBefore(Yt,document.head.getElementsByTagName("style")[0]);var Ht,Nt=new Set;function Mt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&qt.showMessage(t,l(l({},e),{},{level:"error"}))}function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&qt.showMessage(t,l(l({},e),{},{level:"warning"}))}function Rt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&qt.showMessage(t,l(l({},e),{},{level:"status"}))}function zt(t,e){console.error("Error during ".concat(t),e);var n=(e.stack||"").split("\n").filter((function(t){return!t.match(/croquet-.*\.min.js/)})).join("\n");qt.showMessage("<b>Error during ".concat(t,": ").concat(e.message,"</b>\n\n").concat(n).replace(/\n/g,"<br>"),{level:"error",duration:1e4,stopOnFocus:!0})}function jt(t,e){var n=qt.root;if(!1===n)return null;var r,i=l({text:t,duration:3e3,gravity:"bottom",position:"right",backgroundColor:"linear-gradient(to right, #00b09b, #96c93d)",stopOnFocus:!0},e);return n instanceof Element&&n!==document.body?(r=n.id)||(n.id=r="_croquetToastParent"):"string"==typeof n&&(r=n),r&&(i.selector=r),nt(i).showToast()}try{if((Ht=window.localStorage)["croquet-debug-persist-allowed"]="true","true"!==Ht["croquet-debug-persist-allowed"])throw Error("localStorage not persisted");delete Ht["croquet-debug-persist-allowed"]}catch(Vo){console.warn("localStorage not allowed"),Ht={}}var Ft,Jt,_t={get pinned(){return"true"===Ht[location.pathname+"/croquet-debug-ui-pinned"]},set pinned(t){Ht[location.pathname+"/croquet-debug-ui-pinned"]=!!t},get activePage(){return Ht[location.pathname+"/croquet-debug-ui-activePage"]},set activePage(t){Ht[location.pathname+"/croquet-debug-ui-activePage"]=t}},Et=function(t){t.preventDefault(),t.stopPropagation()};function Qt(t,e,n){var r=document.createElement("canvas"),i=r.width=40*Pt/12,o=r.height=60,a=r.getContext("2d");a.font="36px Arial",a.textAlign="center",a.textBaseline="middle",a.fillStyle="black",a.fillText(t,i/2,.55*o);var s=document.createElement("button");s.id=e,s.className="croquet_dock_button";var c=function(t){t.preventDefault(),t.stopPropagation(),n()};return It?(s.ontouchstart=c,s.ontouchend=Et,s.onpointerdown=Et,s.onpointerup=Et):(s.onclick=c,s.onpointerdown=Et,s.onpointerup=Et),s.appendChild(r),s}function Dt(t,e){if(!1!==qt.badge){var n=function(t){for(var e=new it(t),n=["bcdfghjklmnpqrstvwxyz","aeiou"],r="",i=0;i<5;i++)r+=n[i%2][e.quick()*n[i%2].length|0];return r}(e);for(document.title=document.title.replace(/:.*/,""),document.title+=":"+n;t.firstChild;)t.removeChild(t.firstChild);var r=document.createElement("canvas"),i=r.width=120,o=r.height=40;r.style.width="100%",t.appendChild(r);var a=r.getContext("2d"),s=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new it(t),r=[],i=0;i<e;i++)r.push("hsl(".concat(360*n.quick(),", 50%, 70%)"));return r}(e,2);a.fillStyle=s[0],a.beginPath(),a.moveTo(0,0),a.lineTo(0,o),a.lineTo(i,0),a.closePath(),a.fill(),a.fillStyle=s[1],a.beginPath(),a.moveTo(i,o),a.lineTo(i,0),a.lineTo(0,o),a.closePath(),a.fill(),a.font="30px Arial",a.textAlign="center",a.textBaseline="middle",a.fillStyle="black",a.fillText(n,i/2,o/2)}}function Ut(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.firstChild;)t.removeChild(t.firstChild);return new ot(t,l({text:e,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:ot.CorrectLevel.L},n))}var Ot=0;function Bt(t){if(Jt!==t)if(!1===qt.sync&&(t=!1),t&&!Ft&&(Ft=function(){var t=document.createElement("div");t.id="croquet_spinnerOverlay";var e=document.createElement("div");return e.id="croquet_loader",e.innerText="Catching up...",t.appendChild(e),t}()),Jt=t,t)clearTimeout(Ot),Ot=setTimeout((function(){Jt&&(At(qt.root,(function(){return document.body})).appendChild(Ft),Ft.style.opacity=.9)}),500);else{if(!Ft)return;clearTimeout(Ot),Ft.style.opacity=0,Ot=setTimeout((function(){Jt||Ft.parentElement&&Ft.parentElement.removeChild(Ft)}),500)}}function At(t,e){if(!1===t)return!1;if(t instanceof Element)return t;if("string"==typeof t){var n=document.getElementById(t);if(n)return n}return e?e():null}var qt={sessionURL:window.location.href,root:document.body,sync:!0,messages:!1,badge:!1,stats:!1,qrcode:!1,makeWidgetDock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!H.nodock){var e=document.getElementById("croquet_dock");e&&e.parentElement.removeChild(e);var n=At(qt.root);if(n){var r=document.createElement("div");r.id="croquet_dock",n.appendChild(r);var i,o=document.createElement("div");o.id="croquet_dock_bar",r.appendChild(o),!1!==t.badge&&((i=document.createElement("div")).id="croquet_badge",o.appendChild(i),qt.badge=i);var a=document.createElement("div");a.id="croquet_dock_content",r.appendChild(a);var s,c,l=[];if(!1!==t.qrcode){var u=qt.sessionURL;u&&((s=document.createElement("div")).id="croquet_qrcode",a.appendChild(s),l.push(s.id),qt.qrcode=s)}if(!1!==t.stats&&((c=document.createElement("div")).id="croquet_stats",a.appendChild(c),l.push(c.id),qt.stats=c),l.length){function d(t){var e,n=l.length,r=0;if(_t.activePage){var i=l.indexOf(_t.activePage);i>=0?(r=i,e=document.getElementById(_t.activePage)):_t.activePage=null}var o,a=l[(r+n+t)%n];a===_t.activePage?o=e:(e&&e.classList.remove("active"),o=document.getElementById(a)),o&&o.classList.add("active"),_t.activePage=a}l.length>1&&(o.appendChild(Qt("<","croquet_dock_left",(function(){return d(-1)}))),o.appendChild(Qt(">","croquet_dock_right",(function(){return d(1)})))),d(0)}if(!It&&!t.alwaysPinned){var h=Qt("","croquet_dock_pin",(function(){_t.pinned=!_t.pinned,f()})),f=function(){_t.pinned?h.classList.add("pinned"):h.classList.remove("pinned")};f(),o.appendChild(h)}var m=200,p=166,y=8,b=function(t){r.style.width="".concat(t,"px");var e=1.18*t;r.style.height="".concat(e,"px");var n=18*t/100;o.style.height="".concat(n,"px"),a.style.top="".concat(n+2,"px"),i&&(i.style.height="".concat(.9*n,"px"),i.style.width="".concat(.9*n*3,"px")),s&&(s.style.border="".concat(y*t/m,"px solid white"))},v=function(){r.style.width=r.style.height="",o.style.height="",a.style.top="",i&&(i.style.height=i.style.width=""),s&&(s.style.border="")},Z=t.fixedSize||m,g=function(){return r.classList.contains("active")},X=function(){r.classList.add("active"),b(Z),setTimeout((function(){return r.style.transition="none"}),300)},w=function(){r.style.transition="",r.classList.remove("active"),v()};if(It)w(),r.ontouchstart=function(t){t.preventDefault(),t.stopPropagation(),g()?w():X()},r.ontouchend=Et,r.onpointerdown=Et,r.onpointerup=Et;else if(t.alwaysPinned?X():(_t.pinned?X():w(),r.onmouseenter=X,r.onmouseleave=function(){_t.pinned||w()}),!t.fixedSize){var G=0;r.onwheel=function(t){t.preventDefault(),t.stopPropagation();var e=Date.now();if(!(e-G<100)){G=e;var n=t.deltaY;n=Math.sign(n)*Math.min(5,Math.abs(n));var i=.8*Math.min(window.innerWidth,window.innerHeight);Z=Math.max(p,Math.min(i,r.offsetWidth/Math.pow(1.05,n))),b(Z)}}}}}},makeSessionWidgets:function(t){!function(t){if(t&&!1!==qt.root){var e=At(qt.badge);e&&Dt(e,t)}}(t),function(){if(!1!==qt.root&&!1!==qt.qrcode&&!H.noqr){var t=qt.sessionURL;if(t){var e=At(qt.qrcode);e&&(It||(e.onclick=function(e){e.preventDefault(),e.stopPropagation(),window.open(t)}),Ut(e,t).getCanvas().style.width="100%")}else console.warn("App.sessionURL is not set")}}(),function(){if(!1!==qt.root&&!H.nostats){var t=At(qt.stats);t&&bt(t)}}()},makeQRCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!qt.sessionURL)return null;var e=document.createElement("div"),n=Ut(e,qt.sessionURL,t);return n&&n.getCanvas()},clearSessionMoniker:function(){!1!==qt.badge&&(document.title=document.title.replace(/:.*/,""))},showSyncWait:function(t){!1===qt.root&&(t=!1),Bt(t)},messageFunction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("once"===e.only){if(Nt.has(t))return null;Nt.add(t)}var n,r=e.level;return"error"===r?(n="red",console.error(t)):"warning"===r?(n="gold",console.warn(t)):n="#aaa",jt(t,l({backgroundColor:n},e))},showMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H.nomessages||!1===qt.root||!1===qt.messages||!qt.messageFunction?null:qt.messageFunction(t,e)},referrerURL:function(){var t=new URL(qt.sessionURL),e=["croquet.io","croquet.studio","localhost"].includes(t.hostname);return"".concat(t.origin).concat(t.pathname).concat(e?t.search:"")},autoSession:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"q"};"string"==typeof t&&(t={key:t}),t||(t={});var e=t.key||"q",n=new URL(window.location),r="",i=n.search.slice(1).split("&"),o=i.find((function(t){return t.split("=")[0]===e}));if(o?r=o.replace(/[^=]*=/,""):(r=i.find((function(t){return!t.includes("=")})))||(r=n.hash.slice(1))&&(n.hash="",n.search?n.searchParams.set(e,r):n.search=r),r)try{r=decodeURIComponent(r)}catch(t){}else r=Math.floor(Math.random()*Math.pow(36,10)).toString(36),n.searchParams.set(e,r);var a=n.toString("");return window.location.href!==a&&(window.history.replaceState({},"",a),qt.sessionURL=a),r},autoPassword:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"pw",scrub:!1},e=t.key||"pw",n=t.scrub&&!H.has("debug","password"),r=new URL(window.location),i="",o=r.hash.slice(1);if(o){var a=o.split("&"),s=a.find((function(t){return t.split("=")[0]===e}));s?(i=s.replace(/[^=]*=/,""))&&n&&(r.hash=a.filter((function(t){return t.split("=")[0]!==e})).join("&")):(i=a.find((function(t){return!t.includes("=")})))&&n&&(r.hash=a.filter((function(t){return t!==i})).join("&"))}if(!i){var c=new Uint8Array(16);window.crypto.getRandomValues(c),i=z(c.buffer),r.hash=o?"".concat(o,"&").concat(e,"=").concat(i):i,qt.sessionURL=r.href,n&&(r.hash=o)}if(H.has("debug","session")&&console.log("App.sessionUrl: ".concat(qt.sessionURL)),window.location.href!==r.href&&window.history.replaceState({},"",r.href),i)try{i=decodeURIComponent(i)}catch(t){}return i}},$t=function(t){u(n,t);var e=y(n);function n(){return i(this,n),e.apply(this,arguments)}return a(n,[{key:"poll",value:function(){var t=b(d(n.prototype),"poll",this).call(this);return this.array[this.size]=null,t}},{key:"asArray",value:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t}},{key:"asUnsortedArray",value:function(){return this.array.slice(0,this.size)}}]),n}(S((function(t){var e=function(t,e){return t<e};function n(t){if(!(this instanceof n))return new n(t);this.array=[],this.size=0,this.compare=t||e}n.prototype.clone=function(){var t=new n(this.compare);t.size=this.size;for(var e=0;e<this.size;e++)t.array.push(this.array[e]);return t},n.prototype.add=function(t){var e,n,r=this.size;for(this.array[this.size]=t,this.size+=1;r>0&&(e=r-1>>1,n=this.array[e],this.compare(t,n));)this.array[r]=n,r=e;this.array[r]=t},n.prototype.heapify=function(t){var e;for(this.array=t,this.size=t.length,e=this.size>>1;e>=0;e--)this._percolateDown(e)},n.prototype._percolateUp=function(t,e){for(var n,r,i=this.array[t];t>0&&(n=t-1>>1,r=this.array[n],e||this.compare(i,r));)this.array[t]=r,t=n;this.array[t]=i},n.prototype._percolateDown=function(t){for(var e,n,r,i=this.size,o=this.size>>>1,a=this.array[t];t<o&&(n=(e=1+(t<<1))+1,r=this.array[e],n<i&&this.compare(this.array[n],r)&&(e=n,r=this.array[n]),this.compare(r,a));)this.array[t]=r,t=e;this.array[t]=a},n.prototype._removeAt=function(t){if(!(t>this.size-1||t<0))return this._percolateUp(t,!0),this.poll()},n.prototype.remove=function(t){for(var e=0;e<this.size;e++)if(!this.compare(this.array[e],t)&&!this.compare(t,this.array[e]))return this._removeAt(e),!0;return!1},n.prototype._batchRemove=function(t,e){var n=new Array(e||this.size),r=0;if("function"==typeof t&&this.size)for(var i=0;i<this.size&&r<n.length;)t(this.array[i])?(n[r]=this._removeAt(i),r++,i>>=1):i++;return n.length=r,n},n.prototype.removeOne=function(t){var e=this._batchRemove(t,1);return e.length>0?e[0]:void 0},n.prototype.removeMany=function(t,e){return this._batchRemove(t,e)},n.prototype.peek=function(){if(0!=this.size)return this.array[0]},n.prototype.poll=function(){if(0!=this.size){var t=this.array[0];return this.size>1?(this.array[0]=this.array[--this.size],this._percolateDown(0)):this.size-=1,t}},n.prototype.replaceTop=function(t){if(0!=this.size){var e=this.array[0];return this.array[0]=t,this._percolateDown(0),e}},n.prototype.trim=function(){this.array=this.array.slice(0,this.size)},n.prototype.isEmpty=function(){return 0===this.size},n.prototype.forEach=function(t){if(!this.isEmpty()&&"function"==typeof t)for(var e=0,n=this.clone();!n.isEmpty();)t(n.poll(),e++)},n.prototype.kSmallest=function(t){if(0==this.size)return[];var e=this.compare,r=this.array,i=new n((function(t,n){return e(r[t],r[n])}));t=Math.min(this.size,t);var o=new Array(t),a=0;for(i.add(0);a<t;){var s=i.poll();o[a++]=this.array[s];var c=1+(s<<1),l=c+1;c<this.size&&i.add(c),l<this.size&&i.add(l)}return o};undefined===t&&function(){var t=new n((function(t,e){return t<e}));for(t.add(1),t.add(0),t.add(5),t.add(4),t.add(3);!t.isEmpty();)console.log(t.poll())}(),t.exports=n}))),te="#__vote";function ee(t,e){function n(t){var n,r=k(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.for===e&&t.delete(i)}}catch(t){r.e(t)}finally{r.f()}}return n(t.immediate),n(t.oncePerFrame),n(t.oncePerFrameWhileSynced),n(t.queued),t.immediate.size+t.queued.size+t.oncePerFrame.size+t.oncePerFrameWhileSynced.size}var ne=new(function(){function t(){i(this,t),this.subscriptions={},this.queuedEvents=[],this.perFrameEvents=new Map,this.perSyncedFrameEvents=new Map,this.id=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})),this.lastId=0}return a(t,[{key:"register",value:function(t){return this.id+"/V"+ ++this.lastId}},{key:"deregister",value:function(t){}},{key:"addSubscription",value:function(t,e,n,r,i){if("vote"!==i){var o=t+":"+e,a=r;a.for=n;var s=this.subscriptions[o];if(s||(s=this.subscriptions[o]={immediate:new Set,queued:new Set,oncePerFrame:new Set,oncePerFrameWhileSynced:new Set}),!s[i])throw Error('Unknown subscribe() option: handling="'.concat(i,'"'));s[i].add(a)}else this.addSubscription(t,e+te,n,r,"immediate")}},{key:"removeSubscription",value:function(t,e,n){var r=t+":"+e,i=this.subscriptions[r];i&&(0===ee(i,n)&&delete this.subscriptions[r]);e.endsWith(te)||this.removeSubscription(t,e+te,n)}},{key:"removeAllSubscriptionsFor",value:function(t){for(var e="".concat(t,":"),n=0,r=Object.entries(this.subscriptions);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];if(o.startsWith(e))delete this.subscriptions[o];else 0===ee(a,t)&&delete this.subscriptions[o]}}},{key:"handleEvent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t()},r=this.subscriptions[t];r&&(r.queued.size>0&&this.queuedEvents.push({topic:t,data:e}),r.oncePerFrame.size>0&&this.perFrameEvents.set(t,e),r.oncePerFrameWhileSynced.size>0&&this.perSyncedFrameEvents.set(t,e),r.immediate.size>0&&n((function(){var t,n=k(r.immediate);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(t){n.e(t)}finally{n.f()}})))}},{key:"processFrameEvents",value:function(t){var e,n=this,r=0,i=function(t,e,i){var o=n.subscriptions[t];if(o){var a,s=k(o[i]);try{for(s.s();!(a=s.n()).done;){(0,a.value)(e),r++}}catch(t){s.e(t)}finally{s.f()}}},o=k(this.queuedEvents);try{for(o.s();!(e=o.n()).done;){var a=e.value;i(a.topic,a.data,"queued")}}catch(t){o.e(t)}finally{o.f()}this.queuedEvents.length=0;var s,c=k(this.perFrameEvents);try{for(c.s();!(s=c.n()).done;){var l=v(s.value,2);i(l[0],l[1],"oncePerFrame")}}catch(t){c.e(t)}finally{c.f()}if(this.perFrameEvents.clear(),t){var u,d=k(this.perSyncedFrameEvents);try{for(d.s();!(u=d.n()).done;){var h=v(u.value,2);i(h[0],h[1],"oncePerFrameWhileSynced")}}catch(t){d.e(t)}finally{d.f()}this.perSyncedFrameEvents.clear()}var f,m=k(this.queuedEvents);try{for(m.s();!(f=m.n()).done;){var p=f.value;i(p.topic,p.data,"queued")}}catch(t){m.e(t)}finally{m.f()}return this.queuedEvents.length=0,r}}]),t}());var re={get subscribe(){return(re={subscribe:H.has("debug","subscribe",!1)}).subscribe}},ie=function(){function t(e){i(this,t),this.island=e}return a(t,[{key:"register",value:function(t){return this.island.registerModel(t)}},{key:"deregister",value:function(t){this.island.deregisterModel(t.id)}},{key:"publish",value:function(t,e,n){this.island.publishFromModel(n,t,e)}},{key:"subscribe",value:function(t,e,n,r){return re.subscribe&&console.log('Model.subscribe("'.concat(e,":").concat(n,'", ').concat(t," ").concat((""+r).replace(/\([\s\S]*/,""),")")),this.island.addSubscription(t,e,n,r)}},{key:"unsubscribe",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"*";re.subscribe&&console.log("Model.unsubscribe(".concat(e,":").concat(n,'", ').concat(t," ").concat((""+r).replace(/\([\s\S]*/,""),")")),this.island.removeSubscription(t,e,n,r)}},{key:"unsubscribeAll",value:function(t){re.subscribe&&console.log("Model.unsubscribeAll(".concat(t," ").concat(t.id,")")),this.island.removeAllSubscriptionsFor(t)}},{key:"future",value:function(t,e,n,r){if(ae&&ae.equal(this))return this.island.future(t,e,n,r);if(e)throw Error("tOffset not supported from cross-realm future send yet.");var i=this.island;return new Proxy(t,{get:function(e,n){if("function"==typeof t[n])return new Proxy(t[n],{apply:function(e,r,o){i.callModelMethod(t.id,n,o)}});throw Error("Tried to call "+n+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}})}},{key:"random",value:function(){return this.island.random()}},{key:"now",value:function(){return this.island.time}},{key:"equal",value:function(e){return e instanceof t&&e.island===this.island}}]),t}(),oe=function(){function t(e){i(this,t),this.island=e}return a(t,[{key:"register",value:function(t){return ne.register(t)}},{key:"deregister",value:function(t){ne.deregister(t)}},{key:"publish",value:function(t,e,n){this.island.publishFromView(n,t,e)}},{key:"subscribe",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"queued";re.subscribe&&console.log('View.subscribe("'.concat(r,":").concat(t,'", ').concat(e," ").concat(n.name||(""+n).replace(/\([\s\S]*/,"")," [").concat(i,"])")),ne.addSubscription(r,t,e,n,i)}},{key:"unsubscribe",value:function(t,e,n,r){re.subscribe&&console.log('View.unsubscribe("'.concat(r,":").concat(t,'", ').concat(e," ").concat(n.name||(""+n).replace(/\([\s\S]*/,""),")")),ne.removeSubscription(r,t,e,n)}},{key:"unsubscribeAll",value:function(t){re.subscribe&&console.log("View.unsubscribeAll(".concat(t,")")),ne.removeAllSubscriptionsFor(t)}},{key:"future",value:function(t,e){return e?new Proxy(t,{get:function(n,r){if("function"==typeof t[r])return new Proxy(t[r],{apply:function(n,i,o){setTimeout((function(){t.id&&t[r].apply(t,g(o))}),e)}});throw Error("Tried to call "+r+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}}):t}},{key:"random",value:function(){return Math.random()}},{key:"now",value:function(){return this.island.time}},{key:"externalNow",value:function(){return this.island.controller.time}},{key:"extrapolatedNow",value:function(){return this.island.controller.extrapolatedNow}},{key:"isSynced",value:function(){return!!this.island.controller.synced}},{key:"equal",value:function(e){return e instanceof t&&e.island===this.island}}]),t}(),ae=null;function se(){if(!ae)throw Error("Tried to execute code that requires realm outside of realm.");return ae}function ce(t,e){if(null!==ae)throw Error("Can't switch realms from inside realm");try{return ae=new ie(t),e()}finally{ae=null}}function le(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==ae&&!n)throw Error("Can't switch realms from inside realm");var r=ae;try{return ae=new oe(t),e()}finally{ae=r}}var ue=function(t,n){n||(n={}),"function"==typeof n&&(n={cmp:n});var r,i="boolean"==typeof n.cycles&&n.cycles,o=n.cmp&&(r=n.cmp,function(t){return function(e,n){var i={key:e,value:t[e]},o={key:n,value:t[n]};return r(i,o)}}),a=[];return function t(n){if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0!==n){if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!==e(n))return JSON.stringify(n);var r,s;if(Array.isArray(n)){for(s="[",r=0;r<n.length;r++)r&&(s+=","),s+=t(n[r])||"null";return s+"]"}if(null===n)return"null";if(-1!==a.indexOf(n)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=a.push(n)-1,l=Object.keys(n).sort(o&&o(n));for(s="",r=0;r<l.length;r++){var u=l[r],d=t(n[u]);d&&(s&&(s+=","),s+=JSON.stringify(u)+":"+d)}return a.splice(c,1),"{"+s+"}"}}(t)},de=S((function(t){!function(n,r,i){var o,a=256,s=i.pow(a,6),c=i.pow(2,52),l=2*c,u=255;function d(t,e,u){var d=[],b=p(m((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(r)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(a):(t=new Uint8Array(a),(n.crypto||n.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=n.navigator,i=e&&e.plugins;return[+new Date,n,i,n.screen,y(r)]}}():t,3),d),v=new h(d),Z=function(){for(var t=v.g(6),e=s,n=0;t<c;)t=(t+n)*a,e*=a,n=v.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return Z.int32=function(){return 0|v.g(4)},Z.quick=function(){return v.g(4)/4294967296},Z.double=Z,p(y(v.S),r),(e.pass||u||function(t,e,n,r){return r&&(r.S&&f(r,v),t.state=function(){return f(v,{})}),n?(i.random=t,e):t})(Z,b,"global"in e?e.global:this==i,e.state)}function h(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<a;)s[i]=i++;for(i=0;i<a;i++)s[i]=s[o=u&o+t[i%n]+(e=s[i])],s[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,s=r.S;t--;)e=s[i=u&i+1],n=n*a+s[u&(s[i]=s[o=u&o+e])+(s[o]=e)];return r.i=i,r.j=o,n})(a)}function f(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,n){var r,i=[],o=e(t);if(n&&"object"==o)for(r in t)try{i.push(m(t[r],n-1))}catch(t){}return i.length?i:"string"==o?t:t+"\0"}function p(t,e){for(var n,r=t+"",i=0;i<r.length;)e[u&i]=u&(n^=19*e[u&i])+r.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(p(i.random(),r),t.exports){t.exports=d;try{o=rt}catch(t){}}else i.seedrandom=d}("undefined"!=typeof self?self:W,[],Math)}));var he=function(t){return t!=t},fe=Math.sqrt,me=.7853981633974483;var pe=function(t){var e,n;return 0===t?.16666666666666713:((t<0?-t:t)<=1?(e=t*(19.562619833175948+t*(t*(5.444622390564711+t*(.004253011369004428*t-.6019598008014124))-16.262479672107002))-8.198089802484825,n=t*(139.51056146574857+t*(t*(70.49610280856842+t*(1*t-14.740913729888538))-147.1791292232726))-49.18853881490881):(e=.004253011369004428+(t=1/t)*(t*(5.444622390564711+t*(t*(19.562619833175948+-8.198089802484825*t)-16.262479672107002))-.6019598008014124),n=1+t*(t*(70.49610280856842+t*(t*(139.51056146574857+-49.18853881490881*t)-147.1791292232726))-14.740913729888538)),e/n)};var ye=function(t){var e,n;return 0===t?.08333333333333809:((t<0?-t:t)<=1?(e=28.536655482610616+t*(t*(6.968710824104713+t*(.002967721961301243*t-.5634242780008963))-25.56901049652825),n=342.43986579130785+t*(t*(147.0656354026815+t*(1*t-21.947795316429207))-383.8770957603691)):(e=.002967721961301243+(t=1/t)*(t*(6.968710824104713+t*(28.536655482610616*t-25.56901049652825))-.5634242780008963),n=1+t*(t*(147.0656354026815+t*(342.43986579130785*t-383.8770957603691))-21.947795316429207)),e/n)};var be=function(t){var e,n,r,i,o;if(he(t))return NaN;if(t>0?r=t:(e=!0,r=-t),r>1)return NaN;if(r>.625)i=(n=1-r)*ye(n),n=fe(n+n),o=me-n,o-=n=n*i-6123233995736766e-32,o+=me;else{if(r<1e-8)return t;o=r*(o=(n=r*r)*pe(n))+r}return e?-o:o};var ve=function(t){var e;return he(t)||t<-1||t>1?NaN:t>.5?2*be(fe(.5-.5*t)):(e=me-be(t),e+=6123233995736766e-32,e+=me)};var Ze=function(){return"function"==typeof Symbol&&"symbol"===e(Symbol("foo"))}();var ge=function(){return Ze&&"symbol"===e(Symbol.toStringTag)},Xe=Object.prototype.toString;var we=function(t){return Xe.call(t)},Ge=Object.prototype.hasOwnProperty;var xe=function(t,e){return null!=t&&Ge.call(t,e)},Le="function"==typeof Symbol?Symbol.toStringTag:"";var ke=function(t){var e,n,r;if(null==t)return Xe.call(t);n=t[Le],e=xe(t,Le);try{t[Le]=void 0}catch(e){return Xe.call(t)}return r=Xe.call(t),e?t[Le]=n:delete t[Le],r},We=ge()?ke:we,Se="function"==typeof Uint32Array;var Ye=function(t){return Se&&t instanceof Uint32Array||"[object Uint32Array]"===We(t)},Ce=4294967295,Ke="function"==typeof Uint32Array?Uint32Array:null;var Ie="function"==typeof Uint32Array?Uint32Array:null;var Pe=function(){throw new Error("not implemented")},Te=function(){var t,e;if("function"!=typeof Ke)return!1;try{e=new Ke(e=[1,3.14,-3.14,Ce+1,Ce+2]),t=Ye(e)&&1===e[0]&&3===e[1]&&e[2]===Ce-2&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?Ie:Pe,He="function"==typeof Float64Array;var Ne=function(t){return He&&t instanceof Float64Array||"[object Float64Array]"===We(t)},Me="function"==typeof Float64Array?Float64Array:null;var Ve="function"==typeof Float64Array?Float64Array:null;var Re=function(){throw new Error("not implemented")},ze=function(){var t,e;if("function"!=typeof Me)return!1;try{e=new Me([1,3.14,-3.14,NaN]),t=Ne(e)&&1===e[0]&&3.14===e[1]&&-3.14===e[2]&&e[3]!=e[3]}catch(e){t=!1}return t}()?Ve:Re,je="function"==typeof Uint8Array;var Fe=function(t){return je&&t instanceof Uint8Array||"[object Uint8Array]"===We(t)},Je="function"==typeof Uint8Array?Uint8Array:null;var _e="function"==typeof Uint8Array?Uint8Array:null;var Ee=function(){throw new Error("not implemented")},Qe=function(){var t,e;if("function"!=typeof Je)return!1;try{e=new Je(e=[1,3.14,-3.14,256,257]),t=Fe(e)&&1===e[0]&&3===e[1]&&253===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?_e:Ee,De="function"==typeof Uint16Array;var Ue=function(t){return De&&t instanceof Uint16Array||"[object Uint16Array]"===We(t)},Oe="function"==typeof Uint16Array?Uint16Array:null;var Be="function"==typeof Uint16Array?Uint16Array:null;var Ae,qe=function(){throw new Error("not implemented")},$e={uint16:function(){var t,e;if("function"!=typeof Oe)return!1;try{e=new Oe(e=[1,3.14,-3.14,65536,65537]),t=Ue(e)&&1===e[0]&&3===e[1]&&65533===e[2]&&0===e[3]&&1===e[4]}catch(e){t=!1}return t}()?Be:qe,uint8:Qe};(Ae=new $e.uint16(1))[0]=4660;var tn=52===new $e.uint8(Ae.buffer)[0],en=!0===tn?1:0,nn=new ze(1),rn=new Te(nn.buffer);var on=function(t){return nn[0]=t,rn[en]},an=!0===tn?1:0,sn=new ze(1),cn=new Te(sn.buffer);var ln=function(t,e){return sn[0]=t,cn[an]=e>>>0,sn[0]},un=Number.POSITIVE_INFINITY,dn=Number.NEGATIVE_INFINITY,hn=1023;var fn=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.3999999999940942+t*(.2857142874366239+t*(.22222198432149784+t*(.1818357216161805+t*(.15313837699209373+.14798198605116586*t)))))},mn=.6931471803691238,pn=1.9082149292705877e-10;var yn=function(t){var e,n,r,i,o,a,s,c,l,u;if(t<-1||he(t))return NaN;if(-1===t)return dn;if(t===un)return t;if(0===t)return t;if(u=1,(r=t<0?-t:t)<.41421356237309503){if(r<1.862645149230957e-9)return r<5551115123125783e-32?t:t-t*t*.5;t>-.2928932188134525&&(u=0,i=t,n=1)}return 0!==u&&(r<9007199254740992?(o=(u=((n=on(l=1+t))>>20)-hn)>0?1-(l-t):t-(l-1),o/=l):(u=((n=on(l=t))>>20)-hn,o=0),(n&=1048575)<434334?l=ln(l,1072693248|n):(u+=1,l=ln(l,1071644672|n),n=1048576-n>>2),i=l-1),e=.5*i*i,0===n?0===i?u*mn+(o+=u*pn):u*mn-((c=e*(1-.6666666666666666*i))-(u*pn+o)-i):(c=(s=(a=i/(2+i))*a)*fn(s),0===u?i-(e-a*(e+c)):u*mn-(e-(a*(e+c)+(u*pn+o))-i))},bn=.6931471805599453;var vn=function(t){return 0===t?.3999999999940942:.3999999999940942+t*(.22222198432149784+.15313837699209373*t)};var Zn=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.2857142874366239+t*(.1818357216161805+.14798198605116586*t))},gn=.6931471803691238,Xn=1.9082149292705877e-10,wn=1048575;var Gn=function(t){var e,n,r,i,o,a,s,c,l,u,d;return 0===t?dn:he(t)||t<0?NaN:(i=0,(n=on(t))<1048576&&(i-=54,n=on(t*=0x40000000000000)),n>=2146435072?t+t:(i+=(n>>20)-hn|0,i+=(s=(n&=wn)+614244&1048576|0)>>20|0,a=(t=ln(t,n|1072693248^s))-1,(wn&2+n)<3?0===a?0===i?0:i*gn+i*Xn:(o=a*a*(.5-.3333333333333333*a),0===i?a-o:i*gn-(o-i*Xn-a)):(s=n-398458|0,c=440401-n|0,r=(u=(d=(l=a/(2+a))*l)*d)*vn(u),o=d*Zn(u)+r,(s|=c)>0?(e=.5*a*a,0===i?a-(e-l*(e+o)):i*gn-(e-(l*(e+o)+i*Xn)-a)):0===i?a-l*(a-o):i*gn-(l*(a-o)-i*Xn-a))))};var xn=function(t){var e;return he(t)||t<1?NaN:1===t?0:t>=268435456?Gn(t)+bn:t>2?Gn(2*t-1/(t+fe(t*t-1))):yn((e=t-1)+fe(2*e+e*e))};var Ln=function(t){return t===un||t===dn};var kn=function(t){var e,n,r;return he(t)||Ln(t)?t:(t<0&&(t=-t,e=!0),r=t<3.725290298461914e-9?t:t>268435456?Gn(t)+bn:t>2?Gn(2*t+1/(fe(t*t+1)+t)):yn(t+(n=t*t)/(1+fe(1+n))),e?-r:r)},Wn=1.5707963267948966;var Sn=function(t){return 0===t?-64.85021904942025:t*(t*(t*(-.8750608600031904*t-16.157537187333652)-75.00855792314705)-122.88666844901361)-64.85021904942025};var Yn=function(t){return 0===t?194.5506571482614:194.5506571482614+t*(485.3903996359137+t*(432.88106049129027+t*(165.02700983169885+t*(24.858464901423062+1*t))))},Cn=6123233995736766e-32;var Kn=function(t){var e,n,r,i;return he(t)||0===t?t:t===un?Wn:t===dn?-Wn:(t<0&&(n=!0,t=-t),e=0,t>2.414213562373095?(r=Wn,e=1,t=-1/t):t<=.66?r=0:(r=me,e=2,t=(t-1)/(t+1)),i=t*(i=(i=t*t)*Sn(i)/Yn(i))+t,2===e?i+=.5*Cn:1===e&&(i+=Cn),r+=i,n?-r:r)};var In,Pn,Tn=function(t){var e,n;return he(t)||t<-1||t>1?NaN:1===t?un:-1===t?dn:(t<0&&(e=!0,t=-t),t<3.725290298461914e-9?e?-t:t:(n=t<.5?.5*yn((n=t+t)+n*t/(1-t)):.5*yn((t+t)/(1-t)),e?-n:n))};!0===tn?(In=1,Pn=0):(In=0,Pn=1);var Hn={HIGH:In,LOW:Pn},Nn=new ze(1),Mn=new Te(Nn.buffer),Vn=Hn.HIGH,Rn=Hn.LOW;var zn=function(t,e){return Nn[0]=e,t[0]=Mn[Vn],t[1]=Mn[Rn],t};var jn,Fn,Jn=function(t,e){return 1===arguments.length?zn([0,0],t):zn(t,e)};!0===tn?(jn=1,Fn=0):(jn=0,Fn=1);var _n={HIGH:jn,LOW:Fn},En=new ze(1),Qn=new Te(En.buffer),Dn=_n.HIGH,Un=_n.LOW;var On=function(t,e){return Qn[Dn]=t,Qn[Un]=e,En[0]},Bn=[0,0];var An=function(t,e){var n,r;return Jn(Bn,t),n=Bn[0],n&=2147483647,r=on(e),On(n|=r&=2147483648,Bn[1])};var qn=function(t){return!!(on(t)>>>31)},$n=3.141592653589793;var tr=function(t,e){var n;return he(e)||he(t)?NaN:Ln(e)?e===un?Ln(t)?An($n/4,t):An(0,t):Ln(t)?An(3*$n/4,t):An($n,t):Ln(t)?An($n/2,t):0===t?e>=0&&!qn(e)?An(0,t):An($n,t):0===e?An($n/2,t):(n=Kn(t/e),e<0?n<=0?n+$n:n-$n:n)},er=22250738585072014e-324;var nr=function(t){return 0===t?1.87595182427177:1.87595182427177+t*(t*(1.6214297201053545+t*(.14599619288661245*t-.758397934778766))-1.8849797954337717)},rr=2147483647;var ir=function(t){var e,n,r,i,o;return he(t)||Ln(t)||0===t?t:(n=-2147483648&(r=on(t)),r&=rr,o=0,t<er?(o=0x40000000000000,e=on(o*=t),o=On(n|(e=(e&rr)/3+696219795),0)):o=ln(o,n|(e=r/3+715094163)),o*=nr(i=o*o*(o/t)),e=on(o),o=On(e+1,0),o+=o*(i=((i=t/(o*o))-o)/(o+o+i)))};var or=function(t){return 0===t?.0416666666666666:.0416666666666666+t*(2480158728947673e-20*t-.001388888888887411)};var ar=function(t){return 0===t?-2.7557314351390663e-7:t*(2.087572321298175e-9+-11359647557788195e-27*t)-2.7557314351390663e-7};var sr=function(t,e){var n,r,i,o;return i=(o=t*t)*o,r=o*or(o),r+=i*i*ar(o),(i=1-(n=.5*o))+(1-i-n+(o*r-t*e))},cr=-.16666666666666632;var lr=function(t,e){var n,r,i;return n=.00833333333332249+(i=t*t)*(27557313707070068e-22*i-.0001984126982985795)+i*(i*i)*(1.58969099521155e-10*i-2.5050760253406863e-8),r=i*t,0===e?t+r*(cr+i*n):t-(i*(.5*e-r*n)-e-r*cr)},ur=!0===tn?0:1,dr=new ze(1),hr=new Te(dr.buffer);var fr=function(t){return dr[0]=t,hr[ur]},mr=Math.floor;var pr=function(t){return t<0?-t:0===t?0:t};var yr=function(t,e){return he(e)||Ln(e)?(t[0]=e,t[1]=0,t):0!==e&&pr(e)<er?(t[0]=4503599627370496*e,t[1]=-52,t):(t[0]=e,t[1]=0,t)};var br=function(t,e){return 1===arguments.length?yr([0,0],t):yr(t,e)};var vr=function(t){var e=on(t);return(e=(2146435072&e)>>>20)-hn|0},Zr=[0,0],gr=[0,0];var Xr=function(t,e){var n,r;return 0===t||he(t)||Ln(t)?t:(br(Zr,t),e+=Zr[1],(e+=vr(t=Zr[0]))<-1074?An(0,t):e>1023?t<0?dn:un:(e<=-1023?(e+=52,r=2220446049250313e-31):r=1,Jn(gr,t),n=gr[0],n&=2148532223,r*On(n|=e+hn<<20,gr[1])))},wr=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],Gr=[1.570796251296997,7.549789415861596e-8,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],xr=16777216,Lr=5.960464477539063e-8,kr=Cr(new Array(20)),Wr=Cr(new Array(20)),Sr=Cr(new Array(20)),Yr=Cr(new Array(20));function Cr(t){var e,n=t.length;for(e=0;e<n;e++)t[e]=0;return t}function Kr(t,e,n,r,i,o,a,s,c){var l,u,d,h,f,m,p,y,b;for(h=o,b=r[n],y=n,f=0;y>0;f++)u=Lr*b|0,Yr[f]=b-xr*u|0,b=r[y-1]+u,y-=1;if(b=Xr(b,i),b-=8*mr(.125*b),b-=p=0|b,d=0,i>0?(p+=f=Yr[n-1]>>24-i,Yr[n-1]-=f<<24-i,d=Yr[n-1]>>23-i):0===i?d=Yr[n-1]>>23:b>=.5&&(d=2),d>0){for(p+=1,l=0,f=0;f<n;f++)y=Yr[f],0===l?0!==y&&(l=1,Yr[f]=16777216-y):Yr[f]=16777215-y;if(i>0)switch(i){case 1:Yr[n-1]&=8388607;break;case 2:Yr[n-1]&=4194303}2===d&&(b=1-b,0!==l&&(b-=Xr(1,i)))}if(0===b){for(y=0,f=n-1;f>=o;f--)y|=Yr[f];if(0===y){for(m=1;0===Yr[o-m];m++);for(f=n+1;f<=n+m;f++){for(c[s+f]=wr[a+f],u=0,y=0;y<=s;y++)u+=t[y]*c[s+(f-y)];r[f]=u}return Kr(t,e,n+=m,r,i,o,a,s,c)}}if(0===b)for(n-=1,i-=24;0===Yr[n];)n-=1,i-=24;else(b=Xr(b,-i))>=xr?(u=Lr*b|0,Yr[n]=b-xr*u|0,i+=24,Yr[n+=1]=u):Yr[n]=0|b;for(u=Xr(1,i),f=n;f>=0;f--)r[f]=u*Yr[f],u*=Lr;for(f=n;f>=0;f--){for(u=0,m=0;m<=h&&m<=n-f;m++)u+=Gr[m]*r[f+m];Sr[n-f]=u}for(u=0,f=n;f>=0;f--)u+=Sr[f];for(e[0]=0===d?u:-u,u=Sr[0]-u,f=1;f<=n;f++)u+=Sr[f];return e[1]=0===d?u:-u,7&p}var Ir=function(t,e,n,r){var i,o,a,s,c,l,u;for(4,(o=(n-3)/24|0)<0&&(o=0),s=n-24*(o+1),l=o-(a=r-1),u=a+4,c=0;c<=u;c++)kr[c]=l<0?0:wr[l],l+=1;for(c=0;c<=4;c++){for(i=0,l=0;l<=a;l++)i+=t[l]*kr[a+(c-l)];Wr[c]=i}return 4,Kr(t,e,4,Wr,s,4,o,a,kr)},Pr=Math.round;var Tr=function(t,e,n){var r,i,o,a,s;return o=t-1.5707963267341256*(r=Pr(.6366197723675814*t)),a=6077100506506192e-26*r,s=e>>20|0,n[0]=o-a,s-(on(n[0])>>20&2047)>16&&(a=20222662487959506e-37*r-((i=o)-(o=i-(a=6077100506303966e-26*r))-a),n[0]=o-a,s-(on(n[0])>>20&2047)>49&&(a=84784276603689e-45*r-((i=o)-(o=i-(a=20222662487111665e-37*r))-a),n[0]=o-a)),n[1]=o-n[0]-a,r},Hr=1.5707963267341256,Nr=6077100506506192e-26,Mr=2*Nr,Vr=3*Nr,Rr=4*Nr,zr=new Array(3),jr=new Array(2);var Fr=function(t,e){var n,r,i,o,a,s,c;if((i=2147483647&on(t)|0)<=1072243195)return e[0]=t,e[1]=0,0;if(i<=1074752122)return 598523==(1048575&i)?Tr(t,i,e):i<=1073928572?t>0?(c=t-Hr,e[0]=c-Nr,e[1]=c-e[0]-Nr,1):(c=t+Hr,e[0]=c+Nr,e[1]=c-e[0]+Nr,-1):t>0?(c=t-2*Hr,e[0]=c-Mr,e[1]=c-e[0]-Mr,2):(c=t+2*Hr,e[0]=c+Mr,e[1]=c-e[0]+Mr,-2);if(i<=1075594811)return i<=1075183036?1074977148===i?Tr(t,i,e):t>0?(c=t-3*Hr,e[0]=c-Vr,e[1]=c-e[0]-Vr,3):(c=t+3*Hr,e[0]=c+Vr,e[1]=c-e[0]+Vr,-3):1075388923===i?Tr(t,i,e):t>0?(c=t-4*Hr,e[0]=c-Rr,e[1]=c-e[0]-Rr,4):(c=t+4*Hr,e[0]=c+Rr,e[1]=c-e[0]+Rr,-4);if(i<1094263291)return Tr(t,i,e);if(i>=2146435072)return e[0]=NaN,e[1]=NaN,0;for(n=fr(t),c=On(i-((r=(i>>20)-1046)<<20|0),n),a=0;a<2;a++)zr[a]=0|c,c=16777216*(c-zr[a]);for(zr[2]=c,o=3;0===zr[o-1];)o-=1;return s=Ir(zr,jr,r,o),t<0?(e[0]=-jr[0],e[1]=-jr[1],-s):(e[0]=jr[0],e[1]=jr[1],s)},Jr=[0,0];var _r=function(t){var e;if(e=on(t),(e&=2147483647)<=1072243195)return e<1044381696?1:sr(t,0);if(e>=2146435072)return NaN;switch(3&Fr(t,Jr)){case 0:return sr(Jr[0],Jr[1]);case 1:return-lr(Jr[0],Jr[1]);case 2:return-sr(Jr[0],Jr[1]);default:return lr(Jr[0],Jr[1])}},Er=Math.ceil;var Qr=function(t){return t<0?Er(t):mr(t)};var Dr=function(t){return 0===t?.16666666666666602:.16666666666666602+t*(t*(6613756321437934e-20+t*(4.1381367970572385e-8*t-16533902205465252e-22))-.0027777777777015593)};var Ur=function(t,e,n){var r,i,o;return o=(r=t-e)-(i=r*r)*Dr(i),Xr(1-(e-r*o/(2-o)-t),n)},Or=1.4426950408889634,Br=1/(1<<28);var Ar=function(t){var e;return he(t)||t===un?t:t===dn?0:t>709.782712893384?un:t<-745.1332191019411?0:t>-3.725290298461914e-9&&t<Br?1+t:(e=Qr(t<0?Or*t-.5:Or*t+.5),Ur(t-.6931471803691238*e,1.9082149292705877e-10*e,e))};var qr=function(t){return he(t)?t:(t<0&&(t=-t),t>21?Ar(t)/2:(Ar(t)+Ar(-t))/2)};var $r=function(t){return 0===t?-.03333333333333313:t*(.0015873015872548146+t*(t*(4008217827329362e-21+-2.0109921818362437e-7*t)-793650757867488e-19))-.03333333333333313},ti=.6931471803691238,ei=1.9082149292705877e-10,ni=1.4426950408889634;var ri=function(t){var e,n,r,i,o,a,s,c,l,u,d,h;if(t===un||he(t))return t;if(t===dn)return-1;if(0===t)return t;if(t<0?(n=!0,s=-t):(n=!1,s=t),s>=38.816242111356935){if(n)return-1;if(s>=709.782712893384)return un}if(o=0|on(s),s>.34657359027997264)s<1.0397207708399179?n?(r=t+ti,i=-ei,h=-1):(r=t-ti,i=ei,h=1):(h=n?ni*t-.5:ni*t+.5,r=t-(u=h|=0)*ti,i=u*ei),l=r-(t=r-i)-i;else{if(o<1016070144)return t;h=0}return d=(c=t*(e=.5*t))*(((a=1+c*$r(c))-(u=3-a*e))/(6-t*u)),0===h?t-(t*d-c):(d=t*(d-l)-l,d-=c,-1===h?.5*(t-d)-.5:1===h?t<-.25?-2*(d-(t+.5)):1+2*(t-d):h<=-2||h>56?(r=on(s=1-(d-t))+(h<<20)|0,(s=ln(s,r))-1):(u=1,h<20?s=(u=ln(u,r=1072693248-(2097152>>h)|0))-(d-t):(s=t-(d+(u=ln(u,r=hn-h<<20|0))),s+=1),r=on(s)+(h<<20)|0,ln(s,r)))},ii=!0===tn?0:1,oi=new ze(1),ai=new Te(oi.buffer);var si=function(t,e){return oi[0]=t,ai[ii]=e>>>0,oi[0]};var ci=function(t){return 0===t?.3999999999940942:.3999999999940942+t*(.22222198432149784+.15313837699209373*t)};var li=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.2857142874366239+t*(.1818357216161805+.14798198605116586*t))},ui=1048575;var di=function(t){var e,n,r,i,o,a,s,c,l,u;return r=on(t),i=t-1,(ui&2+r)<3?0===i?0:i*i*(.3333333333333333*i-.5):(l=(r&=ui)-398458|0,u=440401-r|0,n=(c=(a=(o=i/(2+i))*o)*a)*ci(c),s=a*li(c)+n,(l|=u)>0?o*((e=.5*i*i)+s)-e:o*(s-i))},hi=.4342944818781689;var fi=function(t){var e,n,r,i,o,a,s;return he(t)||t<0?NaN:0===t?dn:(o=0,(n=on(t))<1048576&&(o-=54,n=on(t*=0x40000000000000)),n>=2146435072?t+t:(o+=(n>>20)-hn|0,t=ln(t,(n&=1048575)|1072693248^(i=n+614244&1048576|0)),a=o+=i>>20|0,r=di(t),s=3694239077158931e-28*a+25082946711645275e-27*((t-=1)+r),(s+=(t-(e=si(t,0))+r)*hi+e*hi)+.30102999566361177*a))};var mi=function(t){return 0===t?.3999999999940942:.3999999999940942+t*(.22222198432149784+.15313837699209373*t)};var pi=function(t){return 0===t?.6666666666666735:.6666666666666735+t*(.2857142874366239+t*(.1818357216161805+.14798198605116586*t))},yi=1048575;var bi=function(t){var e,n,r,i,o,a,s,c,l,u;return r=on(t),i=t-1,(yi&2+r)<3?0===i?0:i*i*(.3333333333333333*i-.5):(l=(r&=yi)-398458|0,u=440401-r|0,n=(c=(a=(o=i/(2+i))*o)*a)*mi(c),s=a*pi(c)+n,(l|=u)>0?o*((e=.5*i*i)+s)-e:o*(s-i))},vi=1.4426950407214463,Zi=[0,0];var gi=function(t){var e,n,r,i,o;if(he(t)||t<0)return NaN;if(Jn(Zi,t),o=0,(n=Zi[0])<1048576){if(0==(2147483647&n|Zi[1]))return dn;o-=54,n=on(t*=0x40000000000000)}return n>=2146435072?t+t:(o+=(n>>20)-hn|0,t=ln(t,(n&=1048575)|1072693248^(i=n+614244&1048576|0)),o+=i>>20|0,r=bi(t),1.6751713164886512e-10*((t-=1)+r)+(t-(e=si(t,0))+r)*vi+e*vi+o)},Xi=[0,0];var wi=function(t){var e;if(e=on(t),(e&=2147483647)<=1072243195)return e<1045430272?t:lr(t,0);if(e>=2146435072)return NaN;switch(3&Fr(t,Xi)){case 0:return lr(Xi[0],Xi[1]);case 1:return sr(Xi[0],Xi[1]);case 2:return-lr(Xi[0],Xi[1]);default:return-sr(Xi[0],Xi[1])}};var Gi=function(t){var e,n;return 0===t?.16666666666666666:((t<0?-t:t)<=1?(e=t*(t*(-.789474443963537*t-163.72585752598383)-11561.443576500522)-351754.9648081514,n=t*(36157.827983443196+t*(1*t-277.7110814206028))-2110529.7888489086):(e=(t=1/t)*(t*(-351754.9648081514*t-11561.443576500522)-163.72585752598383)-.789474443963537,n=1+t*(t*(36157.827983443196+-2110529.7888489086*t)-277.7110814206028)),e/n)};var xi=function(t){var e;return 0===t?t:(e=pr(t),t>710.4758600739439||t<-709.089565712824?t>0?un:dn:e>1?e>=709.0895657128241?(e=Ar(.5*e),e*=.5*e,t<0&&(e=-e),e):(e=.5*(e=Ar(e))-.5/e,t<0&&(e=-e),e):t+t*(e*=e)*Gi(e))};var Li=function(t){return 0===t?.13333333333320124:.13333333333320124+t*(.021869488294859542+t*(.0035920791075913124+t*(.0005880412408202641+t*(7817944429395571e-20+-18558637485527546e-21*t))))};var ki=function(t){return 0===t?.05396825397622605:.05396825397622605+t*(.0088632398235993+t*(.0014562094543252903+t*(.0002464631348184699+t*(7140724913826082e-20+2590730518636337e-20*t))))};var Wi=function(t,e,n){var r,i,o,a,s,c,l,u,d;return(i=2147483647&(r=on(t))|0)>=1072010280&&(t<0&&(t=-t,e=-e),t=(d=.7853981633974483-t)+(u=3061616997868383e-32-e),e=0),a=e+(d=t*t)*((s=d*t)*((a=Li(u=d*d))+(l=d*ki(u)))+e),u=t+(a+=.3333333333333341*s),i>=1072010280?(1-(r>>30&2))*((l=n)-2*(t-(u*u/(u+l)-a))):1===n?u:(si(d=u,0),l=a-(d-t),si(c=o=-1/u,0),c+o*((s=1+c*d)+c*l))},Si=[0,0];var Yi=function(t){var e,n;return e=on(t),(e&=2147483647)<=1072243195?e<1044381696?t:Wi(t,0,1):e>=2146435072?NaN:(n=Fr(t,Si),Wi(Si[0],Si[1],1-((1&n)<<1)))};var Ci=function(t){var e,n;return 0===t?-.3333333333333332:((t<0?-t:t)<=1?(e=t*(t*(0*t-.9643991794250523)-99.28772310019185)-1614.6876844170845,n=4844.063053251255+t*(2235.4883906010045+t*(112.81167849163293+1*t))):(e=0+(t=1/t)*(t*(-1614.6876844170845*t-99.28772310019185)-.9643991794250523),n=1+t*(112.81167849163293+t*(2235.4883906010045+4844.063053251255*t))),e/n)};var Ki=function(t){var e,n;if((n=pr(t))>44.014845965556525)return t<0?-1:1;if(n>=.625)n=1-2/((e=Ar(2*n))+1),t<0&&(n=-n);else{if(0===t)return t;n=t+t*(e=t*t)*Ci(e)}return n};void 0===window.CroquetMath&&(window.CroquetMath={}),Object.assign(window.CroquetMath,{acos:ve,acosh:xn,asin:be,asinh:kn,atan:Kn,atanh:Tn,atan2:tr,cbrt:ir,cos:_r,cosh:qr,exp:Ar,expm1:ri,log:Gn,log1p:yn,log10:fi,log2:gi,sin:wi,sinh:xi,tan:Yi,tanh:Ki});var Ii=Math.pow;function Pi(t){return t===1/0||t===-1/0}window.CroquetMath.pow=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(Pi(t)||Pi(e))return Ii(t,e);if(0===t||0===e)return Ii(t,e);if(t<0&&!function(t){return Number.isInteger(t)}(e))return NaN;if(1===e)return t;if(2===e)return t*t;if(3===e)return t*t*t;if(4===e)return t*t*t*t;var n=1;return t<0&&(t*=-1,n=Ii(-1,e)),window.CroquetMath.exp(window.CroquetMath.log(t)*e)*n};var Ti=S((function(t,e){var n;t.exports=(n=n||function(t,e){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==W&&W.crypto&&(n=W.crypto),!n)try{n=rt}catch(t){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),o={},a=o.lib={},s=a.Base={extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=s.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=s.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new c.init(e,t)}}),l=o.enc={},u=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new c.init(n,e/2)}},d=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new c.init(n,e)}},h=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return d.parse(unescape(encodeURIComponent(t)))}},f=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=h.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),l=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,u=t.min(4*l,o);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(i,d);n=i.splice(0,l),r.sigBytes-=u}return new c.init(n,u)},clone:function(){var t=s.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),m=(a.Hasher=f.extend({cfg:s.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new m.HMAC.init(t,n).finalize(e)}}}),o.algo={});return o}(Math),n)})),Hi=S((function(t,e){var n;t.exports=(n=Ti,function(){if("function"==typeof ArrayBuffer){var t=n.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=t[i]<<24-i%4*8;e.call(this,r,n)}else e.apply(this,arguments)}).prototype=t}}(),n.lib.WordArray)})),Ni=S((function(t,e){var n;t.exports=(n=Ti,function(){var t=n,e=t.lib.WordArray;function r(t,n,r){for(var i=[],o=0,a=0;a<n;a++)if(a%4){var s=r[t.charCodeAt(a-1)]<<a%4*2|r[t.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=s<<24-o%4*8,o++}return e.create(i,o)}t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(t){var e=t.length,n=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<n.length;o++)i[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return r(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.enc.Base64)})),Mi=S((function(t,e){var n;t.exports=(n=Ti,function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,a=e.algo,s=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(s[i]=n(t.pow(r,.5))),c[i]=n(t.pow(r,1/3)),i++),r++}();var l=[],u=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],d=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|t[e+f];else{var m=l[f-15],p=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,y=l[f-2],b=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=p+l[f-7]+b+l[f-16]}var v=r&i^r&o^i&o,Z=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),g=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+c[f]+l[f];h=d,d=u,u=s,s=a+g|0,a=o,o=i,i=r,r=g+(Z+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(u),e.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)})),Vi=S((function(t,e){t.exports=Ti.enc.Utf8})),Ri=(S((function(t,e){var n,r,i,o,a,s,c,l;t.exports=(r=(n=l=Ti).lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],c=a.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],l=0;l<80;l++){if(l<16)s[l]=0|t[e+l];else{var u=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+c+s[l];d+=l<20?1518500249+(i&o|~i&a):l<40?1859775393+(i^o^a):l<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,c=a,a=o,o=i<<30|i>>>2,i=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}}),n.SHA1=o._createHelper(c),n.HmacSHA1=o._createHmacHelper(c),l.SHA1)})),S((function(t,e){var n,r,i;t.exports=(r=(n=Ti).lib.Base,i=n.enc.Utf8,void(n.algo.HMAC=r.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),a=this._iKey=e.clone(),s=o.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))})),S((function(t,e){var n,r,i,o,a,s,c,l,u;t.exports=(r=(n=u=Ti).lib,i=r.Base,o=r.WordArray,a=n.algo,s=a.SHA1,c=a.HMAC,l=a.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=c.create(n.hasher,t),i=o.create(),a=o.create([1]),s=i.words,l=a.words,u=n.keySize,d=n.iterations;s.length<u;){var h=r.update(e).finalize(a);r.reset();for(var f=h.words,m=f.length,p=h,y=1;y<d;y++){p=r.finalize(p),r.reset();for(var b=p.words,v=0;v<m;v++)f[v]^=b[v]}i.concat(h),l[0]++}return i.sigBytes=4*u,i}}),n.PBKDF2=function(t,e,n){return l.create(n).compute(t,e)},u.PBKDF2)}))),zi=(S((function(t,e){var n;t.exports=(n=Ti,function(t){var e=n,r=e.lib,i=r.WordArray,o=r.Hasher,a=e.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[e+0],c=t[e+1],f=t[e+2],m=t[e+3],p=t[e+4],y=t[e+5],b=t[e+6],v=t[e+7],Z=t[e+8],g=t[e+9],X=t[e+10],w=t[e+11],G=t[e+12],x=t[e+13],L=t[e+14],k=t[e+15],W=o[0],S=o[1],Y=o[2],C=o[3];W=l(W,S,Y,C,a,7,s[0]),C=l(C,W,S,Y,c,12,s[1]),Y=l(Y,C,W,S,f,17,s[2]),S=l(S,Y,C,W,m,22,s[3]),W=l(W,S,Y,C,p,7,s[4]),C=l(C,W,S,Y,y,12,s[5]),Y=l(Y,C,W,S,b,17,s[6]),S=l(S,Y,C,W,v,22,s[7]),W=l(W,S,Y,C,Z,7,s[8]),C=l(C,W,S,Y,g,12,s[9]),Y=l(Y,C,W,S,X,17,s[10]),S=l(S,Y,C,W,w,22,s[11]),W=l(W,S,Y,C,G,7,s[12]),C=l(C,W,S,Y,x,12,s[13]),Y=l(Y,C,W,S,L,17,s[14]),W=u(W,S=l(S,Y,C,W,k,22,s[15]),Y,C,c,5,s[16]),C=u(C,W,S,Y,b,9,s[17]),Y=u(Y,C,W,S,w,14,s[18]),S=u(S,Y,C,W,a,20,s[19]),W=u(W,S,Y,C,y,5,s[20]),C=u(C,W,S,Y,X,9,s[21]),Y=u(Y,C,W,S,k,14,s[22]),S=u(S,Y,C,W,p,20,s[23]),W=u(W,S,Y,C,g,5,s[24]),C=u(C,W,S,Y,L,9,s[25]),Y=u(Y,C,W,S,m,14,s[26]),S=u(S,Y,C,W,Z,20,s[27]),W=u(W,S,Y,C,x,5,s[28]),C=u(C,W,S,Y,f,9,s[29]),Y=u(Y,C,W,S,v,14,s[30]),W=d(W,S=u(S,Y,C,W,G,20,s[31]),Y,C,y,4,s[32]),C=d(C,W,S,Y,Z,11,s[33]),Y=d(Y,C,W,S,w,16,s[34]),S=d(S,Y,C,W,L,23,s[35]),W=d(W,S,Y,C,c,4,s[36]),C=d(C,W,S,Y,p,11,s[37]),Y=d(Y,C,W,S,v,16,s[38]),S=d(S,Y,C,W,X,23,s[39]),W=d(W,S,Y,C,x,4,s[40]),C=d(C,W,S,Y,a,11,s[41]),Y=d(Y,C,W,S,m,16,s[42]),S=d(S,Y,C,W,b,23,s[43]),W=d(W,S,Y,C,g,4,s[44]),C=d(C,W,S,Y,G,11,s[45]),Y=d(Y,C,W,S,k,16,s[46]),W=h(W,S=d(S,Y,C,W,f,23,s[47]),Y,C,a,6,s[48]),C=h(C,W,S,Y,v,10,s[49]),Y=h(Y,C,W,S,L,15,s[50]),S=h(S,Y,C,W,y,21,s[51]),W=h(W,S,Y,C,G,6,s[52]),C=h(C,W,S,Y,m,10,s[53]),Y=h(Y,C,W,S,X,15,s[54]),S=h(S,Y,C,W,c,21,s[55]),W=h(W,S,Y,C,Z,6,s[56]),C=h(C,W,S,Y,k,10,s[57]),Y=h(Y,C,W,S,b,15,s[58]),S=h(S,Y,C,W,x,21,s[59]),W=h(W,S,Y,C,p,6,s[60]),C=h(C,W,S,Y,w,10,s[61]),Y=h(Y,C,W,S,f,15,s[62]),S=h(S,Y,C,W,g,21,s[63]),o[0]=o[0]+W|0,o[1]=o[1]+S|0,o[2]=o[2]+Y|0,o[3]=o[3]+C|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function l(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+i+a;return(s<<o|s>>>32-o)+e}function u(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+i+a;return(s<<o|s>>>32-o)+e}function d(t,e,n,r,i,o,a){var s=t+(e^n^r)+i+a;return(s<<o|s>>>32-o)+e}function h(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+i+a;return(s<<o|s>>>32-o)+e}e.MD5=o._createHelper(c),e.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)})),S((function(t,e){var n,r,i,o,a,s,c,l;t.exports=(r=(n=l=Ti).lib,i=r.Base,o=r.WordArray,a=n.algo,s=a.MD5,c=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),a=o.create(),s=a.words,c=r.keySize,l=r.iterations;s.length<c;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var u=1;u<l;u++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*c,a}}),n.EvpKDF=function(t,e,n){return c.create(n).compute(t,e)},l.EvpKDF)})),S((function(t,e){var n,r,i,o,a,s,c,l,u,d,h,f,m,p,y,b,v,Z,g,X;t.exports=void((n=Ti).lib.Cipher||(i=n,o=i.lib,a=o.Base,s=o.WordArray,c=o.BufferedBlockAlgorithm,l=i.enc,l.Utf8,u=l.Base64,d=i.algo.EvpKDF,h=o.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?X:Z}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),o.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=i.mode={},m=o.BlockCipherMode=a.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=f.CBC=function(){var t=m.extend();function e(t,e,n){var i,o=this._iv;o?(i=o,this._iv=r):i=this._prevBlock;for(var a=0;a<n;a++)t[e+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=o}}),t}(),y=(i.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);var c=s.create(o,r);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:y}),reset:function(){var t;h.reset.call(this);var e=this.cfg,n=e.iv,r=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=r.createEncryptor:(t=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(r,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),b=o.CipherParams=a.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(i.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?s.create([1398893684,1701076831]).concat(n).concat(e):e).toString(u)},parse:function(t){var e,n=u.parse(t),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=s.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),b.create({ciphertext:n,salt:e})}},Z=o.SerializableCipher=a.extend({cfg:a.extend({format:v}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),o=i.finalize(e),a=i.cfg;return b.create({ciphertext:o,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),g=(i.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=s.random(8));var i=d.create({keySize:e+n}).compute(t,r),o=s.create(i.words.slice(e),4*n);return i.sigBytes=4*e,b.create({key:i,iv:o,salt:r})}},X=o.PasswordBasedCipher=Z.extend({cfg:Z.cfg.extend({kdf:g}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var o=Z.encrypt.call(this,t,e,i.key,r);return o.mixIn(i),o},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,Z.decrypt.call(this,t,e,i.key,r)}})))})),S((function(t,e){var n;t.exports=(n=Ti,function(){var t=n,e=t.lib.BlockCipher,r=t.algo,i=[],o=[],a=[],s=[],c=[],l=[],u=[],d=[],h=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var m=r^r<<1^r<<2^r<<3^r<<4;m=m>>>8^255&m^99,i[n]=m,o[m]=n;var p=t[n],y=t[p],b=t[y],v=257*t[m]^16843008*m;a[n]=v<<24|v>>>8,s[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,l[n]=v,v=16843009*b^65537*y^257*p^16843008*n,u[m]=v<<24|v>>>8,d[m]=v<<16|v>>>16,h[m]=v<<8|v>>>24,f[m]=v,n?(n=p^t[t[t[b^p]]],r^=t[t[r]]):n=r=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],p=r.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=e[a]:(l=o[a-1],a%n?n>6&&a%n==4&&(l=i[l>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l]):(l=i[(l=l<<8|l>>>24)>>>24]<<24|i[l>>>16&255]<<16|i[l>>>8&255]<<8|i[255&l],l^=m[a/n|0]<<24),o[a]=o[a-n]^l);for(var s=this._invKeySchedule=[],c=0;c<r;c++){if(a=r-c,c%4)var l=o[a];else l=o[a-4];s[c]=c<4||a<=4?l:u[i[l>>>24]]^d[i[l>>>16&255]]^h[i[l>>>8&255]]^f[i[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,c,l,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,u,d,h,f,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,a,s){for(var c=this._nRounds,l=t[e]^n[0],u=t[e+1]^n[1],d=t[e+2]^n[2],h=t[e+3]^n[3],f=4,m=1;m<c;m++){var p=r[l>>>24]^i[u>>>16&255]^o[d>>>8&255]^a[255&h]^n[f++],y=r[u>>>24]^i[d>>>16&255]^o[h>>>8&255]^a[255&l]^n[f++],b=r[d>>>24]^i[h>>>16&255]^o[l>>>8&255]^a[255&u]^n[f++],v=r[h>>>24]^i[l>>>16&255]^o[u>>>8&255]^a[255&d]^n[f++];l=p,u=y,d=b,h=v}p=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^n[f++],y=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^n[f++],b=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[f++],v=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[f++],t[e]=p,t[e+1]=y,t[e+2]=b,t[e+3]=v},keySize:8});t.AES=e._createHelper(p)}(),n.AES)}))),ji=S((function(t,e){t.exports=Ti.HmacSHA256})),Fi=S((function(t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.assign=function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var r=n.shift();if(r){if("object"!==e(r))throw new TypeError(r+"must be non-object");for(var o in r)i(r,o)&&(t[o]=r[o])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)}));function Ji(t){for(var e=t.length;--e>=0;)t[e]=0}var _i=256,Ei=286,Qi=30,Di=15,Ui=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Oi=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Bi=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ai=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],qi=new Array(576);Ji(qi);var $i=new Array(60);Ji($i);var to=new Array(512);Ji(to);var eo=new Array(256);Ji(eo);var no=new Array(29);Ji(no);var ro,io,oo,ao=new Array(Qi);function so(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function co(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function lo(t){return t<256?to[t]:to[256+(t>>>7)]}function uo(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function ho(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,uo(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function fo(t,e,n){ho(t,n[2*e],n[2*e+1])}function mo(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function po(t,e,n){var r,i,o=new Array(16),a=0;for(r=1;r<=Di;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=mo(o[s]++,s))}}function yo(t){var e;for(e=0;e<Ei;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Qi;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function bo(t){t.bi_valid>8?uo(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function vo(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function Zo(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&vo(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!vo(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function go(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===r?fo(t,i,e):(fo(t,(o=eo[i])+_i+1,e),0!==(a=Ui[o])&&ho(t,i-=no[o],a),fo(t,o=lo(--r),n),0!==(a=Oi[o])&&ho(t,r-=ao[o],a))}while(s<t.last_lit);fo(t,256,e)}function Xo(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)Zo(t,o,n);i=c;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Zo(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,Zo(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,c=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,d=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,m=e.stat_desc.max_length,p=0;for(o=0;o<=Di;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(o=c[2*c[2*(r=t.heap[n])+1]+1]+1)>m&&(o=m,p++),c[2*r+1]=o,r>l||(t.bl_count[o]++,a=0,r>=f&&(a=h[r-f]),s=c[2*r],t.opt_len+=s*(o+a),d&&(t.static_len+=s*(u[2*r+1]+a)));if(0!==p){do{for(o=m-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[m]--,p-=2}while(p>0);for(o=m;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>l||(c[2*i+1]!==o&&(t.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(t,e),po(o,l,t.bl_count)}function wo(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<c&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))}function Go(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<c&&i===a)){if(s<l)do{fo(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(fo(t,i,t.bl_tree),s--),fo(t,16,t.bl_tree),ho(t,s-3,2)):s<=10?(fo(t,17,t.bl_tree),ho(t,s-3,3)):(fo(t,18,t.bl_tree),ho(t,s-11,7));s=0,o=i,0===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}}Ji(ao);var xo=!1;function Lo(t,e,n,r){ho(t,0+(r?1:0),3),function(t,e,n,r){bo(t),r&&(uo(t,n),uo(t,~n)),Fi.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var ko={_tr_init:function(t){xo||(!function(){var t,e,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(no[r]=n,t=0;t<1<<Ui[r];t++)eo[n++]=r;for(eo[n-1]=r,i=0,r=0;r<16;r++)for(ao[r]=i,t=0;t<1<<Oi[r];t++)to[i++]=r;for(i>>=7;r<Qi;r++)for(ao[r]=i<<7,t=0;t<1<<Oi[r]-7;t++)to[256+i++]=r;for(e=0;e<=Di;e++)o[e]=0;for(t=0;t<=143;)qi[2*t+1]=8,t++,o[8]++;for(;t<=255;)qi[2*t+1]=9,t++,o[9]++;for(;t<=279;)qi[2*t+1]=7,t++,o[7]++;for(;t<=287;)qi[2*t+1]=8,t++,o[8]++;for(po(qi,287,o),t=0;t<Qi;t++)$i[2*t+1]=5,$i[2*t]=mo(t,5);ro=new so(qi,Ui,257,Ei,Di),io=new so($i,Oi,0,Qi,Di),oo=new so(new Array(0),Bi,0,19,7)}(),xo=!0),t.l_desc=new co(t.dyn_ltree,ro),t.d_desc=new co(t.dyn_dtree,io),t.bl_desc=new co(t.bl_tree,oo),t.bi_buf=0,t.bi_valid=0,yo(t)},_tr_stored_block:Lo,_tr_flush_block:function(t,e,n,r){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<_i;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),Xo(t,t.l_desc),Xo(t,t.d_desc),a=function(t){var e;for(wo(t,t.dyn_ltree,t.l_desc.max_code),wo(t,t.dyn_dtree,t.d_desc.max_code),Xo(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*Ai[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?Lo(t,e,n,r):4===t.strategy||o===i?(ho(t,2+(r?1:0),3),go(t,qi,$i)):(ho(t,4+(r?1:0),3),function(t,e,n,r){var i;for(ho(t,e-257,5),ho(t,n-1,5),ho(t,r-4,4),i=0;i<r;i++)ho(t,t.bl_tree[2*Ai[i]+1],3);Go(t,t.dyn_ltree,e-1),Go(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),go(t,t.dyn_ltree,t.dyn_dtree)),yo(t),r&&bo(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(eo[n]+_i+1)]++,t.dyn_dtree[2*lo(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){ho(t,2,3),fo(t,256,qi),function(t){16===t.bi_valid?(uo(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}};var Wo=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0};var So=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var Yo,Co=function(t,e,n,r){var i=So,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t},Ko={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Io=-2,Po=258,To=262,Ho=103,No=113,Mo=666;function Vo(t,e){return t.msg=Ko[e],e}function Ro(t){return(t<<1)-(t>4?9:0)}function zo(t){for(var e=t.length;--e>=0;)t[e]=0}function jo(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(Fi.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function Fo(t,e){ko._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,jo(t.strm)}function Jo(t,e){t.pending_buf[t.pending++]=e}function _o(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Eo(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-To?t.strstart-(t.w_size-To):0,l=t.window,u=t.w_mask,d=t.prev,h=t.strstart+Po,f=l[o+a-1],m=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(n=e)+a]===m&&l[n+a-1]===f&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<h);if(r=Po-(h-o),o=h-Po,r>a){if(t.match_start=e,a=r,r>=s)break;f=l[o+a-1],m=l[o+a]}}}while((e=d[e&u])>c&&0!=--i);return a<=t.lookahead?a:t.lookahead}function Qo(t){var e,n,r,i,o,a,s,c,l,u,d=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-To)){Fi.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=d?r-d:0}while(--n);e=n=d;do{r=t.prev[--e],t.prev[e]=r>=d?r-d:0}while(--n);i+=d}if(0===t.strm.avail_in)break;if(a=t.strm,s=t.window,c=t.strstart+t.lookahead,l=i,u=void 0,(u=a.avail_in)>l&&(u=l),n=0===u?0:(a.avail_in-=u,Fi.arraySet(s,a.input,a.next_in,u,c),1===a.state.wrap?a.adler=Wo(a.adler,s,u,c):2===a.state.wrap&&(a.adler=Co(a.adler,s,u,c)),a.next_in+=u,a.total_in+=u,u),t.lookahead+=n,t.lookahead+t.insert>=3)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+3-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<To&&0!==t.strm.avail_in)}function Do(t,e){for(var n,r;;){if(t.lookahead<To){if(Qo(t),t.lookahead<To&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-To&&(t.match_length=Eo(t,n)),t.match_length>=3)if(r=ko._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=ko._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Fo(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(Fo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Fo(t,!1),0===t.strm.avail_out)?1:2}function Uo(t,e){for(var n,r,i;;){if(t.lookahead<To){if(Qo(t),t.lookahead<To&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-To&&(t.match_length=Eo(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=ko._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Fo(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=ko._tr_tally(t,0,t.window[t.strstart-1]))&&Fo(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=ko._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(Fo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Fo(t,!1),0===t.strm.avail_out)?1:2}function Oo(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function Bo(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Fi.Buf16(1146),this.dyn_dtree=new Fi.Buf16(122),this.bl_tree=new Fi.Buf16(78),zo(this.dyn_ltree),zo(this.dyn_dtree),zo(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Fi.Buf16(16),this.heap=new Fi.Buf16(573),zo(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Fi.Buf16(573),zo(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ao(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:No,t.adler=2===e.wrap?0:1,e.last_flush=0,ko._tr_init(e),0):Vo(t,Io)}function qo(t){var e,n=Ao(t);return 0===n&&((e=t.state).window_size=2*e.w_size,zo(e.head),e.max_lazy_match=Yo[e.level].max_lazy,e.good_match=Yo[e.level].good_length,e.nice_match=Yo[e.level].nice_length,e.max_chain_length=Yo[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function $o(t,e,n,r,i,o){if(!t)return Io;var a=1;if(-1===e&&(e=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||8!==n||r<8||r>15||e<0||e>9||o<0||o>4)return Vo(t,Io);8===r&&(r=9);var s=new Bo;return t.state=s,s.strm=t,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Fi.Buf8(2*s.w_size),s.head=new Fi.Buf16(s.hash_size),s.prev=new Fi.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Fi.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=n,qo(t)}Yo=[new Oo(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Qo(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Fo(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-To&&(Fo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Fo(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Fo(t,!1),t.strm.avail_out),1)})),new Oo(4,4,8,4,Do),new Oo(4,5,16,8,Do),new Oo(4,6,32,32,Do),new Oo(4,4,16,16,Uo),new Oo(8,16,32,32,Uo),new Oo(8,16,128,128,Uo),new Oo(8,32,128,256,Uo),new Oo(32,128,258,1024,Uo),new Oo(32,258,258,4096,Uo)];var ta={deflateInit:function(t,e){return $o(t,e,8,15,8,0)},deflateInit2:$o,deflateReset:qo,deflateResetKeep:Ao,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?Io:(t.state.gzhead=e,0):Io},deflate:function(t,e){var n,r,i,o;if(!t||!t.state||e>5||e<0)return t?Vo(t,Io):Io;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===Mo&&4!==e)return Vo(t,0===t.avail_out?-5:Io);if(r.strm=t,n=r.last_flush,r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,Jo(r,31),Jo(r,139),Jo(r,8),r.gzhead?(Jo(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Jo(r,255&r.gzhead.time),Jo(r,r.gzhead.time>>8&255),Jo(r,r.gzhead.time>>16&255),Jo(r,r.gzhead.time>>24&255),Jo(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Jo(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Jo(r,255&r.gzhead.extra.length),Jo(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=Co(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Jo(r,0),Jo(r,0),Jo(r,0),Jo(r,0),Jo(r,0),Jo(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),Jo(r,3),r.status=No);else{var a=8+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=No,_o(r,a),0!==r.strstart&&(_o(r,t.adler>>>16),_o(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=Co(t.adler,r.pending_buf,r.pending-i,i)),jo(t),i=r.pending,r.pending!==r.pending_buf_size));)Jo(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=Co(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Co(t.adler,r.pending_buf,r.pending-i,i)),jo(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Jo(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=Co(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=Co(t.adler,r.pending_buf,r.pending-i,i)),jo(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Jo(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=Co(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=Ho)}else r.status=Ho;if(r.status===Ho&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&jo(t),r.pending+2<=r.pending_buf_size&&(Jo(r,255&t.adler),Jo(r,t.adler>>8&255),t.adler=0,r.status=No)):r.status=No),0!==r.pending){if(jo(t),0===t.avail_out)return r.last_flush=-1,0}else if(0===t.avail_in&&Ro(e)<=Ro(n)&&4!==e)return Vo(t,-5);if(r.status===Mo&&0!==t.avail_in)return Vo(t,-5);if(0!==t.avail_in||0!==r.lookahead||0!==e&&r.status!==Mo){var s=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(Qo(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=ko._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Fo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Fo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Fo(t,!1),0===t.strm.avail_out)?1:2}(r,e):3===r.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=Po){if(Qo(t),t.lookahead<=Po&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+Po;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=Po-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=ko._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=ko._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Fo(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(Fo(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Fo(t,!1),0===t.strm.avail_out)?1:2}(r,e):Yo[r.level].func(r,e);if(3!==s&&4!==s||(r.status=Mo),1===s||3===s)return 0===t.avail_out&&(r.last_flush=-1),0;if(2===s&&(1===e?ko._tr_align(r):5!==e&&(ko._tr_stored_block(r,0,0,!1),3===e&&(zo(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),jo(t),0===t.avail_out))return r.last_flush=-1,0}return 4!==e?0:r.wrap<=0?1:(2===r.wrap?(Jo(r,255&t.adler),Jo(r,t.adler>>8&255),Jo(r,t.adler>>16&255),Jo(r,t.adler>>24&255),Jo(r,255&t.total_in),Jo(r,t.total_in>>8&255),Jo(r,t.total_in>>16&255),Jo(r,t.total_in>>24&255)):(_o(r,t.adler>>>16),_o(r,65535&t.adler)),jo(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},deflateEnd:function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&e!==Ho&&e!==No&&e!==Mo?Vo(t,Io):(t.state=null,e===No?Vo(t,-3):0):Io},deflateSetDictionary:function(t,e){var n,r,i,o,a,s,c,l,u=e.length;if(!t||!t.state)return Io;if(2===(o=(n=t.state).wrap)||1===o&&42!==n.status||n.lookahead)return Io;for(1===o&&(t.adler=Wo(t.adler,e,u,0)),n.wrap=0,u>=n.w_size&&(0===o&&(zo(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new Fi.Buf8(n.w_size),Fi.arraySet(l,e,u-n.w_size,n.w_size,0),e=l,u=n.w_size),a=t.avail_in,s=t.next_in,c=t.input,t.avail_in=u,t.next_in=0,t.input=e,Qo(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,Qo(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=s,t.input=c,t.avail_in=a,n.wrap=o,0},deflateInfo:"pako deflate (from Nodeca project)"},ea=!0,na=!0;try{String.fromCharCode.apply(null,[0])}catch(t){ea=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){na=!1}for(var ra=new Fi.Buf8(256),ia=0;ia<256;ia++)ra[ia]=ia>=252?6:ia>=248?5:ia>=240?4:ia>=224?3:ia>=192?2:1;ra[254]=ra[254]=1;function oa(t,e){if(e<65534&&(t.subarray&&na||!t.subarray&&ea))return String.fromCharCode.apply(null,Fi.shrinkBuf(t,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}var aa=function(t){var e,n,r,i,o,a=t.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Fi.Buf8(s),o=0,i=0;o<s;i++)55296==(64512&(n=t.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=t.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},sa=function(t){return oa(t,t.length)},ca=function(t){for(var e=new Fi.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},la=function(t,e){var n,r,i,o,a=e||t.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=t[n++])<128)s[r++]=i;else if((o=ra[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&t[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return oa(s,r)},ua=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+ra[t[n]]>e?n:e};var da=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},ha=Object.prototype.toString;function fa(t){if(!(this instanceof fa))return new fa(t);this.options=Fi.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new da,this.strm.avail_out=0;var n=ta.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(Ko[n]);if(e.header&&ta.deflateSetHeader(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?aa(e.dictionary):"[object ArrayBuffer]"===ha.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=ta.deflateSetDictionary(this.strm,r)))throw new Error(Ko[n]);this._dict_set=!0}}function ma(t,e){var n=new fa(e);if(n.push(t,!0),n.err)throw n.msg||Ko[n.err];return n.result}fa.prototype.push=function(t,e){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=aa(t):"[object ArrayBuffer]"===ha.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Fi.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=ta.deflate(i,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(sa(Fi.shrinkBuf(i.output,i.next_out))):this.onData(Fi.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=ta.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),i.avail_out=0,!0)},fa.prototype.onData=function(t){this.chunks.push(t)},fa.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Fi.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var pa={Deflate:fa,deflate:ma,deflateRaw:function(t,e){return(e=e||{}).raw=!0,ma(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,ma(t,e)}},ya=function(t,e){var n,r,i,o,a,s,c,l,u,d,h,f,m,p,y,b,v,Z,g,X,w,G,x,L,k;n=t.state,r=t.next_in,L=t.input,i=r+(t.avail_in-5),o=t.next_out,k=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,m=n.bits,p=n.lencode,y=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{m<15&&(f+=L[r++]<<m,m+=8,f+=L[r++]<<m,m+=8),Z=p[f&b];e:for(;;){if(f>>>=g=Z>>>24,m-=g,0===(g=Z>>>16&255))k[o++]=65535&Z;else{if(!(16&g)){if(0==(64&g)){Z=p[(65535&Z)+(f&(1<<g)-1)];continue e}if(32&g){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}X=65535&Z,(g&=15)&&(m<g&&(f+=L[r++]<<m,m+=8),X+=f&(1<<g)-1,f>>>=g,m-=g),m<15&&(f+=L[r++]<<m,m+=8,f+=L[r++]<<m,m+=8),Z=y[f&v];n:for(;;){if(f>>>=g=Z>>>24,m-=g,!(16&(g=Z>>>16&255))){if(0==(64&g)){Z=y[(65535&Z)+(f&(1<<g)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(w=65535&Z,m<(g&=15)&&(f+=L[r++]<<m,(m+=8)<g&&(f+=L[r++]<<m,m+=8)),(w+=f&(1<<g)-1)>c){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=g,m-=g,w>(g=o-a)){if((g=w-g)>u&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(G=0,x=h,0===d){if(G+=l-g,g<X){X-=g;do{k[o++]=h[G++]}while(--g);G=o-w,x=k}}else if(d<g){if(G+=l+d-g,(g-=d)<X){X-=g;do{k[o++]=h[G++]}while(--g);if(G=0,d<X){X-=g=d;do{k[o++]=h[G++]}while(--g);G=o-w,x=k}}}else if(G+=d-g,g<X){X-=g;do{k[o++]=h[G++]}while(--g);G=o-w,x=k}for(;X>2;)k[o++]=x[G++],k[o++]=x[G++],k[o++]=x[G++],X-=3;X&&(k[o++]=x[G++],X>1&&(k[o++]=x[G++]))}else{G=o-w;do{k[o++]=k[G++],k[o++]=k[G++],k[o++]=k[G++],X-=3}while(X>2);X&&(k[o++]=k[G++],X>1&&(k[o++]=k[G++]))}break}}break}}while(r<i&&o<s);r-=X=m>>3,f&=(1<<(m-=X<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=m},ba=15,va=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Za=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ga=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Xa=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],wa=function(t,e,n,r,i,o,a,s){var c,l,u,d,h,f,m,p,y,b=s.bits,v=0,Z=0,g=0,X=0,w=0,G=0,x=0,L=0,k=0,W=0,S=null,Y=0,C=new Fi.Buf16(16),K=new Fi.Buf16(16),I=null,P=0;for(v=0;v<=ba;v++)C[v]=0;for(Z=0;Z<r;Z++)C[e[n+Z]]++;for(w=b,X=ba;X>=1&&0===C[X];X--);if(w>X&&(w=X),0===X)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(g=1;g<X&&0===C[g];g++);for(w<g&&(w=g),L=1,v=1;v<=ba;v++)if(L<<=1,(L-=C[v])<0)return-1;if(L>0&&(0===t||1!==X))return-1;for(K[1]=0,v=1;v<ba;v++)K[v+1]=K[v]+C[v];for(Z=0;Z<r;Z++)0!==e[n+Z]&&(a[K[e[n+Z]]++]=Z);if(0===t?(S=I=a,f=19):1===t?(S=va,Y-=257,I=Za,P-=257,f=256):(S=ga,I=Xa,f=-1),W=0,Z=0,v=g,h=o,G=w,x=0,u=-1,d=(k=1<<w)-1,1===t&&k>852||2===t&&k>592)return 1;for(;;){m=v-x,a[Z]<f?(p=0,y=a[Z]):a[Z]>f?(p=I[P+a[Z]],y=S[Y+a[Z]]):(p=96,y=0),c=1<<v-x,g=l=1<<G;do{i[h+(W>>x)+(l-=c)]=m<<24|p<<16|y|0}while(0!==l);for(c=1<<v-1;W&c;)c>>=1;if(0!==c?(W&=c-1,W+=c):W=0,Z++,0==--C[v]){if(v===X)break;v=e[n+a[Z]]}if(v>w&&(W&d)!==u){for(0===x&&(x=w),h+=g,L=1<<(G=v-x);G+x<X&&!((L-=C[G+x])<=0);)G++,L<<=1;if(k+=1<<G,1===t&&k>852||2===t&&k>592)return 1;i[u=W&d]=w<<24|G<<16|h-o|0}}return 0!==W&&(i[h+W]=v-x<<24|64<<16|0),s.bits=w,0},Ga=-2,xa=12,La=30;function ka(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function Wa(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Fi.Buf16(320),this.work=new Fi.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Sa(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Fi.Buf32(852),e.distcode=e.distdyn=new Fi.Buf32(592),e.sane=1,e.back=-1,0):Ga}function Ya(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,Sa(t)):Ga}function Ca(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Ga:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Ya(t))):Ga}function Ka(t,e){var n,r;return t?(r=new Wa,t.state=r,r.window=null,0!==(n=Ca(t,e))&&(t.state=null),n):Ga}var Ia,Pa,Ta=!0;function Ha(t){if(Ta){var e;for(Ia=new Fi.Buf32(512),Pa=new Fi.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(wa(1,t.lens,0,288,Ia,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;wa(2,t.lens,0,32,Pa,0,t.work,{bits:5}),Ta=!1}t.lencode=Ia,t.lenbits=9,t.distcode=Pa,t.distbits=5}function Na(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Fi.Buf8(o.wsize)),r>=o.wsize?(Fi.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),Fi.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(Fi.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var Ma={inflateReset:Ya,inflateReset2:Ca,inflateResetKeep:Sa,inflateInit:function(t){return Ka(t,15)},inflateInit2:Ka,inflate:function(t,e){var n,r,i,o,a,s,c,l,u,d,h,f,m,p,y,b,v,Z,g,X,w,G,x,L,k=0,W=new Fi.Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Ga;(n=t.state).mode===xa&&(n.mode=13),a=t.next_out,i=t.output,c=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,u=n.bits,d=s,h=c,G=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;u<16;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(2&n.wrap&&35615===l){n.check=0,W[0]=255&l,W[1]=l>>>8&255,n.check=Co(n.check,W,2,0),l=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=La;break}if(8!=(15&l)){t.msg="unknown compression method",n.mode=La;break}if(u-=4,w=8+(15&(l>>>=4)),0===n.wbits)n.wbits=w;else if(w>n.wbits){t.msg="invalid window size",n.mode=La;break}n.dmax=1<<w,t.adler=n.check=1,n.mode=512&l?10:xa,l=0,u=0;break;case 2:for(;u<16;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(n.flags=l,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=La;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=La;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(W[0]=255&l,W[1]=l>>>8&255,n.check=Co(n.check,W,2,0)),l=0,u=0,n.mode=3;case 3:for(;u<32;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.time=l),512&n.flags&&(W[0]=255&l,W[1]=l>>>8&255,W[2]=l>>>16&255,W[3]=l>>>24&255,n.check=Co(n.check,W,4,0)),l=0,u=0,n.mode=4;case 4:for(;u<16;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(W[0]=255&l,W[1]=l>>>8&255,n.check=Co(n.check,W,2,0)),l=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(W[0]=255&l,W[1]=l>>>8&255,n.check=Co(n.check,W,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>s&&(f=s),f&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Fi.arraySet(n.head.extra,r,o,f,w)),512&n.flags&&(n.check=Co(n.check,r,f,o)),s-=f,o+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;f=0;do{w=r[o+f++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w))}while(w&&f<s);if(512&n.flags&&(n.check=Co(n.check,r,f,o)),s-=f,o+=f,w)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;f=0;do{w=r[o+f++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w))}while(w&&f<s);if(512&n.flags&&(n.check=Co(n.check,r,f,o)),s-=f,o+=f,w)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=La;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=xa;break;case 10:for(;u<32;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}t.adler=n.check=ka(l),l=0,u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=u,2;t.adler=n.check=1,n.mode=xa;case xa:if(5===e||6===e)break t;case 13:if(n.last){l>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}switch(n.last=1&l,u-=1,3&(l>>>=1)){case 0:n.mode=14;break;case 1:if(Ha(n),n.mode=20,6===e){l>>>=2,u-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=La}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=La;break}if(n.length=65535&l,l=0,u=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(f=n.length){if(f>s&&(f=s),f>c&&(f=c),0===f)break t;Fi.arraySet(i,r,o,f,a),s-=f,o+=f,c-=f,a+=f,n.length-=f;break}n.mode=xa;break;case 17:for(;u<14;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=La;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}n.lens[S[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},G=wa(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,G){t.msg="invalid code lengths set",n.mode=La;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;b=(k=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&k,!((y=k>>>24)<=u);){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(v<16)l>>>=y,u-=y,n.lens[n.have++]=v;else{if(16===v){for(L=y+2;u<L;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(l>>>=y,u-=y,0===n.have){t.msg="invalid bit length repeat",n.mode=La;break}w=n.lens[n.have-1],f=3+(3&l),l>>>=2,u-=2}else if(17===v){for(L=y+3;u<L;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}u-=y,w=0,f=3+(7&(l>>>=y)),l>>>=3,u-=3}else{for(L=y+7;u<L;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}u-=y,w=0,f=11+(127&(l>>>=y)),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=La;break}for(;f--;)n.lens[n.have++]=w}}if(n.mode===La)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=La;break}if(n.lenbits=9,x={bits:n.lenbits},G=wa(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,G){t.msg="invalid literal/lengths set",n.mode=La;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},G=wa(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,G){t.msg="invalid distances set",n.mode=La;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(s>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=u,ya(t,h),a=t.next_out,i=t.output,c=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,l=n.hold,u=n.bits,n.mode===xa&&(n.back=-1);break}for(n.back=0;b=(k=n.lencode[l&(1<<n.lenbits)-1])>>>16&255,v=65535&k,!((y=k>>>24)<=u);){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(b&&0==(240&b)){for(Z=y,g=b,X=v;b=(k=n.lencode[X+((l&(1<<Z+g)-1)>>Z)])>>>16&255,v=65535&k,!(Z+(y=k>>>24)<=u);){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}l>>>=Z,u-=Z,n.back+=Z}if(l>>>=y,u-=y,n.back+=y,n.length=v,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=xa;break}if(64&b){t.msg="invalid literal/length code",n.mode=La;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(L=n.extra;u<L;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;b=(k=n.distcode[l&(1<<n.distbits)-1])>>>16&255,v=65535&k,!((y=k>>>24)<=u);){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(0==(240&b)){for(Z=y,g=b,X=v;b=(k=n.distcode[X+((l&(1<<Z+g)-1)>>Z)])>>>16&255,v=65535&k,!(Z+(y=k>>>24)<=u);){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}l>>>=Z,u-=Z,n.back+=Z}if(l>>>=y,u-=y,n.back+=y,64&b){t.msg="invalid distance code",n.mode=La;break}n.offset=v,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(L=n.extra;u<L;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=La;break}n.mode=25;case 25:if(0===c)break t;if(f=h-c,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=La;break}f>n.wnext?(f-=n.wnext,m=n.wsize-f):m=n.wnext-f,f>n.length&&(f=n.length),p=n.window}else p=i,m=a-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do{i[a++]=p[m++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===c)break t;i[a++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(0===s)break t;s--,l|=r[o++]<<u,u+=8}if(h-=c,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=n.flags?Co(n.check,i,h,a-h):Wo(n.check,i,h,a-h)),h=c,(n.flags?l:ka(l))!==n.check){t.msg="incorrect data check",n.mode=La;break}l=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break t;s--,l+=r[o++]<<u,u+=8}if(l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=La;break}l=0,u=0}n.mode=29;case 29:G=1;break t;case La:G=-3;break t;case 31:return-4;case 32:default:return Ga}return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=s,n.hold=l,n.bits=u,(n.wsize||h!==t.avail_out&&n.mode<La&&(n.mode<27||4!==e))&&Na(t,t.output,t.next_out,h-t.avail_out),d-=t.avail_in,h-=t.avail_out,t.total_in+=d,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=n.flags?Co(n.check,i,h,t.next_out-h):Wo(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(n.mode===xa?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===h||4===e)&&0===G&&(G=-5),G},inflateEnd:function(t){if(!t||!t.state)return Ga;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?Ga:(n.head=e,e.done=!1,0):Ga},inflateSetDictionary:function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?Ga:11===n.mode&&Wo(1,e,r,0)!==n.check?-3:Na(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):Ga},inflateInfo:"pako inflate (from Nodeca project)"},Va={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Ra=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},za=Object.prototype.toString;function ja(t){if(!(this instanceof ja))return new ja(t);this.options=Fi.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new da,this.strm.avail_out=0;var n=Ma.inflateInit2(this.strm,e.windowBits);if(n!==Va.Z_OK)throw new Error(Ko[n]);if(this.header=new Ra,Ma.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=aa(e.dictionary):"[object ArrayBuffer]"===za.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Ma.inflateSetDictionary(this.strm,e.dictionary))!==Va.Z_OK))throw new Error(Ko[n])}function Fa(t,e){var n=new ja(e);if(n.push(t,!0),n.err)throw n.msg||Ko[n.err];return n.result}ja.prototype.push=function(t,e){var n,r,i,o,a,s=this.strm,c=this.options.chunkSize,l=this.options.dictionary,u=!1;if(this.ended)return!1;r=e===~~e?e:!0===e?Va.Z_FINISH:Va.Z_NO_FLUSH,"string"==typeof t?s.input=ca(t):"[object ArrayBuffer]"===za.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new Fi.Buf8(c),s.next_out=0,s.avail_out=c),(n=Ma.inflate(s,Va.Z_NO_FLUSH))===Va.Z_NEED_DICT&&l&&(n=Ma.inflateSetDictionary(this.strm,l)),n===Va.Z_BUF_ERROR&&!0===u&&(n=Va.Z_OK,u=!1),n!==Va.Z_STREAM_END&&n!==Va.Z_OK)return this.onEnd(n),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&n!==Va.Z_STREAM_END&&(0!==s.avail_in||r!==Va.Z_FINISH&&r!==Va.Z_SYNC_FLUSH)||("string"===this.options.to?(i=ua(s.output,s.next_out),o=s.next_out-i,a=la(s.output,i),s.next_out=o,s.avail_out=c-o,o&&Fi.arraySet(s.output,s.output,i,o,0),this.onData(a)):this.onData(Fi.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(u=!0)}while((s.avail_in>0||0===s.avail_out)&&n!==Va.Z_STREAM_END);return n===Va.Z_STREAM_END&&(r=Va.Z_FINISH),r===Va.Z_FINISH?(n=Ma.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Va.Z_OK):r!==Va.Z_SYNC_FLUSH||(this.onEnd(Va.Z_OK),s.avail_out=0,!0)},ja.prototype.onData=function(t){this.chunks.push(t)},ja.prototype.onEnd=function(t){t===Va.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Fi.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Ja={Inflate:ja,inflate:Fa,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Fa(t,e)},ungzip:Fa},_a={};(0,Fi.assign)(_a,pa,Ja,Va);var Ea=_a;function Qa(t,e,n){var r=void 0===e?null:e,i=function(t,e){var n=atob(t);if(e){for(var r=new Uint8Array(n.length),i=0,o=n.length;i<o;++i)r[i]=n.charCodeAt(i);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(t,void 0!==n&&n),o=i.indexOf("\n",10)+1,a=i.substring(o)+(r?"\/\/# sourceMappingURL="+r:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}var Da,Ua,Oa,Ba,Aa=(Da="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwovKioKICogQGxpY2Vuc2UgVU5MSUNFTlNFRAogKiBDb3B5cmlnaHQgQ3JvcXVldCBDb3Jwb3JhdGlvbiAyMDIwCiAqIEJ1bmRsZSBvZiBAY3JvcXVldC9jcm9xdWV0CiAqIERhdGU6IDIwMjAtMTEtMjAKICogVmVyc2lvbjogMC40LjEtMQogKi8KCiFmdW5jdGlvbigpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUpe3JldHVybih0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJiJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlPyJzeW1ib2wiOnR5cGVvZiB0fSkoZSl9ZnVuY3Rpb24gZSh0LGUscixuLGksYSxvKXt0cnl7dmFyIHM9dFthXShvKSxoPXMudmFsdWV9Y2F0Y2godCl7cmV0dXJuIHZvaWQgcih0KX1zLmRvbmU/ZShoKTpQcm9taXNlLnJlc29sdmUoaCkudGhlbihuLGkpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHI9dGhpcyxuPWFyZ3VtZW50cztyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGksYSl7dmFyIG89dC5hcHBseShyLG4pO2Z1bmN0aW9uIHModCl7ZShvLGksYSxzLGgsIm5leHQiLHQpfWZ1bmN0aW9uIGgodCl7ZShvLGksYSxzLGgsInRocm93Iix0KX1zKHZvaWQgMCl9KSl9fWZ1bmN0aW9uIG4odCxlKXsobnVsbD09ZXx8ZT50Lmxlbmd0aCkmJihlPXQubGVuZ3RoKTtmb3IodmFyIHI9MCxuPW5ldyBBcnJheShlKTtyPGU7cisrKW5bcl09dFtyXTtyZXR1cm4gbn1mdW5jdGlvbiBpKHQsZSl7dmFyIHI7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBTeW1ib2x8fG51bGw9PXRbU3ltYm9sLml0ZXJhdG9yXSl7aWYoQXJyYXkuaXNBcnJheSh0KXx8KHI9ZnVuY3Rpb24odCxlKXtpZih0KXtpZigic3RyaW5nIj09dHlwZW9mIHQpcmV0dXJuIG4odCxlKTt2YXIgcj1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkuc2xpY2UoOCwtMSk7cmV0dXJuIk9iamVjdCI9PT1yJiZ0LmNvbnN0cnVjdG9yJiYocj10LmNvbnN0cnVjdG9yLm5hbWUpLCJNYXAiPT09cnx8IlNldCI9PT1yP0FycmF5LmZyb20odCk6IkFyZ3VtZW50cyI9PT1yfHwvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChyKT9uKHQsZSk6dm9pZCAwfX0odCkpfHxlJiZ0JiYibnVtYmVyIj09dHlwZW9mIHQubGVuZ3RoKXtyJiYodD1yKTt2YXIgaT0wLGE9ZnVuY3Rpb24oKXt9O3JldHVybntzOmEsbjpmdW5jdGlvbigpe3JldHVybiBpPj10Lmxlbmd0aD97ZG9uZTohMH06e2RvbmU6ITEsdmFsdWU6dFtpKytdfX0sZTpmdW5jdGlvbih0KXt0aHJvdyB0fSxmOmF9fXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKX12YXIgbyxzPSEwLGg9ITE7cmV0dXJue3M6ZnVuY3Rpb24oKXtyPXRbU3ltYm9sLml0ZXJhdG9yXSgpfSxuOmZ1bmN0aW9uKCl7dmFyIHQ9ci5uZXh0KCk7cmV0dXJuIHM9dC5kb25lLHR9LGU6ZnVuY3Rpb24odCl7aD0hMCxvPXR9LGY6ZnVuY3Rpb24oKXt0cnl7c3x8bnVsbD09ci5yZXR1cm58fHIucmV0dXJuKCl9ZmluYWxseXtpZihoKXRocm93IG99fX19dmFyIGE9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjp7fTtmdW5jdGlvbiBvKHQsZSxyKXtyZXR1cm4gdChyPXtwYXRoOmUsZXhwb3J0czp7fSxyZXF1aXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGgobnVsbD09ZSYmci5wYXRoKX19LHIuZXhwb3J0cyksci5leHBvcnRzfWZ1bmN0aW9uIHModCl7aWYodC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKHIpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLG4uZ2V0P246e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbcl19fSl9KSksZX1mdW5jdGlvbiBoKCl7dGhyb3cgbmV3IEVycm9yKCJEeW5hbWljIHJlcXVpcmVzIGFyZSBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSBAcm9sbHVwL3BsdWdpbi1jb21tb25qcyIpfW8oKGZ1bmN0aW9uKGUpe3ZhciByPWZ1bmN0aW9uKGUpe3ZhciByLG49T2JqZWN0LnByb3RvdHlwZSxpPW4uaGFzT3duUHJvcGVydHksYT0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sP1N5bWJvbDp7fSxvPWEuaXRlcmF0b3J8fCJAQGl0ZXJhdG9yIixzPWEuYXN5bmNJdGVyYXRvcnx8IkBAYXN5bmNJdGVyYXRvciIsaD1hLnRvU3RyaW5nVGFnfHwiQEB0b1N0cmluZ1RhZyI7ZnVuY3Rpb24gYyh0LGUscil7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOnIsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KSx0W2VdfXRyeXtjKHt9LCIiKX1jYXRjaCh0KXtjPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdFtlXT1yfX1mdW5jdGlvbiBsKHQsZSxyLG4pe3ZhciBpPWUmJmUucHJvdG90eXBlIGluc3RhbmNlb2Ygdj9lOnYsYT1PYmplY3QuY3JlYXRlKGkucHJvdG90eXBlKSxvPW5ldyBDKG58fFtdKTtyZXR1cm4gYS5faW52b2tlPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1mO3JldHVybiBmdW5jdGlvbihpLGEpe2lmKG49PT1fKXRocm93IG5ldyBFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZyIpO2lmKG49PT1wKXtpZigidGhyb3ciPT09aSl0aHJvdyBhO3JldHVybiBEKCl9Zm9yKHIubWV0aG9kPWksci5hcmc9YTs7KXt2YXIgbz1yLmRlbGVnYXRlO2lmKG8pe3ZhciBzPUEobyxyKTtpZihzKXtpZihzPT09Zyljb250aW51ZTtyZXR1cm4gc319aWYoIm5leHQiPT09ci5tZXRob2Qpci5zZW50PXIuX3NlbnQ9ci5hcmc7ZWxzZSBpZigidGhyb3ciPT09ci5tZXRob2Qpe2lmKG49PT1mKXRocm93IG49cCxyLmFyZztyLmRpc3BhdGNoRXhjZXB0aW9uKHIuYXJnKX1lbHNlInJldHVybiI9PT1yLm1ldGhvZCYmci5hYnJ1cHQoInJldHVybiIsci5hcmcpO249Xzt2YXIgaD11KHQsZSxyKTtpZigibm9ybWFsIj09PWgudHlwZSl7aWYobj1yLmRvbmU/cDpkLGguYXJnPT09Zyljb250aW51ZTtyZXR1cm57dmFsdWU6aC5hcmcsZG9uZTpyLmRvbmV9fSJ0aHJvdyI9PT1oLnR5cGUmJihuPXAsci5tZXRob2Q9InRocm93IixyLmFyZz1oLmFyZyl9fX0odCxyLG8pLGF9ZnVuY3Rpb24gdSh0LGUscil7dHJ5e3JldHVybnt0eXBlOiJub3JtYWwiLGFyZzp0LmNhbGwoZSxyKX19Y2F0Y2godCl7cmV0dXJue3R5cGU6InRocm93Iixhcmc6dH19fWUud3JhcD1sO3ZhciBmPSJzdXNwZW5kZWRTdGFydCIsZD0ic3VzcGVuZGVkWWllbGQiLF89ImV4ZWN1dGluZyIscD0iY29tcGxldGVkIixnPXt9O2Z1bmN0aW9uIHYoKXt9ZnVuY3Rpb24geSgpe31mdW5jdGlvbiBtKCl7fXZhciB3PXt9O3dbb109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307dmFyIGI9T2JqZWN0LmdldFByb3RvdHlwZU9mLGs9YiYmYihiKE8oW10pKSk7ayYmayE9PW4mJmkuY2FsbChrLG8pJiYodz1rKTt2YXIgeD1tLnByb3RvdHlwZT12LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHcpO2Z1bmN0aW9uIHoodCl7WyJuZXh0IiwidGhyb3ciLCJyZXR1cm4iXS5mb3JFYWNoKChmdW5jdGlvbihlKXtjKHQsZSwoZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ludm9rZShlLHQpfSkpfSkpfWZ1bmN0aW9uIEIoZSxyKXtmdW5jdGlvbiBuKGEsbyxzLGgpe3ZhciBjPXUoZVthXSxlLG8pO2lmKCJ0aHJvdyIhPT1jLnR5cGUpe3ZhciBsPWMuYXJnLGY9bC52YWx1ZTtyZXR1cm4gZiYmIm9iamVjdCI9PT10KGYpJiZpLmNhbGwoZiwiX19hd2FpdCIpP3IucmVzb2x2ZShmLl9fYXdhaXQpLnRoZW4oKGZ1bmN0aW9uKHQpe24oIm5leHQiLHQscyxoKX0pLChmdW5jdGlvbih0KXtuKCJ0aHJvdyIsdCxzLGgpfSkpOnIucmVzb2x2ZShmKS50aGVuKChmdW5jdGlvbih0KXtsLnZhbHVlPXQscyhsKX0pLChmdW5jdGlvbih0KXtyZXR1cm4gbigidGhyb3ciLHQscyxoKX0pKX1oKGMuYXJnKX12YXIgYTt0aGlzLl9pbnZva2U9ZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBpKCl7cmV0dXJuIG5ldyByKChmdW5jdGlvbihyLGkpe24odCxlLHIsaSl9KSl9cmV0dXJuIGE9YT9hLnRoZW4oaSxpKTppKCl9fWZ1bmN0aW9uIEEodCxlKXt2YXIgbj10Lml0ZXJhdG9yW2UubWV0aG9kXTtpZihuPT09cil7aWYoZS5kZWxlZ2F0ZT1udWxsLCJ0aHJvdyI9PT1lLm1ldGhvZCl7aWYodC5pdGVyYXRvci5yZXR1cm4mJihlLm1ldGhvZD0icmV0dXJuIixlLmFyZz1yLEEodCxlKSwidGhyb3ciPT09ZS5tZXRob2QpKXJldHVybiBnO2UubWV0aG9kPSJ0aHJvdyIsZS5hcmc9bmV3IFR5cGVFcnJvcigiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZCIpfXJldHVybiBnfXZhciBpPXUobix0Lml0ZXJhdG9yLGUuYXJnKTtpZigidGhyb3ciPT09aS50eXBlKXJldHVybiBlLm1ldGhvZD0idGhyb3ciLGUuYXJnPWkuYXJnLGUuZGVsZWdhdGU9bnVsbCxnO3ZhciBhPWkuYXJnO3JldHVybiBhP2EuZG9uZT8oZVt0LnJlc3VsdE5hbWVdPWEudmFsdWUsZS5uZXh0PXQubmV4dExvYywicmV0dXJuIiE9PWUubWV0aG9kJiYoZS5tZXRob2Q9Im5leHQiLGUuYXJnPXIpLGUuZGVsZWdhdGU9bnVsbCxnKTphOihlLm1ldGhvZD0idGhyb3ciLGUuYXJnPW5ldyBUeXBlRXJyb3IoIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0IiksZS5kZWxlZ2F0ZT1udWxsLGcpfWZ1bmN0aW9uIFModCl7dmFyIGU9e3RyeUxvYzp0WzBdfTsxIGluIHQmJihlLmNhdGNoTG9jPXRbMV0pLDIgaW4gdCYmKGUuZmluYWxseUxvYz10WzJdLGUuYWZ0ZXJMb2M9dFszXSksdGhpcy50cnlFbnRyaWVzLnB1c2goZSl9ZnVuY3Rpb24gRSh0KXt2YXIgZT10LmNvbXBsZXRpb258fHt9O2UudHlwZT0ibm9ybWFsIixkZWxldGUgZS5hcmcsdC5jb21wbGV0aW9uPWV9ZnVuY3Rpb24gQyh0KXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6InJvb3QifV0sdC5mb3JFYWNoKFMsdGhpcyksdGhpcy5yZXNldCghMCl9ZnVuY3Rpb24gTyh0KXtpZih0KXt2YXIgZT10W29dO2lmKGUpcmV0dXJuIGUuY2FsbCh0KTtpZigiZnVuY3Rpb24iPT10eXBlb2YgdC5uZXh0KXJldHVybiB0O2lmKCFpc05hTih0Lmxlbmd0aCkpe3ZhciBuPS0xLGE9ZnVuY3Rpb24gZSgpe2Zvcig7KytuPHQubGVuZ3RoOylpZihpLmNhbGwodCxuKSlyZXR1cm4gZS52YWx1ZT10W25dLGUuZG9uZT0hMSxlO3JldHVybiBlLnZhbHVlPXIsZS5kb25lPSEwLGV9O3JldHVybiBhLm5leHQ9YX19cmV0dXJue25leHQ6RH19ZnVuY3Rpb24gRCgpe3JldHVybnt2YWx1ZTpyLGRvbmU6ITB9fXJldHVybiB5LnByb3RvdHlwZT14LmNvbnN0cnVjdG9yPW0sbS5jb25zdHJ1Y3Rvcj15LHkuZGlzcGxheU5hbWU9YyhtLGgsIkdlbmVyYXRvckZ1bmN0aW9uIiksZS5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKHQpe3ZhciBlPSJmdW5jdGlvbiI9PXR5cGVvZiB0JiZ0LmNvbnN0cnVjdG9yO3JldHVybiEhZSYmKGU9PT15fHwiR2VuZXJhdG9yRnVuY3Rpb24iPT09KGUuZGlzcGxheU5hbWV8fGUubmFtZSkpfSxlLm1hcms9ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxtKToodC5fX3Byb3RvX189bSxjKHQsaCwiR2VuZXJhdG9yRnVuY3Rpb24iKSksdC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh4KSx0fSxlLmF3cmFwPWZ1bmN0aW9uKHQpe3JldHVybntfX2F3YWl0OnR9fSx6KEIucHJvdG90eXBlKSxCLnByb3RvdHlwZVtzXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxlLkFzeW5jSXRlcmF0b3I9QixlLmFzeW5jPWZ1bmN0aW9uKHQscixuLGksYSl7dm9pZCAwPT09YSYmKGE9UHJvbWlzZSk7dmFyIG89bmV3IEIobCh0LHIsbixpKSxhKTtyZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpP286by5uZXh0KCkudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIHQuZG9uZT90LnZhbHVlOm8ubmV4dCgpfSkpfSx6KHgpLGMoeCxoLCJHZW5lcmF0b3IiKSx4W29dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHgudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBHZW5lcmF0b3JdIn0sZS5rZXlzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO2Zvcih2YXIgciBpbiB0KWUucHVzaChyKTtyZXR1cm4gZS5yZXZlcnNlKCksZnVuY3Rpb24gcigpe2Zvcig7ZS5sZW5ndGg7KXt2YXIgbj1lLnBvcCgpO2lmKG4gaW4gdClyZXR1cm4gci52YWx1ZT1uLHIuZG9uZT0hMSxyfXJldHVybiByLmRvbmU9ITAscn19LGUudmFsdWVzPU8sQy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkMscmVzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5wcmV2PTAsdGhpcy5uZXh0PTAsdGhpcy5zZW50PXRoaXMuX3NlbnQ9cix0aGlzLmRvbmU9ITEsdGhpcy5kZWxlZ2F0ZT1udWxsLHRoaXMubWV0aG9kPSJuZXh0Iix0aGlzLmFyZz1yLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKEUpLCF0KWZvcih2YXIgZSBpbiB0aGlzKSJ0Ij09PWUuY2hhckF0KDApJiZpLmNhbGwodGhpcyxlKSYmIWlzTmFOKCtlLnNsaWNlKDEpKSYmKHRoaXNbZV09cil9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIHQ9dGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247aWYoInRocm93Ij09PXQudHlwZSl0aHJvdyB0LmFyZztyZXR1cm4gdGhpcy5ydmFsfSxkaXNwYXRjaEV4Y2VwdGlvbjpmdW5jdGlvbih0KXtpZih0aGlzLmRvbmUpdGhyb3cgdDt2YXIgZT10aGlzO2Z1bmN0aW9uIG4obixpKXtyZXR1cm4gcy50eXBlPSJ0aHJvdyIscy5hcmc9dCxlLm5leHQ9bixpJiYoZS5tZXRob2Q9Im5leHQiLGUuYXJnPXIpLCEhaX1mb3IodmFyIGE9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO2E+PTA7LS1hKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbYV0scz1vLmNvbXBsZXRpb247aWYoInJvb3QiPT09by50cnlMb2MpcmV0dXJuIG4oImVuZCIpO2lmKG8udHJ5TG9jPD10aGlzLnByZXYpe3ZhciBoPWkuY2FsbChvLCJjYXRjaExvYyIpLGM9aS5jYWxsKG8sImZpbmFsbHlMb2MiKTtpZihoJiZjKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gbihvLmNhdGNoTG9jLCEwKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBuKG8uZmluYWxseUxvYyl9ZWxzZSBpZihoKXtpZih0aGlzLnByZXY8by5jYXRjaExvYylyZXR1cm4gbihvLmNhdGNoTG9jLCEwKX1lbHNle2lmKCFjKXRocm93IG5ldyBFcnJvcigidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHkiKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBuKG8uZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgcj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBuPXRoaXMudHJ5RW50cmllc1tyXTtpZihuLnRyeUxvYzw9dGhpcy5wcmV2JiZpLmNhbGwobiwiZmluYWxseUxvYyIpJiZ0aGlzLnByZXY8bi5maW5hbGx5TG9jKXt2YXIgYT1uO2JyZWFrfX1hJiYoImJyZWFrIj09PXR8fCJjb250aW51ZSI9PT10KSYmYS50cnlMb2M8PWUmJmU8PWEuZmluYWxseUxvYyYmKGE9bnVsbCk7dmFyIG89YT9hLmNvbXBsZXRpb246e307cmV0dXJuIG8udHlwZT10LG8uYXJnPWUsYT8odGhpcy5tZXRob2Q9Im5leHQiLHRoaXMubmV4dD1hLmZpbmFsbHlMb2MsZyk6dGhpcy5jb21wbGV0ZShvKX0sY29tcGxldGU6ZnVuY3Rpb24odCxlKXtpZigidGhyb3ciPT09dC50eXBlKXRocm93IHQuYXJnO3JldHVybiJicmVhayI9PT10LnR5cGV8fCJjb250aW51ZSI9PT10LnR5cGU/dGhpcy5uZXh0PXQuYXJnOiJyZXR1cm4iPT09dC50eXBlPyh0aGlzLnJ2YWw9dGhpcy5hcmc9dC5hcmcsdGhpcy5tZXRob2Q9InJldHVybiIsdGhpcy5uZXh0PSJlbmQiKToibm9ybWFsIj09PXQudHlwZSYmZSYmKHRoaXMubmV4dD1lKSxnfSxmaW5pc2g6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTtlPj0wOy0tZSl7dmFyIHI9dGhpcy50cnlFbnRyaWVzW2VdO2lmKHIuZmluYWxseUxvYz09PXQpcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLHIuYWZ0ZXJMb2MpLEUociksZ319LGNhdGNoOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7ZT49MDstLWUpe3ZhciByPXRoaXMudHJ5RW50cmllc1tlXTtpZihyLnRyeUxvYz09PXQpe3ZhciBuPXIuY29tcGxldGlvbjtpZigidGhyb3ciPT09bi50eXBlKXt2YXIgaT1uLmFyZztFKHIpfXJldHVybiBpfX10aHJvdyBuZXcgRXJyb3IoImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6Tyh0KSxyZXN1bHROYW1lOmUsbmV4dExvYzpufSwibmV4dCI9PT10aGlzLm1ldGhvZCYmKHRoaXMuYXJnPXIpLGd9fSxlfShlLmV4cG9ydHMpO3RyeXtnbG9iYWxUaGlzLnJlZ2VuZXJhdG9yUnVudGltZT1yfWNhdGNoKHQpe0Z1bmN0aW9uKCJyIiwicmVnZW5lcmF0b3JSdW50aW1lID0gciIpKHIpfX0pKTt2YXIgYz1vKChmdW5jdGlvbihlLHIpe2UuZXhwb3J0cz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxyLG4pe2Z1bmN0aW9uIGkobyxzKXtpZighcltvXSl7aWYoIWVbb10pe2lmKCFzJiZoKXJldHVybiBoKCk7aWYoYSlyZXR1cm4gYShvLCEwKTt2YXIgYz1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgYy5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixjfXZhciBsPXJbb109e2V4cG9ydHM6e319O2Vbb11bMF0uY2FsbChsLmV4cG9ydHMsKGZ1bmN0aW9uKHQpe3JldHVybiBpKGVbb11bMV1bdF18fHQpfSksbCxsLmV4cG9ydHMsdCxlLHIsbil9cmV0dXJuIHJbb10uZXhwb3J0c31mb3IodmFyIGE9aCxvPTA7bzxuLmxlbmd0aDtvKyspaShuW29dKTtyZXR1cm4gaX1yZXR1cm4gdH0oKSh7MTpbZnVuY3Rpb24oZSxyLG4pe3ZhciBpPSJ1bmRlZmluZWQiIT10eXBlb2YgVWludDhBcnJheSYmInVuZGVmaW5lZCIhPXR5cGVvZiBVaW50MTZBcnJheSYmInVuZGVmaW5lZCIhPXR5cGVvZiBJbnQzMkFycmF5O2Z1bmN0aW9uIGEodCxlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9bi5hc3NpZ249ZnVuY3Rpb24oZSl7Zm9yKHZhciByPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyLmxlbmd0aDspe3ZhciBuPXIuc2hpZnQoKTtpZihuKXtpZigib2JqZWN0IiE9PXQobikpdGhyb3cgbmV3IFR5cGVFcnJvcihuKyJtdXN0IGJlIG5vbi1vYmplY3QiKTtmb3IodmFyIGkgaW4gbilhKG4saSkmJihlW2ldPW5baV0pfX1yZXR1cm4gZX0sbi5zaHJpbmtCdWY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg9PT1lP3Q6dC5zdWJhcnJheT90LnN1YmFycmF5KDAsZSk6KHQubGVuZ3RoPWUsdCl9O3ZhciBvPXthcnJheVNldDpmdW5jdGlvbih0LGUscixuLGkpe2lmKGUuc3ViYXJyYXkmJnQuc3ViYXJyYXkpdC5zZXQoZS5zdWJhcnJheShyLHIrbiksaSk7ZWxzZSBmb3IodmFyIGE9MDthPG47YSsrKXRbaSthXT1lW3IrYV19LGZsYXR0ZW5DaHVua3M6ZnVuY3Rpb24odCl7dmFyIGUscixuLGksYSxvO2ZvcihuPTAsZT0wLHI9dC5sZW5ndGg7ZTxyO2UrKyluKz10W2VdLmxlbmd0aDtmb3Iobz1uZXcgVWludDhBcnJheShuKSxpPTAsZT0wLHI9dC5sZW5ndGg7ZTxyO2UrKylhPXRbZV0sby5zZXQoYSxpKSxpKz1hLmxlbmd0aDtyZXR1cm4gb319LHM9e2FycmF5U2V0OmZ1bmN0aW9uKHQsZSxyLG4saSl7Zm9yKHZhciBhPTA7YTxuO2ErKyl0W2krYV09ZVtyK2FdfSxmbGF0dGVuQ2h1bmtzOmZ1bmN0aW9uKHQpe3JldHVybltdLmNvbmNhdC5hcHBseShbXSx0KX19O24uc2V0VHlwZWQ9ZnVuY3Rpb24odCl7dD8obi5CdWY4PVVpbnQ4QXJyYXksbi5CdWYxNj1VaW50MTZBcnJheSxuLkJ1ZjMyPUludDMyQXJyYXksbi5hc3NpZ24obixvKSk6KG4uQnVmOD1BcnJheSxuLkJ1ZjE2PUFycmF5LG4uQnVmMzI9QXJyYXksbi5hc3NpZ24obixzKSl9LG4uc2V0VHlwZWQoaSl9LHt9XSwyOltmdW5jdGlvbih0LGUscil7dmFyIG49dCgiLi9jb21tb24iKSxpPSEwLGE9ITA7dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxbMF0pfWNhdGNoKHQpe2k9ITF9dHJ5e1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSgxKSl9Y2F0Y2godCl7YT0hMX1mb3IodmFyIG89bmV3IG4uQnVmOCgyNTYpLHM9MDtzPDI1NjtzKyspb1tzXT1zPj0yNTI/NjpzPj0yNDg/NTpzPj0yNDA/NDpzPj0yMjQ/MzpzPj0xOTI/MjoxO2Z1bmN0aW9uIGgodCxlKXtpZihlPDY1NTM0JiYodC5zdWJhcnJheSYmYXx8IXQuc3ViYXJyYXkmJmkpKXJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbi5zaHJpbmtCdWYodCxlKSk7Zm9yKHZhciByPSIiLG89MDtvPGU7bysrKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUodFtvXSk7cmV0dXJuIHJ9b1syNTRdPW9bMjU0XT0xLHIuc3RyaW5nMmJ1Zj1mdW5jdGlvbih0KXt2YXIgZSxyLGksYSxvLHM9dC5sZW5ndGgsaD0wO2ZvcihhPTA7YTxzO2ErKyk1NTI5Nj09KDY0NTEyJihyPXQuY2hhckNvZGVBdChhKSkpJiZhKzE8cyYmNTYzMjA9PSg2NDUxMiYoaT10LmNoYXJDb2RlQXQoYSsxKSkpJiYocj02NTUzNisoci01NTI5Njw8MTApKyhpLTU2MzIwKSxhKyspLGgrPXI8MTI4PzE6cjwyMDQ4PzI6cjw2NTUzNj8zOjQ7Zm9yKGU9bmV3IG4uQnVmOChoKSxvPTAsYT0wO288aDthKyspNTUyOTY9PSg2NDUxMiYocj10LmNoYXJDb2RlQXQoYSkpKSYmYSsxPHMmJjU2MzIwPT0oNjQ1MTImKGk9dC5jaGFyQ29kZUF0KGErMSkpKSYmKHI9NjU1MzYrKHItNTUyOTY8PDEwKSsoaS01NjMyMCksYSsrKSxyPDEyOD9lW28rK109cjpyPDIwNDg/KGVbbysrXT0xOTJ8cj4+PjYsZVtvKytdPTEyOHw2MyZyKTpyPDY1NTM2PyhlW28rK109MjI0fHI+Pj4xMixlW28rK109MTI4fHI+Pj42JjYzLGVbbysrXT0xMjh8NjMmcik6KGVbbysrXT0yNDB8cj4+PjE4LGVbbysrXT0xMjh8cj4+PjEyJjYzLGVbbysrXT0xMjh8cj4+PjYmNjMsZVtvKytdPTEyOHw2MyZyKTtyZXR1cm4gZX0sci5idWYyYmluc3RyaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBoKHQsdC5sZW5ndGgpfSxyLmJpbnN0cmluZzJidWY9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBuLkJ1ZjgodC5sZW5ndGgpLHI9MCxpPWUubGVuZ3RoO3I8aTtyKyspZVtyXT10LmNoYXJDb2RlQXQocik7cmV0dXJuIGV9LHIuYnVmMnN0cmluZz1mdW5jdGlvbih0LGUpe3ZhciByLG4saSxhLHM9ZXx8dC5sZW5ndGgsYz1uZXcgQXJyYXkoMipzKTtmb3Iobj0wLHI9MDtyPHM7KWlmKChpPXRbcisrXSk8MTI4KWNbbisrXT1pO2Vsc2UgaWYoKGE9b1tpXSk+NCljW24rK109NjU1MzMscis9YS0xO2Vsc2V7Zm9yKGkmPTI9PT1hPzMxOjM9PT1hPzE1Ojc7YT4xJiZyPHM7KWk9aTw8Nnw2MyZ0W3IrK10sYS0tO2E+MT9jW24rK109NjU1MzM6aTw2NTUzNj9jW24rK109aTooaS09NjU1MzYsY1tuKytdPTU1Mjk2fGk+PjEwJjEwMjMsY1tuKytdPTU2MzIwfDEwMjMmaSl9cmV0dXJuIGgoYyxuKX0sci51dGY4Ym9yZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIHI7Zm9yKChlPWV8fHQubGVuZ3RoKT50Lmxlbmd0aCYmKGU9dC5sZW5ndGgpLHI9ZS0xO3I+PTAmJjEyOD09KDE5MiZ0W3JdKTspci0tO3JldHVybiByPDB8fDA9PT1yP2U6citvW3Rbcl1dPmU/cjplfX0seyIuL2NvbW1vbiI6MX1dLDM6W2Z1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKHQsZSxyLG4pe2Zvcih2YXIgaT02NTUzNSZ0fDAsYT10Pj4+MTYmNjU1MzV8MCxvPTA7MCE9PXI7KXtyLT1vPXI+MmUzPzJlMzpyO2Rve2E9YSsoaT1pK2VbbisrXXwwKXwwfXdoaWxlKC0tbyk7aSU9NjU1MjEsYSU9NjU1MjF9cmV0dXJuIGl8YTw8MTZ8MH1lLmV4cG9ydHM9bn0se31dLDQ6W2Z1bmN0aW9uKHQsZSxyKXtmdW5jdGlvbiBuKCl7Zm9yKHZhciB0LGU9W10scj0wO3I8MjU2O3IrKyl7dD1yO2Zvcih2YXIgbj0wO248ODtuKyspdD0xJnQ/Mzk4ODI5MjM4NF50Pj4+MTp0Pj4+MTtlW3JdPXR9cmV0dXJuIGV9dmFyIGk9bigpO2Z1bmN0aW9uIGEodCxlLHIsbil7dmFyIGE9aSxvPW4rcjt0Xj0tMTtmb3IodmFyIHM9bjtzPG87cysrKXQ9dD4+PjheYVsyNTUmKHReZVtzXSldO3JldHVybi0xXnR9ZS5leHBvcnRzPWF9LHt9XSw1OltmdW5jdGlvbih0LGUscil7dmFyIG4saT10KCIuLi91dGlscy9jb21tb24iKSxhPXQoIi4vdHJlZXMiKSxvPXQoIi4vYWRsZXIzMiIpLHM9dCgiLi9jcmMzMiIpLGg9dCgiLi9tZXNzYWdlcyIpLGM9MCxsPTEsdT0zLGY9NCxkPTUsXz0wLHA9MSxnPS0yLHY9LTMseT0tNSxtPS0xLHc9MSxiPTIsaz0zLHg9NCx6PTAsQj0yLEE9OCxTPTksRT0xNSxDPTgsTz0yODYsRD0zMCxIPTE5LEw9MipPKzEsaj0xNSxNPTMsVT0yNTgsUj1VK00rMSxGPTMyLEk9NDIsUD02OSxUPTczLE49OTEsSz0xMDMsVz0xMTMsRz02NjYsWD0xLHE9MixWPTMsWT00LCQ9MztmdW5jdGlvbiBKKHQsZSl7cmV0dXJuIHQubXNnPWhbZV0sZX1mdW5jdGlvbiBRKHQpe3JldHVybih0PDwxKS0odD40Pzk6MCl9ZnVuY3Rpb24gWih0KXtmb3IodmFyIGU9dC5sZW5ndGg7LS1lPj0wOyl0W2VdPTB9ZnVuY3Rpb24gdHQodCl7dmFyIGU9dC5zdGF0ZSxyPWUucGVuZGluZztyPnQuYXZhaWxfb3V0JiYocj10LmF2YWlsX291dCksMCE9PXImJihpLmFycmF5U2V0KHQub3V0cHV0LGUucGVuZGluZ19idWYsZS5wZW5kaW5nX291dCxyLHQubmV4dF9vdXQpLHQubmV4dF9vdXQrPXIsZS5wZW5kaW5nX291dCs9cix0LnRvdGFsX291dCs9cix0LmF2YWlsX291dC09cixlLnBlbmRpbmctPXIsMD09PWUucGVuZGluZyYmKGUucGVuZGluZ19vdXQ9MCkpfWZ1bmN0aW9uIGV0KHQsZSl7YS5fdHJfZmx1c2hfYmxvY2sodCx0LmJsb2NrX3N0YXJ0Pj0wP3QuYmxvY2tfc3RhcnQ6LTEsdC5zdHJzdGFydC10LmJsb2NrX3N0YXJ0LGUpLHQuYmxvY2tfc3RhcnQ9dC5zdHJzdGFydCx0dCh0LnN0cm0pfWZ1bmN0aW9uIHJ0KHQsZSl7dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZX1mdW5jdGlvbiBudCh0LGUpe3QucGVuZGluZ19idWZbdC5wZW5kaW5nKytdPWU+Pj44JjI1NSx0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmZX1mdW5jdGlvbiBpdCh0LGUscixuKXt2YXIgYT10LmF2YWlsX2luO3JldHVybiBhPm4mJihhPW4pLDA9PT1hPzA6KHQuYXZhaWxfaW4tPWEsaS5hcnJheVNldChlLHQuaW5wdXQsdC5uZXh0X2luLGEsciksMT09PXQuc3RhdGUud3JhcD90LmFkbGVyPW8odC5hZGxlcixlLGEscik6Mj09PXQuc3RhdGUud3JhcCYmKHQuYWRsZXI9cyh0LmFkbGVyLGUsYSxyKSksdC5uZXh0X2luKz1hLHQudG90YWxfaW4rPWEsYSl9ZnVuY3Rpb24gYXQodCxlKXt2YXIgcixuLGk9dC5tYXhfY2hhaW5fbGVuZ3RoLGE9dC5zdHJzdGFydCxvPXQucHJldl9sZW5ndGgscz10Lm5pY2VfbWF0Y2gsaD10LnN0cnN0YXJ0PnQud19zaXplLVI/dC5zdHJzdGFydC0odC53X3NpemUtUik6MCxjPXQud2luZG93LGw9dC53X21hc2ssdT10LnByZXYsZj10LnN0cnN0YXJ0K1UsZD1jW2Erby0xXSxfPWNbYStvXTt0LnByZXZfbGVuZ3RoPj10Lmdvb2RfbWF0Y2gmJihpPj49Mikscz50Lmxvb2thaGVhZCYmKHM9dC5sb29rYWhlYWQpO2Rve2lmKGNbKHI9ZSkrb109PT1fJiZjW3Irby0xXT09PWQmJmNbcl09PT1jW2FdJiZjWysrcl09PT1jW2ErMV0pe2ErPTIscisrO2Rve313aGlsZShjWysrYV09PT1jWysrcl0mJmNbKythXT09PWNbKytyXSYmY1srK2FdPT09Y1srK3JdJiZjWysrYV09PT1jWysrcl0mJmNbKythXT09PWNbKytyXSYmY1srK2FdPT09Y1srK3JdJiZjWysrYV09PT1jWysrcl0mJmNbKythXT09PWNbKytyXSYmYTxmKTtpZihuPVUtKGYtYSksYT1mLVUsbj5vKXtpZih0Lm1hdGNoX3N0YXJ0PWUsbz1uLG4+PXMpYnJlYWs7ZD1jW2Erby0xXSxfPWNbYStvXX19fXdoaWxlKChlPXVbZSZsXSk+aCYmMCE9LS1pKTtyZXR1cm4gbzw9dC5sb29rYWhlYWQ/bzp0Lmxvb2thaGVhZH1mdW5jdGlvbiBvdCh0KXt2YXIgZSxyLG4sYSxvLHM9dC53X3NpemU7ZG97aWYoYT10LndpbmRvd19zaXplLXQubG9va2FoZWFkLXQuc3Ryc3RhcnQsdC5zdHJzdGFydD49cysocy1SKSl7aS5hcnJheVNldCh0LndpbmRvdyx0LndpbmRvdyxzLHMsMCksdC5tYXRjaF9zdGFydC09cyx0LnN0cnN0YXJ0LT1zLHQuYmxvY2tfc3RhcnQtPXMsZT1yPXQuaGFzaF9zaXplO2Rve249dC5oZWFkWy0tZV0sdC5oZWFkW2VdPW4+PXM/bi1zOjB9d2hpbGUoLS1yKTtlPXI9cztkb3tuPXQucHJldlstLWVdLHQucHJldltlXT1uPj1zP24tczowfXdoaWxlKC0tcik7YSs9c31pZigwPT09dC5zdHJtLmF2YWlsX2luKWJyZWFrO2lmKHI9aXQodC5zdHJtLHQud2luZG93LHQuc3Ryc3RhcnQrdC5sb29rYWhlYWQsYSksdC5sb29rYWhlYWQrPXIsdC5sb29rYWhlYWQrdC5pbnNlcnQ+PU0pZm9yKG89dC5zdHJzdGFydC10Lmluc2VydCx0Lmluc19oPXQud2luZG93W29dLHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1tvKzFdKSZ0Lmhhc2hfbWFzazt0Lmluc2VydCYmKHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1tvK00tMV0pJnQuaGFzaF9tYXNrLHQucHJldltvJnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPW8sbysrLHQuaW5zZXJ0LS0sISh0Lmxvb2thaGVhZCt0Lmluc2VydDxNKSk7KTt9d2hpbGUodC5sb29rYWhlYWQ8UiYmMCE9PXQuc3RybS5hdmFpbF9pbil9ZnVuY3Rpb24gc3QodCxlKXt2YXIgcj02NTUzNTtmb3Iocj50LnBlbmRpbmdfYnVmX3NpemUtNSYmKHI9dC5wZW5kaW5nX2J1Zl9zaXplLTUpOzspe2lmKHQubG9va2FoZWFkPD0xKXtpZihvdCh0KSwwPT09dC5sb29rYWhlYWQmJmU9PT1jKXJldHVybiBYO2lmKDA9PT10Lmxvb2thaGVhZClicmVha310LnN0cnN0YXJ0Kz10Lmxvb2thaGVhZCx0Lmxvb2thaGVhZD0wO3ZhciBuPXQuYmxvY2tfc3RhcnQrcjtpZigoMD09PXQuc3Ryc3RhcnR8fHQuc3Ryc3RhcnQ+PW4pJiYodC5sb29rYWhlYWQ9dC5zdHJzdGFydC1uLHQuc3Ryc3RhcnQ9bixldCh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIFg7aWYodC5zdHJzdGFydC10LmJsb2NrX3N0YXJ0Pj10Lndfc2l6ZS1SJiYoZXQodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpKXJldHVybiBYfXJldHVybiB0Lmluc2VydD0wLGU9PT1mPyhldCh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9WOlkpOih0LnN0cnN0YXJ0PnQuYmxvY2tfc3RhcnQmJihldCh0LCExKSx0LnN0cm0uYXZhaWxfb3V0KSxYKX1mdW5jdGlvbiBodCh0LGUpe2Zvcih2YXIgcixuOzspe2lmKHQubG9va2FoZWFkPFIpe2lmKG90KHQpLHQubG9va2FoZWFkPFImJmU9PT1jKXJldHVybiBYO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZihyPTAsdC5sb29rYWhlYWQ+PU0mJih0Lmluc19oPSh0Lmluc19oPDx0Lmhhc2hfc2hpZnRedC53aW5kb3dbdC5zdHJzdGFydCtNLTFdKSZ0Lmhhc2hfbWFzayxyPXQucHJldlt0LnN0cnN0YXJ0JnQud19tYXNrXT10LmhlYWRbdC5pbnNfaF0sdC5oZWFkW3QuaW5zX2hdPXQuc3Ryc3RhcnQpLDAhPT1yJiZ0LnN0cnN0YXJ0LXI8PXQud19zaXplLVImJih0Lm1hdGNoX2xlbmd0aD1hdCh0LHIpKSx0Lm1hdGNoX2xlbmd0aD49TSlpZihuPWEuX3RyX3RhbGx5KHQsdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0LHQubWF0Y2hfbGVuZ3RoLU0pLHQubG9va2FoZWFkLT10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aDw9dC5tYXhfbGF6eV9tYXRjaCYmdC5sb29rYWhlYWQ+PU0pe3QubWF0Y2hfbGVuZ3RoLS07ZG97dC5zdHJzdGFydCsrLHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1t0LnN0cnN0YXJ0K00tMV0pJnQuaGFzaF9tYXNrLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydH13aGlsZSgwIT0tLXQubWF0Y2hfbGVuZ3RoKTt0LnN0cnN0YXJ0Kyt9ZWxzZSB0LnN0cnN0YXJ0Kz10Lm1hdGNoX2xlbmd0aCx0Lm1hdGNoX2xlbmd0aD0wLHQuaW5zX2g9dC53aW5kb3dbdC5zdHJzdGFydF0sdC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W3Quc3Ryc3RhcnQrMV0pJnQuaGFzaF9tYXNrO2Vsc2Ugbj1hLl90cl90YWxseSh0LDAsdC53aW5kb3dbdC5zdHJzdGFydF0pLHQubG9va2FoZWFkLS0sdC5zdHJzdGFydCsrO2lmKG4mJihldCh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIFh9cmV0dXJuIHQuaW5zZXJ0PXQuc3Ryc3RhcnQ8TS0xP3Quc3Ryc3RhcnQ6TS0xLGU9PT1mPyhldCh0LCEwKSwwPT09dC5zdHJtLmF2YWlsX291dD9WOlkpOnQubGFzdF9saXQmJihldCh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCk/WDpxfWZ1bmN0aW9uIGN0KHQsZSl7Zm9yKHZhciByLG4saTs7KXtpZih0Lmxvb2thaGVhZDxSKXtpZihvdCh0KSx0Lmxvb2thaGVhZDxSJiZlPT09YylyZXR1cm4gWDtpZigwPT09dC5sb29rYWhlYWQpYnJlYWt9aWYocj0wLHQubG9va2FoZWFkPj1NJiYodC5pbnNfaD0odC5pbnNfaDw8dC5oYXNoX3NoaWZ0XnQud2luZG93W3Quc3Ryc3RhcnQrTS0xXSkmdC5oYXNoX21hc2sscj10LnByZXZbdC5zdHJzdGFydCZ0LndfbWFza109dC5oZWFkW3QuaW5zX2hdLHQuaGVhZFt0Lmluc19oXT10LnN0cnN0YXJ0KSx0LnByZXZfbGVuZ3RoPXQubWF0Y2hfbGVuZ3RoLHQucHJldl9tYXRjaD10Lm1hdGNoX3N0YXJ0LHQubWF0Y2hfbGVuZ3RoPU0tMSwwIT09ciYmdC5wcmV2X2xlbmd0aDx0Lm1heF9sYXp5X21hdGNoJiZ0LnN0cnN0YXJ0LXI8PXQud19zaXplLVImJih0Lm1hdGNoX2xlbmd0aD1hdCh0LHIpLHQubWF0Y2hfbGVuZ3RoPD01JiYodC5zdHJhdGVneT09PXd8fHQubWF0Y2hfbGVuZ3RoPT09TSYmdC5zdHJzdGFydC10Lm1hdGNoX3N0YXJ0PjQwOTYpJiYodC5tYXRjaF9sZW5ndGg9TS0xKSksdC5wcmV2X2xlbmd0aD49TSYmdC5tYXRjaF9sZW5ndGg8PXQucHJldl9sZW5ndGgpe2k9dC5zdHJzdGFydCt0Lmxvb2thaGVhZC1NLG49YS5fdHJfdGFsbHkodCx0LnN0cnN0YXJ0LTEtdC5wcmV2X21hdGNoLHQucHJldl9sZW5ndGgtTSksdC5sb29rYWhlYWQtPXQucHJldl9sZW5ndGgtMSx0LnByZXZfbGVuZ3RoLT0yO2RveysrdC5zdHJzdGFydDw9aSYmKHQuaW5zX2g9KHQuaW5zX2g8PHQuaGFzaF9zaGlmdF50LndpbmRvd1t0LnN0cnN0YXJ0K00tMV0pJnQuaGFzaF9tYXNrLHI9dC5wcmV2W3Quc3Ryc3RhcnQmdC53X21hc2tdPXQuaGVhZFt0Lmluc19oXSx0LmhlYWRbdC5pbnNfaF09dC5zdHJzdGFydCl9d2hpbGUoMCE9LS10LnByZXZfbGVuZ3RoKTtpZih0Lm1hdGNoX2F2YWlsYWJsZT0wLHQubWF0Y2hfbGVuZ3RoPU0tMSx0LnN0cnN0YXJ0KyssbiYmKGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gWH1lbHNlIGlmKHQubWF0Y2hfYXZhaWxhYmxlKXtpZigobj1hLl90cl90YWxseSh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSkpJiZldCh0LCExKSx0LnN0cnN0YXJ0KyssdC5sb29rYWhlYWQtLSwwPT09dC5zdHJtLmF2YWlsX291dClyZXR1cm4gWH1lbHNlIHQubWF0Y2hfYXZhaWxhYmxlPTEsdC5zdHJzdGFydCsrLHQubG9va2FoZWFkLS19cmV0dXJuIHQubWF0Y2hfYXZhaWxhYmxlJiYobj1hLl90cl90YWxseSh0LDAsdC53aW5kb3dbdC5zdHJzdGFydC0xXSksdC5tYXRjaF9hdmFpbGFibGU9MCksdC5pbnNlcnQ9dC5zdHJzdGFydDxNLTE/dC5zdHJzdGFydDpNLTEsZT09PWY/KGV0KHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P1Y6WSk6dC5sYXN0X2xpdCYmKGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9YOnF9ZnVuY3Rpb24gbHQodCxlKXtmb3IodmFyIHIsbixpLG8scz10LndpbmRvdzs7KXtpZih0Lmxvb2thaGVhZDw9VSl7aWYob3QodCksdC5sb29rYWhlYWQ8PVUmJmU9PT1jKXJldHVybiBYO2lmKDA9PT10Lmxvb2thaGVhZClicmVha31pZih0Lm1hdGNoX2xlbmd0aD0wLHQubG9va2FoZWFkPj1NJiZ0LnN0cnN0YXJ0PjAmJihuPXNbaT10LnN0cnN0YXJ0LTFdKT09PXNbKytpXSYmbj09PXNbKytpXSYmbj09PXNbKytpXSl7bz10LnN0cnN0YXJ0K1U7ZG97fXdoaWxlKG49PT1zWysraV0mJm49PT1zWysraV0mJm49PT1zWysraV0mJm49PT1zWysraV0mJm49PT1zWysraV0mJm49PT1zWysraV0mJm49PT1zWysraV0mJm49PT1zWysraV0mJmk8byk7dC5tYXRjaF9sZW5ndGg9VS0oby1pKSx0Lm1hdGNoX2xlbmd0aD50Lmxvb2thaGVhZCYmKHQubWF0Y2hfbGVuZ3RoPXQubG9va2FoZWFkKX1pZih0Lm1hdGNoX2xlbmd0aD49TT8ocj1hLl90cl90YWxseSh0LDEsdC5tYXRjaF9sZW5ndGgtTSksdC5sb29rYWhlYWQtPXQubWF0Y2hfbGVuZ3RoLHQuc3Ryc3RhcnQrPXQubWF0Y2hfbGVuZ3RoLHQubWF0Y2hfbGVuZ3RoPTApOihyPWEuX3RyX3RhbGx5KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0KyspLHImJihldCh0LCExKSwwPT09dC5zdHJtLmF2YWlsX291dCkpcmV0dXJuIFh9cmV0dXJuIHQuaW5zZXJ0PTAsZT09PWY/KGV0KHQsITApLDA9PT10LnN0cm0uYXZhaWxfb3V0P1Y6WSk6dC5sYXN0X2xpdCYmKGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KT9YOnF9ZnVuY3Rpb24gdXQodCxlKXtmb3IodmFyIHI7Oyl7aWYoMD09PXQubG9va2FoZWFkJiYob3QodCksMD09PXQubG9va2FoZWFkKSl7aWYoZT09PWMpcmV0dXJuIFg7YnJlYWt9aWYodC5tYXRjaF9sZW5ndGg9MCxyPWEuX3RyX3RhbGx5KHQsMCx0LndpbmRvd1t0LnN0cnN0YXJ0XSksdC5sb29rYWhlYWQtLSx0LnN0cnN0YXJ0KyssciYmKGV0KHQsITEpLDA9PT10LnN0cm0uYXZhaWxfb3V0KSlyZXR1cm4gWH1yZXR1cm4gdC5pbnNlcnQ9MCxlPT09Zj8oZXQodCwhMCksMD09PXQuc3RybS5hdmFpbF9vdXQ/VjpZKTp0Lmxhc3RfbGl0JiYoZXQodCwhMSksMD09PXQuc3RybS5hdmFpbF9vdXQpP1g6cX1mdW5jdGlvbiBmdCh0LGUscixuLGkpe3RoaXMuZ29vZF9sZW5ndGg9dCx0aGlzLm1heF9sYXp5PWUsdGhpcy5uaWNlX2xlbmd0aD1yLHRoaXMubWF4X2NoYWluPW4sdGhpcy5mdW5jPWl9ZnVuY3Rpb24gZHQodCl7dC53aW5kb3dfc2l6ZT0yKnQud19zaXplLFoodC5oZWFkKSx0Lm1heF9sYXp5X21hdGNoPW5bdC5sZXZlbF0ubWF4X2xhenksdC5nb29kX21hdGNoPW5bdC5sZXZlbF0uZ29vZF9sZW5ndGgsdC5uaWNlX21hdGNoPW5bdC5sZXZlbF0ubmljZV9sZW5ndGgsdC5tYXhfY2hhaW5fbGVuZ3RoPW5bdC5sZXZlbF0ubWF4X2NoYWluLHQuc3Ryc3RhcnQ9MCx0LmJsb2NrX3N0YXJ0PTAsdC5sb29rYWhlYWQ9MCx0Lmluc2VydD0wLHQubWF0Y2hfbGVuZ3RoPXQucHJldl9sZW5ndGg9TS0xLHQubWF0Y2hfYXZhaWxhYmxlPTAsdC5pbnNfaD0wfWZ1bmN0aW9uIF90KCl7dGhpcy5zdHJtPW51bGwsdGhpcy5zdGF0dXM9MCx0aGlzLnBlbmRpbmdfYnVmPW51bGwsdGhpcy5wZW5kaW5nX2J1Zl9zaXplPTAsdGhpcy5wZW5kaW5nX291dD0wLHRoaXMucGVuZGluZz0wLHRoaXMud3JhcD0wLHRoaXMuZ3poZWFkPW51bGwsdGhpcy5nemluZGV4PTAsdGhpcy5tZXRob2Q9QSx0aGlzLmxhc3RfZmx1c2g9LTEsdGhpcy53X3NpemU9MCx0aGlzLndfYml0cz0wLHRoaXMud19tYXNrPTAsdGhpcy53aW5kb3c9bnVsbCx0aGlzLndpbmRvd19zaXplPTAsdGhpcy5wcmV2PW51bGwsdGhpcy5oZWFkPW51bGwsdGhpcy5pbnNfaD0wLHRoaXMuaGFzaF9zaXplPTAsdGhpcy5oYXNoX2JpdHM9MCx0aGlzLmhhc2hfbWFzaz0wLHRoaXMuaGFzaF9zaGlmdD0wLHRoaXMuYmxvY2tfc3RhcnQ9MCx0aGlzLm1hdGNoX2xlbmd0aD0wLHRoaXMucHJldl9tYXRjaD0wLHRoaXMubWF0Y2hfYXZhaWxhYmxlPTAsdGhpcy5zdHJzdGFydD0wLHRoaXMubWF0Y2hfc3RhcnQ9MCx0aGlzLmxvb2thaGVhZD0wLHRoaXMucHJldl9sZW5ndGg9MCx0aGlzLm1heF9jaGFpbl9sZW5ndGg9MCx0aGlzLm1heF9sYXp5X21hdGNoPTAsdGhpcy5sZXZlbD0wLHRoaXMuc3RyYXRlZ3k9MCx0aGlzLmdvb2RfbWF0Y2g9MCx0aGlzLm5pY2VfbWF0Y2g9MCx0aGlzLmR5bl9sdHJlZT1uZXcgaS5CdWYxNigyKkwpLHRoaXMuZHluX2R0cmVlPW5ldyBpLkJ1ZjE2KDIqKDIqRCsxKSksdGhpcy5ibF90cmVlPW5ldyBpLkJ1ZjE2KDIqKDIqSCsxKSksWih0aGlzLmR5bl9sdHJlZSksWih0aGlzLmR5bl9kdHJlZSksWih0aGlzLmJsX3RyZWUpLHRoaXMubF9kZXNjPW51bGwsdGhpcy5kX2Rlc2M9bnVsbCx0aGlzLmJsX2Rlc2M9bnVsbCx0aGlzLmJsX2NvdW50PW5ldyBpLkJ1ZjE2KGorMSksdGhpcy5oZWFwPW5ldyBpLkJ1ZjE2KDIqTysxKSxaKHRoaXMuaGVhcCksdGhpcy5oZWFwX2xlbj0wLHRoaXMuaGVhcF9tYXg9MCx0aGlzLmRlcHRoPW5ldyBpLkJ1ZjE2KDIqTysxKSxaKHRoaXMuZGVwdGgpLHRoaXMubF9idWY9MCx0aGlzLmxpdF9idWZzaXplPTAsdGhpcy5sYXN0X2xpdD0wLHRoaXMuZF9idWY9MCx0aGlzLm9wdF9sZW49MCx0aGlzLnN0YXRpY19sZW49MCx0aGlzLm1hdGNoZXM9MCx0aGlzLmluc2VydD0wLHRoaXMuYmlfYnVmPTAsdGhpcy5iaV92YWxpZD0wfWZ1bmN0aW9uIHB0KHQpe3ZhciBlO3JldHVybiB0JiZ0LnN0YXRlPyh0LnRvdGFsX2luPXQudG90YWxfb3V0PTAsdC5kYXRhX3R5cGU9QiwoZT10LnN0YXRlKS5wZW5kaW5nPTAsZS5wZW5kaW5nX291dD0wLGUud3JhcDwwJiYoZS53cmFwPS1lLndyYXApLGUuc3RhdHVzPWUud3JhcD9JOlcsdC5hZGxlcj0yPT09ZS53cmFwPzA6MSxlLmxhc3RfZmx1c2g9YyxhLl90cl9pbml0KGUpLF8pOkoodCxnKX1mdW5jdGlvbiBndCh0KXt2YXIgZT1wdCh0KTtyZXR1cm4gZT09PV8mJmR0KHQuc3RhdGUpLGV9ZnVuY3Rpb24gdnQodCxlKXtyZXR1cm4gdCYmdC5zdGF0ZT8yIT09dC5zdGF0ZS53cmFwP2c6KHQuc3RhdGUuZ3poZWFkPWUsXyk6Z31mdW5jdGlvbiB5dCh0LGUscixuLGEsbyl7aWYoIXQpcmV0dXJuIGc7dmFyIHM9MTtpZihlPT09bSYmKGU9NiksbjwwPyhzPTAsbj0tbik6bj4xNSYmKHM9MixuLT0xNiksYTwxfHxhPlN8fHIhPT1BfHxuPDh8fG4+MTV8fGU8MHx8ZT45fHxvPDB8fG8+eClyZXR1cm4gSih0LGcpOzg9PT1uJiYobj05KTt2YXIgaD1uZXcgX3Q7cmV0dXJuIHQuc3RhdGU9aCxoLnN0cm09dCxoLndyYXA9cyxoLmd6aGVhZD1udWxsLGgud19iaXRzPW4saC53X3NpemU9MTw8aC53X2JpdHMsaC53X21hc2s9aC53X3NpemUtMSxoLmhhc2hfYml0cz1hKzcsaC5oYXNoX3NpemU9MTw8aC5oYXNoX2JpdHMsaC5oYXNoX21hc2s9aC5oYXNoX3NpemUtMSxoLmhhc2hfc2hpZnQ9fn4oKGguaGFzaF9iaXRzK00tMSkvTSksaC53aW5kb3c9bmV3IGkuQnVmOCgyKmgud19zaXplKSxoLmhlYWQ9bmV3IGkuQnVmMTYoaC5oYXNoX3NpemUpLGgucHJldj1uZXcgaS5CdWYxNihoLndfc2l6ZSksaC5saXRfYnVmc2l6ZT0xPDxhKzYsaC5wZW5kaW5nX2J1Zl9zaXplPTQqaC5saXRfYnVmc2l6ZSxoLnBlbmRpbmdfYnVmPW5ldyBpLkJ1ZjgoaC5wZW5kaW5nX2J1Zl9zaXplKSxoLmRfYnVmPTEqaC5saXRfYnVmc2l6ZSxoLmxfYnVmPTMqaC5saXRfYnVmc2l6ZSxoLmxldmVsPWUsaC5zdHJhdGVneT1vLGgubWV0aG9kPXIsZ3QodCl9ZnVuY3Rpb24gbXQodCxlKXtyZXR1cm4geXQodCxlLEEsRSxDLHopfWZ1bmN0aW9uIHd0KHQsZSl7dmFyIHIsaSxvLGg7aWYoIXR8fCF0LnN0YXRlfHxlPmR8fGU8MClyZXR1cm4gdD9KKHQsZyk6ZztpZihpPXQuc3RhdGUsIXQub3V0cHV0fHwhdC5pbnB1dCYmMCE9PXQuYXZhaWxfaW58fGkuc3RhdHVzPT09RyYmZSE9PWYpcmV0dXJuIEoodCwwPT09dC5hdmFpbF9vdXQ/eTpnKTtpZihpLnN0cm09dCxyPWkubGFzdF9mbHVzaCxpLmxhc3RfZmx1c2g9ZSxpLnN0YXR1cz09PUkpaWYoMj09PWkud3JhcCl0LmFkbGVyPTAscnQoaSwzMSkscnQoaSwxMzkpLHJ0KGksOCksaS5nemhlYWQ/KHJ0KGksKGkuZ3poZWFkLnRleHQ/MTowKSsoaS5nemhlYWQuaGNyYz8yOjApKyhpLmd6aGVhZC5leHRyYT80OjApKyhpLmd6aGVhZC5uYW1lPzg6MCkrKGkuZ3poZWFkLmNvbW1lbnQ/MTY6MCkpLHJ0KGksMjU1JmkuZ3poZWFkLnRpbWUpLHJ0KGksaS5nemhlYWQudGltZT4+OCYyNTUpLHJ0KGksaS5nemhlYWQudGltZT4+MTYmMjU1KSxydChpLGkuZ3poZWFkLnRpbWU+PjI0JjI1NSkscnQoaSw5PT09aS5sZXZlbD8yOmkuc3RyYXRlZ3k+PWJ8fGkubGV2ZWw8Mj80OjApLHJ0KGksMjU1JmkuZ3poZWFkLm9zKSxpLmd6aGVhZC5leHRyYSYmaS5nemhlYWQuZXh0cmEubGVuZ3RoJiYocnQoaSwyNTUmaS5nemhlYWQuZXh0cmEubGVuZ3RoKSxydChpLGkuZ3poZWFkLmV4dHJhLmxlbmd0aD4+OCYyNTUpKSxpLmd6aGVhZC5oY3JjJiYodC5hZGxlcj1zKHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmcsMCkpLGkuZ3ppbmRleD0wLGkuc3RhdHVzPVApOihydChpLDApLHJ0KGksMCkscnQoaSwwKSxydChpLDApLHJ0KGksMCkscnQoaSw5PT09aS5sZXZlbD8yOmkuc3RyYXRlZ3k+PWJ8fGkubGV2ZWw8Mj80OjApLHJ0KGksJCksaS5zdGF0dXM9Vyk7ZWxzZXt2YXIgdj1BKyhpLndfYml0cy04PDw0KTw8ODt2fD0oaS5zdHJhdGVneT49Ynx8aS5sZXZlbDwyPzA6aS5sZXZlbDw2PzE6Nj09PWkubGV2ZWw/MjozKTw8NiwwIT09aS5zdHJzdGFydCYmKHZ8PUYpLHYrPTMxLXYlMzEsaS5zdGF0dXM9VyxudChpLHYpLDAhPT1pLnN0cnN0YXJ0JiYobnQoaSx0LmFkbGVyPj4+MTYpLG50KGksNjU1MzUmdC5hZGxlcikpLHQuYWRsZXI9MX1pZihpLnN0YXR1cz09PVApaWYoaS5nemhlYWQuZXh0cmEpe2ZvcihvPWkucGVuZGluZztpLmd6aW5kZXg8KDY1NTM1JmkuZ3poZWFkLmV4dHJhLmxlbmd0aCkmJihpLnBlbmRpbmchPT1pLnBlbmRpbmdfYnVmX3NpemV8fChpLmd6aGVhZC5oY3JjJiZpLnBlbmRpbmc+byYmKHQuYWRsZXI9cyh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLW8sbykpLHR0KHQpLG89aS5wZW5kaW5nLGkucGVuZGluZyE9PWkucGVuZGluZ19idWZfc2l6ZSkpOylydChpLDI1NSZpLmd6aGVhZC5leHRyYVtpLmd6aW5kZXhdKSxpLmd6aW5kZXgrKztpLmd6aGVhZC5oY3JjJiZpLnBlbmRpbmc+byYmKHQuYWRsZXI9cyh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLW8sbykpLGkuZ3ppbmRleD09PWkuZ3poZWFkLmV4dHJhLmxlbmd0aCYmKGkuZ3ppbmRleD0wLGkuc3RhdHVzPVQpfWVsc2UgaS5zdGF0dXM9VDtpZihpLnN0YXR1cz09PVQpaWYoaS5nemhlYWQubmFtZSl7bz1pLnBlbmRpbmc7ZG97aWYoaS5wZW5kaW5nPT09aS5wZW5kaW5nX2J1Zl9zaXplJiYoaS5nemhlYWQuaGNyYyYmaS5wZW5kaW5nPm8mJih0LmFkbGVyPXModC5hZGxlcixpLnBlbmRpbmdfYnVmLGkucGVuZGluZy1vLG8pKSx0dCh0KSxvPWkucGVuZGluZyxpLnBlbmRpbmc9PT1pLnBlbmRpbmdfYnVmX3NpemUpKXtoPTE7YnJlYWt9aD1pLmd6aW5kZXg8aS5nemhlYWQubmFtZS5sZW5ndGg/MjU1JmkuZ3poZWFkLm5hbWUuY2hhckNvZGVBdChpLmd6aW5kZXgrKyk6MCxydChpLGgpfXdoaWxlKDAhPT1oKTtpLmd6aGVhZC5oY3JjJiZpLnBlbmRpbmc+byYmKHQuYWRsZXI9cyh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLW8sbykpLDA9PT1oJiYoaS5nemluZGV4PTAsaS5zdGF0dXM9Til9ZWxzZSBpLnN0YXR1cz1OO2lmKGkuc3RhdHVzPT09TilpZihpLmd6aGVhZC5jb21tZW50KXtvPWkucGVuZGluZztkb3tpZihpLnBlbmRpbmc9PT1pLnBlbmRpbmdfYnVmX3NpemUmJihpLmd6aGVhZC5oY3JjJiZpLnBlbmRpbmc+byYmKHQuYWRsZXI9cyh0LmFkbGVyLGkucGVuZGluZ19idWYsaS5wZW5kaW5nLW8sbykpLHR0KHQpLG89aS5wZW5kaW5nLGkucGVuZGluZz09PWkucGVuZGluZ19idWZfc2l6ZSkpe2g9MTticmVha31oPWkuZ3ppbmRleDxpLmd6aGVhZC5jb21tZW50Lmxlbmd0aD8yNTUmaS5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KGkuZ3ppbmRleCsrKTowLHJ0KGksaCl9d2hpbGUoMCE9PWgpO2kuZ3poZWFkLmhjcmMmJmkucGVuZGluZz5vJiYodC5hZGxlcj1zKHQuYWRsZXIsaS5wZW5kaW5nX2J1ZixpLnBlbmRpbmctbyxvKSksMD09PWgmJihpLnN0YXR1cz1LKX1lbHNlIGkuc3RhdHVzPUs7aWYoaS5zdGF0dXM9PT1LJiYoaS5nemhlYWQuaGNyYz8oaS5wZW5kaW5nKzI+aS5wZW5kaW5nX2J1Zl9zaXplJiZ0dCh0KSxpLnBlbmRpbmcrMjw9aS5wZW5kaW5nX2J1Zl9zaXplJiYocnQoaSwyNTUmdC5hZGxlcikscnQoaSx0LmFkbGVyPj44JjI1NSksdC5hZGxlcj0wLGkuc3RhdHVzPVcpKTppLnN0YXR1cz1XKSwwIT09aS5wZW5kaW5nKXtpZih0dCh0KSwwPT09dC5hdmFpbF9vdXQpcmV0dXJuIGkubGFzdF9mbHVzaD0tMSxffWVsc2UgaWYoMD09PXQuYXZhaWxfaW4mJlEoZSk8PVEocikmJmUhPT1mKXJldHVybiBKKHQseSk7aWYoaS5zdGF0dXM9PT1HJiYwIT09dC5hdmFpbF9pbilyZXR1cm4gSih0LHkpO2lmKDAhPT10LmF2YWlsX2lufHwwIT09aS5sb29rYWhlYWR8fGUhPT1jJiZpLnN0YXR1cyE9PUcpe3ZhciBtPWkuc3RyYXRlZ3k9PT1iP3V0KGksZSk6aS5zdHJhdGVneT09PWs/bHQoaSxlKTpuW2kubGV2ZWxdLmZ1bmMoaSxlKTtpZihtIT09ViYmbSE9PVl8fChpLnN0YXR1cz1HKSxtPT09WHx8bT09PVYpcmV0dXJuIDA9PT10LmF2YWlsX291dCYmKGkubGFzdF9mbHVzaD0tMSksXztpZihtPT09cSYmKGU9PT1sP2EuX3RyX2FsaWduKGkpOmUhPT1kJiYoYS5fdHJfc3RvcmVkX2Jsb2NrKGksMCwwLCExKSxlPT09dSYmKFooaS5oZWFkKSwwPT09aS5sb29rYWhlYWQmJihpLnN0cnN0YXJ0PTAsaS5ibG9ja19zdGFydD0wLGkuaW5zZXJ0PTApKSksdHQodCksMD09PXQuYXZhaWxfb3V0KSlyZXR1cm4gaS5sYXN0X2ZsdXNoPS0xLF99cmV0dXJuIGUhPT1mP186aS53cmFwPD0wP3A6KDI9PT1pLndyYXA/KHJ0KGksMjU1JnQuYWRsZXIpLHJ0KGksdC5hZGxlcj4+OCYyNTUpLHJ0KGksdC5hZGxlcj4+MTYmMjU1KSxydChpLHQuYWRsZXI+PjI0JjI1NSkscnQoaSwyNTUmdC50b3RhbF9pbikscnQoaSx0LnRvdGFsX2luPj44JjI1NSkscnQoaSx0LnRvdGFsX2luPj4xNiYyNTUpLHJ0KGksdC50b3RhbF9pbj4+MjQmMjU1KSk6KG50KGksdC5hZGxlcj4+PjE2KSxudChpLDY1NTM1JnQuYWRsZXIpKSx0dCh0KSxpLndyYXA+MCYmKGkud3JhcD0taS53cmFwKSwwIT09aS5wZW5kaW5nP186cCl9ZnVuY3Rpb24gYnQodCl7dmFyIGU7cmV0dXJuIHQmJnQuc3RhdGU/KGU9dC5zdGF0ZS5zdGF0dXMpIT09SSYmZSE9PVAmJmUhPT1UJiZlIT09TiYmZSE9PUsmJmUhPT1XJiZlIT09Rz9KKHQsZyk6KHQuc3RhdGU9bnVsbCxlPT09Vz9KKHQsdik6Xyk6Z31mdW5jdGlvbiBrdCh0LGUpe3ZhciByLG4sYSxzLGgsYyxsLHUsZj1lLmxlbmd0aDtpZighdHx8IXQuc3RhdGUpcmV0dXJuIGc7aWYoMj09PShzPShyPXQuc3RhdGUpLndyYXApfHwxPT09cyYmci5zdGF0dXMhPT1JfHxyLmxvb2thaGVhZClyZXR1cm4gZztmb3IoMT09PXMmJih0LmFkbGVyPW8odC5hZGxlcixlLGYsMCkpLHIud3JhcD0wLGY+PXIud19zaXplJiYoMD09PXMmJihaKHIuaGVhZCksci5zdHJzdGFydD0wLHIuYmxvY2tfc3RhcnQ9MCxyLmluc2VydD0wKSx1PW5ldyBpLkJ1Zjgoci53X3NpemUpLGkuYXJyYXlTZXQodSxlLGYtci53X3NpemUsci53X3NpemUsMCksZT11LGY9ci53X3NpemUpLGg9dC5hdmFpbF9pbixjPXQubmV4dF9pbixsPXQuaW5wdXQsdC5hdmFpbF9pbj1mLHQubmV4dF9pbj0wLHQuaW5wdXQ9ZSxvdChyKTtyLmxvb2thaGVhZD49TTspe249ci5zdHJzdGFydCxhPXIubG9va2FoZWFkLShNLTEpO2Rve3IuaW5zX2g9KHIuaW5zX2g8PHIuaGFzaF9zaGlmdF5yLndpbmRvd1tuK00tMV0pJnIuaGFzaF9tYXNrLHIucHJldltuJnIud19tYXNrXT1yLmhlYWRbci5pbnNfaF0sci5oZWFkW3IuaW5zX2hdPW4sbisrfXdoaWxlKC0tYSk7ci5zdHJzdGFydD1uLHIubG9va2FoZWFkPU0tMSxvdChyKX1yZXR1cm4gci5zdHJzdGFydCs9ci5sb29rYWhlYWQsci5ibG9ja19zdGFydD1yLnN0cnN0YXJ0LHIuaW5zZXJ0PXIubG9va2FoZWFkLHIubG9va2FoZWFkPTAsci5tYXRjaF9sZW5ndGg9ci5wcmV2X2xlbmd0aD1NLTEsci5tYXRjaF9hdmFpbGFibGU9MCx0Lm5leHRfaW49Yyx0LmlucHV0PWwsdC5hdmFpbF9pbj1oLHIud3JhcD1zLF99bj1bbmV3IGZ0KDAsMCwwLDAsc3QpLG5ldyBmdCg0LDQsOCw0LGh0KSxuZXcgZnQoNCw1LDE2LDgsaHQpLG5ldyBmdCg0LDYsMzIsMzIsaHQpLG5ldyBmdCg0LDQsMTYsMTYsY3QpLG5ldyBmdCg4LDE2LDMyLDMyLGN0KSxuZXcgZnQoOCwxNiwxMjgsMTI4LGN0KSxuZXcgZnQoOCwzMiwxMjgsMjU2LGN0KSxuZXcgZnQoMzIsMTI4LDI1OCwxMDI0LGN0KSxuZXcgZnQoMzIsMjU4LDI1OCw0MDk2LGN0KV0sci5kZWZsYXRlSW5pdD1tdCxyLmRlZmxhdGVJbml0Mj15dCxyLmRlZmxhdGVSZXNldD1ndCxyLmRlZmxhdGVSZXNldEtlZXA9cHQsci5kZWZsYXRlU2V0SGVhZGVyPXZ0LHIuZGVmbGF0ZT13dCxyLmRlZmxhdGVFbmQ9YnQsci5kZWZsYXRlU2V0RGljdGlvbmFyeT1rdCxyLmRlZmxhdGVJbmZvPSJwYWtvIGRlZmxhdGUgKGZyb20gTm9kZWNhIHByb2plY3QpIn0seyIuLi91dGlscy9jb21tb24iOjEsIi4vYWRsZXIzMiI6MywiLi9jcmMzMiI6NCwiLi9tZXNzYWdlcyI6NiwiLi90cmVlcyI6N31dLDY6W2Z1bmN0aW9uKHQsZSxyKXtlLmV4cG9ydHM9ezI6Im5lZWQgZGljdGlvbmFyeSIsMToic3RyZWFtIGVuZCIsMDoiIiwiLTEiOiJmaWxlIGVycm9yIiwiLTIiOiJzdHJlYW0gZXJyb3IiLCItMyI6ImRhdGEgZXJyb3IiLCItNCI6Imluc3VmZmljaWVudCBtZW1vcnkiLCItNSI6ImJ1ZmZlciBlcnJvciIsIi02IjoiaW5jb21wYXRpYmxlIHZlcnNpb24ifX0se31dLDc6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj10KCIuLi91dGlscy9jb21tb24iKSxpPTQsYT0wLG89MSxzPTI7ZnVuY3Rpb24gaCh0KXtmb3IodmFyIGU9dC5sZW5ndGg7LS1lPj0wOyl0W2VdPTB9dmFyIGM9MCxsPTEsdT0yLGY9MyxkPTI1OCxfPTI5LHA9MjU2LGc9cCsxK18sdj0zMCx5PTE5LG09MipnKzEsdz0xNSxiPTE2LGs9Nyx4PTI1Nix6PTE2LEI9MTcsQT0xOCxTPVswLDAsMCwwLDAsMCwwLDAsMSwxLDEsMSwyLDIsMiwyLDMsMywzLDMsNCw0LDQsNCw1LDUsNSw1LDBdLEU9WzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTNdLEM9WzAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMiwzLDddLE89WzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdLEQ9NTEyLEg9bmV3IEFycmF5KDIqKGcrMikpO2goSCk7dmFyIEw9bmV3IEFycmF5KDIqdik7aChMKTt2YXIgaj1uZXcgQXJyYXkoRCk7aChqKTt2YXIgTT1uZXcgQXJyYXkoZC1mKzEpO2goTSk7dmFyIFU9bmV3IEFycmF5KF8pO2goVSk7dmFyIFIsRixJLFA9bmV3IEFycmF5KHYpO2Z1bmN0aW9uIFQodCxlLHIsbixpKXt0aGlzLnN0YXRpY190cmVlPXQsdGhpcy5leHRyYV9iaXRzPWUsdGhpcy5leHRyYV9iYXNlPXIsdGhpcy5lbGVtcz1uLHRoaXMubWF4X2xlbmd0aD1pLHRoaXMuaGFzX3N0cmVlPXQmJnQubGVuZ3RofWZ1bmN0aW9uIE4odCxlKXt0aGlzLmR5bl90cmVlPXQsdGhpcy5tYXhfY29kZT0wLHRoaXMuc3RhdF9kZXNjPWV9ZnVuY3Rpb24gSyh0KXtyZXR1cm4gdDwyNTY/alt0XTpqWzI1NisodD4+PjcpXX1mdW5jdGlvbiBXKHQsZSl7dC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109MjU1JmUsdC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109ZT4+PjgmMjU1fWZ1bmN0aW9uIEcodCxlLHIpe3QuYmlfdmFsaWQ+Yi1yPyh0LmJpX2J1Znw9ZTw8dC5iaV92YWxpZCY2NTUzNSxXKHQsdC5iaV9idWYpLHQuYmlfYnVmPWU+PmItdC5iaV92YWxpZCx0LmJpX3ZhbGlkKz1yLWIpOih0LmJpX2J1Znw9ZTw8dC5iaV92YWxpZCY2NTUzNSx0LmJpX3ZhbGlkKz1yKX1mdW5jdGlvbiBYKHQsZSxyKXtHKHQsclsyKmVdLHJbMiplKzFdKX1mdW5jdGlvbiBxKHQsZSl7dmFyIHI9MDtkb3tyfD0xJnQsdD4+Pj0xLHI8PD0xfXdoaWxlKC0tZT4wKTtyZXR1cm4gcj4+PjF9ZnVuY3Rpb24gVih0KXsxNj09PXQuYmlfdmFsaWQ/KFcodCx0LmJpX2J1ZiksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTApOnQuYmlfdmFsaWQ+PTgmJih0LnBlbmRpbmdfYnVmW3QucGVuZGluZysrXT0yNTUmdC5iaV9idWYsdC5iaV9idWY+Pj04LHQuYmlfdmFsaWQtPTgpfWZ1bmN0aW9uIFkodCxlKXt2YXIgcixuLGksYSxvLHMsaD1lLmR5bl90cmVlLGM9ZS5tYXhfY29kZSxsPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLHU9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLGY9ZS5zdGF0X2Rlc2MuZXh0cmFfYml0cyxkPWUuc3RhdF9kZXNjLmV4dHJhX2Jhc2UsXz1lLnN0YXRfZGVzYy5tYXhfbGVuZ3RoLHA9MDtmb3IoYT0wO2E8PXc7YSsrKXQuYmxfY291bnRbYV09MDtmb3IoaFsyKnQuaGVhcFt0LmhlYXBfbWF4XSsxXT0wLHI9dC5oZWFwX21heCsxO3I8bTtyKyspKGE9aFsyKmhbMioobj10LmhlYXBbcl0pKzFdKzFdKzEpPl8mJihhPV8scCsrKSxoWzIqbisxXT1hLG4+Y3x8KHQuYmxfY291bnRbYV0rKyxvPTAsbj49ZCYmKG89ZltuLWRdKSxzPWhbMipuXSx0Lm9wdF9sZW4rPXMqKGErbyksdSYmKHQuc3RhdGljX2xlbis9cyoobFsyKm4rMV0rbykpKTtpZigwIT09cCl7ZG97Zm9yKGE9Xy0xOzA9PT10LmJsX2NvdW50W2FdOylhLS07dC5ibF9jb3VudFthXS0tLHQuYmxfY291bnRbYSsxXSs9Mix0LmJsX2NvdW50W19dLS0scC09Mn13aGlsZShwPjApO2ZvcihhPV87MCE9PWE7YS0tKWZvcihuPXQuYmxfY291bnRbYV07MCE9PW47KShpPXQuaGVhcFstLXJdKT5jfHwoaFsyKmkrMV0hPT1hJiYodC5vcHRfbGVuKz0oYS1oWzIqaSsxXSkqaFsyKmldLGhbMippKzFdPWEpLG4tLSl9fWZ1bmN0aW9uICQodCxlLHIpe3ZhciBuLGksYT1uZXcgQXJyYXkodysxKSxvPTA7Zm9yKG49MTtuPD13O24rKylhW25dPW89bytyW24tMV08PDE7Zm9yKGk9MDtpPD1lO2krKyl7dmFyIHM9dFsyKmkrMV07MCE9PXMmJih0WzIqaV09cShhW3NdKysscykpfX1mdW5jdGlvbiBKKCl7dmFyIHQsZSxyLG4saSxhPW5ldyBBcnJheSh3KzEpO2ZvcihyPTAsbj0wO248Xy0xO24rKylmb3IoVVtuXT1yLHQ9MDt0PDE8PFNbbl07dCsrKU1bcisrXT1uO2ZvcihNW3ItMV09bixpPTAsbj0wO248MTY7bisrKWZvcihQW25dPWksdD0wO3Q8MTw8RVtuXTt0KyspaltpKytdPW47Zm9yKGk+Pj03O248djtuKyspZm9yKFBbbl09aTw8Nyx0PTA7dDwxPDxFW25dLTc7dCsrKWpbMjU2K2krK109bjtmb3IoZT0wO2U8PXc7ZSsrKWFbZV09MDtmb3IodD0wO3Q8PTE0MzspSFsyKnQrMV09OCx0KyssYVs4XSsrO2Zvcig7dDw9MjU1OylIWzIqdCsxXT05LHQrKyxhWzldKys7Zm9yKDt0PD0yNzk7KUhbMip0KzFdPTcsdCsrLGFbN10rKztmb3IoO3Q8PTI4NzspSFsyKnQrMV09OCx0KyssYVs4XSsrO2ZvcigkKEgsZysxLGEpLHQ9MDt0PHY7dCsrKUxbMip0KzFdPTUsTFsyKnRdPXEodCw1KTtSPW5ldyBUKEgsUyxwKzEsZyx3KSxGPW5ldyBUKEwsRSwwLHYsdyksST1uZXcgVChuZXcgQXJyYXkoMCksQywwLHksayl9ZnVuY3Rpb24gUSh0KXt2YXIgZTtmb3IoZT0wO2U8ZztlKyspdC5keW5fbHRyZWVbMiplXT0wO2ZvcihlPTA7ZTx2O2UrKyl0LmR5bl9kdHJlZVsyKmVdPTA7Zm9yKGU9MDtlPHk7ZSsrKXQuYmxfdHJlZVsyKmVdPTA7dC5keW5fbHRyZWVbMip4XT0xLHQub3B0X2xlbj10LnN0YXRpY19sZW49MCx0Lmxhc3RfbGl0PXQubWF0Y2hlcz0wfWZ1bmN0aW9uIFoodCl7dC5iaV92YWxpZD44P1codCx0LmJpX2J1Zik6dC5iaV92YWxpZD4wJiYodC5wZW5kaW5nX2J1Zlt0LnBlbmRpbmcrK109dC5iaV9idWYpLHQuYmlfYnVmPTAsdC5iaV92YWxpZD0wfWZ1bmN0aW9uIHR0KHQsZSxyLGkpe1oodCksaSYmKFcodCxyKSxXKHQsfnIpKSxuLmFycmF5U2V0KHQucGVuZGluZ19idWYsdC53aW5kb3csZSxyLHQucGVuZGluZyksdC5wZW5kaW5nKz1yfWZ1bmN0aW9uIGV0KHQsZSxyLG4pe3ZhciBpPTIqZSxhPTIqcjtyZXR1cm4gdFtpXTx0W2FdfHx0W2ldPT09dFthXSYmbltlXTw9bltyXX1mdW5jdGlvbiBydCh0LGUscil7Zm9yKHZhciBuPXQuaGVhcFtyXSxpPXI8PDE7aTw9dC5oZWFwX2xlbiYmKGk8dC5oZWFwX2xlbiYmZXQoZSx0LmhlYXBbaSsxXSx0LmhlYXBbaV0sdC5kZXB0aCkmJmkrKywhZXQoZSxuLHQuaGVhcFtpXSx0LmRlcHRoKSk7KXQuaGVhcFtyXT10LmhlYXBbaV0scj1pLGk8PD0xO3QuaGVhcFtyXT1ufWZ1bmN0aW9uIG50KHQsZSxyKXt2YXIgbixpLGEsbyxzPTA7aWYoMCE9PXQubGFzdF9saXQpZG97bj10LnBlbmRpbmdfYnVmW3QuZF9idWYrMipzXTw8OHx0LnBlbmRpbmdfYnVmW3QuZF9idWYrMipzKzFdLGk9dC5wZW5kaW5nX2J1Zlt0LmxfYnVmK3NdLHMrKywwPT09bj9YKHQsaSxlKTooWCh0LChhPU1baV0pK3ArMSxlKSwwIT09KG89U1thXSkmJkcodCxpLT1VW2FdLG8pLFgodCxhPUsoLS1uKSxyKSwwIT09KG89RVthXSkmJkcodCxuLT1QW2FdLG8pKX13aGlsZShzPHQubGFzdF9saXQpO1godCx4LGUpfWZ1bmN0aW9uIGl0KHQsZSl7dmFyIHIsbixpLGE9ZS5keW5fdHJlZSxvPWUuc3RhdF9kZXNjLnN0YXRpY190cmVlLHM9ZS5zdGF0X2Rlc2MuaGFzX3N0cmVlLGg9ZS5zdGF0X2Rlc2MuZWxlbXMsYz0tMTtmb3IodC5oZWFwX2xlbj0wLHQuaGVhcF9tYXg9bSxyPTA7cjxoO3IrKykwIT09YVsyKnJdPyh0LmhlYXBbKyt0LmhlYXBfbGVuXT1jPXIsdC5kZXB0aFtyXT0wKTphWzIqcisxXT0wO2Zvcig7dC5oZWFwX2xlbjwyOylhWzIqKGk9dC5oZWFwWysrdC5oZWFwX2xlbl09YzwyPysrYzowKV09MSx0LmRlcHRoW2ldPTAsdC5vcHRfbGVuLS0scyYmKHQuc3RhdGljX2xlbi09b1syKmkrMV0pO2ZvcihlLm1heF9jb2RlPWMscj10LmhlYXBfbGVuPj4xO3I+PTE7ci0tKXJ0KHQsYSxyKTtpPWg7ZG97cj10LmhlYXBbMV0sdC5oZWFwWzFdPXQuaGVhcFt0LmhlYXBfbGVuLS1dLHJ0KHQsYSwxKSxuPXQuaGVhcFsxXSx0LmhlYXBbLS10LmhlYXBfbWF4XT1yLHQuaGVhcFstLXQuaGVhcF9tYXhdPW4sYVsyKmldPWFbMipyXSthWzIqbl0sdC5kZXB0aFtpXT0odC5kZXB0aFtyXT49dC5kZXB0aFtuXT90LmRlcHRoW3JdOnQuZGVwdGhbbl0pKzEsYVsyKnIrMV09YVsyKm4rMV09aSx0LmhlYXBbMV09aSsrLHJ0KHQsYSwxKX13aGlsZSh0LmhlYXBfbGVuPj0yKTt0LmhlYXBbLS10LmhlYXBfbWF4XT10LmhlYXBbMV0sWSh0LGUpLCQoYSxjLHQuYmxfY291bnQpfWZ1bmN0aW9uIGF0KHQsZSxyKXt2YXIgbixpLGE9LTEsbz1lWzFdLHM9MCxoPTcsYz00O2ZvcigwPT09byYmKGg9MTM4LGM9MyksZVsyKihyKzEpKzFdPTY1NTM1LG49MDtuPD1yO24rKylpPW8sbz1lWzIqKG4rMSkrMV0sKytzPGgmJmk9PT1vfHwoczxjP3QuYmxfdHJlZVsyKmldKz1zOjAhPT1pPyhpIT09YSYmdC5ibF90cmVlWzIqaV0rKyx0LmJsX3RyZWVbMip6XSsrKTpzPD0xMD90LmJsX3RyZWVbMipCXSsrOnQuYmxfdHJlZVsyKkFdKysscz0wLGE9aSwwPT09bz8oaD0xMzgsYz0zKTppPT09bz8oaD02LGM9Myk6KGg9NyxjPTQpKX1mdW5jdGlvbiBvdCh0LGUscil7dmFyIG4saSxhPS0xLG89ZVsxXSxzPTAsaD03LGM9NDtmb3IoMD09PW8mJihoPTEzOCxjPTMpLG49MDtuPD1yO24rKylpZihpPW8sbz1lWzIqKG4rMSkrMV0sISgrK3M8aCYmaT09PW8pKXtpZihzPGMpZG97WCh0LGksdC5ibF90cmVlKX13aGlsZSgwIT0tLXMpO2Vsc2UgMCE9PWk/KGkhPT1hJiYoWCh0LGksdC5ibF90cmVlKSxzLS0pLFgodCx6LHQuYmxfdHJlZSksRyh0LHMtMywyKSk6czw9MTA/KFgodCxCLHQuYmxfdHJlZSksRyh0LHMtMywzKSk6KFgodCxBLHQuYmxfdHJlZSksRyh0LHMtMTEsNykpO3M9MCxhPWksMD09PW8/KGg9MTM4LGM9Myk6aT09PW8/KGg9NixjPTMpOihoPTcsYz00KX19ZnVuY3Rpb24gc3QodCl7dmFyIGU7Zm9yKGF0KHQsdC5keW5fbHRyZWUsdC5sX2Rlc2MubWF4X2NvZGUpLGF0KHQsdC5keW5fZHRyZWUsdC5kX2Rlc2MubWF4X2NvZGUpLGl0KHQsdC5ibF9kZXNjKSxlPXktMTtlPj0zJiYwPT09dC5ibF90cmVlWzIqT1tlXSsxXTtlLS0pO3JldHVybiB0Lm9wdF9sZW4rPTMqKGUrMSkrNSs1KzQsZX1mdW5jdGlvbiBodCh0LGUscixuKXt2YXIgaTtmb3IoRyh0LGUtMjU3LDUpLEcodCxyLTEsNSksRyh0LG4tNCw0KSxpPTA7aTxuO2krKylHKHQsdC5ibF90cmVlWzIqT1tpXSsxXSwzKTtvdCh0LHQuZHluX2x0cmVlLGUtMSksb3QodCx0LmR5bl9kdHJlZSxyLTEpfWZ1bmN0aW9uIGN0KHQpe3ZhciBlLHI9NDA5MzYyNDQ0Nztmb3IoZT0wO2U8PTMxO2UrKyxyPj4+PTEpaWYoMSZyJiYwIT09dC5keW5fbHRyZWVbMiplXSlyZXR1cm4gYTtpZigwIT09dC5keW5fbHRyZWVbMThdfHwwIT09dC5keW5fbHRyZWVbMjBdfHwwIT09dC5keW5fbHRyZWVbMjZdKXJldHVybiBvO2ZvcihlPTMyO2U8cDtlKyspaWYoMCE9PXQuZHluX2x0cmVlWzIqZV0pcmV0dXJuIG87cmV0dXJuIGF9aChQKTt2YXIgbHQ9ITE7ZnVuY3Rpb24gdXQodCl7bHR8fChKKCksbHQ9ITApLHQubF9kZXNjPW5ldyBOKHQuZHluX2x0cmVlLFIpLHQuZF9kZXNjPW5ldyBOKHQuZHluX2R0cmVlLEYpLHQuYmxfZGVzYz1uZXcgTih0LmJsX3RyZWUsSSksdC5iaV9idWY9MCx0LmJpX3ZhbGlkPTAsUSh0KX1mdW5jdGlvbiBmdCh0LGUscixuKXtHKHQsKGM8PDEpKyhuPzE6MCksMyksdHQodCxlLHIsITApfWZ1bmN0aW9uIGR0KHQpe0codCxsPDwxLDMpLFgodCx4LEgpLFYodCl9ZnVuY3Rpb24gX3QodCxlLHIsbil7dmFyIGEsbyxoPTA7dC5sZXZlbD4wPyh0LnN0cm0uZGF0YV90eXBlPT09cyYmKHQuc3RybS5kYXRhX3R5cGU9Y3QodCkpLGl0KHQsdC5sX2Rlc2MpLGl0KHQsdC5kX2Rlc2MpLGg9c3QodCksYT10Lm9wdF9sZW4rMys3Pj4+Mywobz10LnN0YXRpY19sZW4rMys3Pj4+Myk8PWEmJihhPW8pKTphPW89cis1LHIrNDw9YSYmLTEhPT1lP2Z0KHQsZSxyLG4pOnQuc3RyYXRlZ3k9PT1pfHxvPT09YT8oRyh0LChsPDwxKSsobj8xOjApLDMpLG50KHQsSCxMKSk6KEcodCwodTw8MSkrKG4/MTowKSwzKSxodCh0LHQubF9kZXNjLm1heF9jb2RlKzEsdC5kX2Rlc2MubWF4X2NvZGUrMSxoKzEpLG50KHQsdC5keW5fbHRyZWUsdC5keW5fZHRyZWUpKSxRKHQpLG4mJloodCl9ZnVuY3Rpb24gcHQodCxlLHIpe3JldHVybiB0LnBlbmRpbmdfYnVmW3QuZF9idWYrMip0Lmxhc3RfbGl0XT1lPj4+OCYyNTUsdC5wZW5kaW5nX2J1Zlt0LmRfYnVmKzIqdC5sYXN0X2xpdCsxXT0yNTUmZSx0LnBlbmRpbmdfYnVmW3QubF9idWYrdC5sYXN0X2xpdF09MjU1JnIsdC5sYXN0X2xpdCsrLDA9PT1lP3QuZHluX2x0cmVlWzIqcl0rKzoodC5tYXRjaGVzKyssZS0tLHQuZHluX2x0cmVlWzIqKE1bcl0rcCsxKV0rKyx0LmR5bl9kdHJlZVsyKksoZSldKyspLHQubGFzdF9saXQ9PT10LmxpdF9idWZzaXplLTF9ci5fdHJfaW5pdD11dCxyLl90cl9zdG9yZWRfYmxvY2s9ZnQsci5fdHJfZmx1c2hfYmxvY2s9X3Qsci5fdHJfdGFsbHk9cHQsci5fdHJfYWxpZ249ZHR9LHsiLi4vdXRpbHMvY29tbW9uIjoxfV0sODpbZnVuY3Rpb24odCxlLHIpe2Z1bmN0aW9uIG4oKXt0aGlzLmlucHV0PW51bGwsdGhpcy5uZXh0X2luPTAsdGhpcy5hdmFpbF9pbj0wLHRoaXMudG90YWxfaW49MCx0aGlzLm91dHB1dD1udWxsLHRoaXMubmV4dF9vdXQ9MCx0aGlzLmF2YWlsX291dD0wLHRoaXMudG90YWxfb3V0PTAsdGhpcy5tc2c9IiIsdGhpcy5zdGF0ZT1udWxsLHRoaXMuZGF0YV90eXBlPTIsdGhpcy5hZGxlcj0wfWUuZXhwb3J0cz1ufSx7fV0sIi9saWIvZGVmbGF0ZS5qcyI6W2Z1bmN0aW9uKHQsZSxyKXt2YXIgbj10KCIuL3psaWIvZGVmbGF0ZSIpLGk9dCgiLi91dGlscy9jb21tb24iKSxhPXQoIi4vdXRpbHMvc3RyaW5ncyIpLG89dCgiLi96bGliL21lc3NhZ2VzIikscz10KCIuL3psaWIvenN0cmVhbSIpLGg9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxjPTAsbD00LHU9MCxmPTEsZD0yLF89LTEscD0wLGc9ODtmdW5jdGlvbiB2KHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHYpKXJldHVybiBuZXcgdih0KTt0aGlzLm9wdGlvbnM9aS5hc3NpZ24oe2xldmVsOl8sbWV0aG9kOmcsY2h1bmtTaXplOjE2Mzg0LHdpbmRvd0JpdHM6MTUsbWVtTGV2ZWw6OCxzdHJhdGVneTpwLHRvOiIifSx0fHx7fSk7dmFyIGU9dGhpcy5vcHRpb25zO2UucmF3JiZlLndpbmRvd0JpdHM+MD9lLndpbmRvd0JpdHM9LWUud2luZG93Qml0czplLmd6aXAmJmUud2luZG93Qml0cz4wJiZlLndpbmRvd0JpdHM8MTYmJihlLndpbmRvd0JpdHMrPTE2KSx0aGlzLmVycj0wLHRoaXMubXNnPSIiLHRoaXMuZW5kZWQ9ITEsdGhpcy5jaHVua3M9W10sdGhpcy5zdHJtPW5ldyBzLHRoaXMuc3RybS5hdmFpbF9vdXQ9MDt2YXIgcj1uLmRlZmxhdGVJbml0Mih0aGlzLnN0cm0sZS5sZXZlbCxlLm1ldGhvZCxlLndpbmRvd0JpdHMsZS5tZW1MZXZlbCxlLnN0cmF0ZWd5KTtpZihyIT09dSl0aHJvdyBuZXcgRXJyb3Iob1tyXSk7aWYoZS5oZWFkZXImJm4uZGVmbGF0ZVNldEhlYWRlcih0aGlzLnN0cm0sZS5oZWFkZXIpLGUuZGljdGlvbmFyeSl7dmFyIGM7aWYoYz0ic3RyaW5nIj09dHlwZW9mIGUuZGljdGlvbmFyeT9hLnN0cmluZzJidWYoZS5kaWN0aW9uYXJ5KToiW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09aC5jYWxsKGUuZGljdGlvbmFyeSk/bmV3IFVpbnQ4QXJyYXkoZS5kaWN0aW9uYXJ5KTplLmRpY3Rpb25hcnksKHI9bi5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sYykpIT09dSl0aHJvdyBuZXcgRXJyb3Iob1tyXSk7dGhpcy5fZGljdF9zZXQ9ITB9fWZ1bmN0aW9uIHkodCxlKXt2YXIgcj1uZXcgdihlKTtpZihyLnB1c2godCwhMCksci5lcnIpdGhyb3cgci5tc2d8fG9bci5lcnJdO3JldHVybiByLnJlc3VsdH1mdW5jdGlvbiBtKHQsZSl7cmV0dXJuKGU9ZXx8e30pLnJhdz0hMCx5KHQsZSl9ZnVuY3Rpb24gdyh0LGUpe3JldHVybihlPWV8fHt9KS5nemlwPSEwLHkodCxlKX12LnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbyxzPXRoaXMuc3RybSxfPXRoaXMub3B0aW9ucy5jaHVua1NpemU7aWYodGhpcy5lbmRlZClyZXR1cm4hMTtvPWU9PT1+fmU/ZTohMD09PWU/bDpjLCJzdHJpbmciPT10eXBlb2YgdD9zLmlucHV0PWEuc3RyaW5nMmJ1Zih0KToiW29iamVjdCBBcnJheUJ1ZmZlcl0iPT09aC5jYWxsKHQpP3MuaW5wdXQ9bmV3IFVpbnQ4QXJyYXkodCk6cy5pbnB1dD10LHMubmV4dF9pbj0wLHMuYXZhaWxfaW49cy5pbnB1dC5sZW5ndGg7ZG97aWYoMD09PXMuYXZhaWxfb3V0JiYocy5vdXRwdXQ9bmV3IGkuQnVmOChfKSxzLm5leHRfb3V0PTAscy5hdmFpbF9vdXQ9XyksKHI9bi5kZWZsYXRlKHMsbykpIT09ZiYmciE9PXUpcmV0dXJuIHRoaXMub25FbmQociksdGhpcy5lbmRlZD0hMCwhMTswIT09cy5hdmFpbF9vdXQmJigwIT09cy5hdmFpbF9pbnx8byE9PWwmJm8hPT1kKXx8KCJzdHJpbmciPT09dGhpcy5vcHRpb25zLnRvP3RoaXMub25EYXRhKGEuYnVmMmJpbnN0cmluZyhpLnNocmlua0J1ZihzLm91dHB1dCxzLm5leHRfb3V0KSkpOnRoaXMub25EYXRhKGkuc2hyaW5rQnVmKHMub3V0cHV0LHMubmV4dF9vdXQpKSl9d2hpbGUoKHMuYXZhaWxfaW4+MHx8MD09PXMuYXZhaWxfb3V0KSYmciE9PWYpO3JldHVybiBvPT09bD8ocj1uLmRlZmxhdGVFbmQodGhpcy5zdHJtKSx0aGlzLm9uRW5kKHIpLHRoaXMuZW5kZWQ9ITAscj09PXUpOm8hPT1kfHwodGhpcy5vbkVuZCh1KSxzLmF2YWlsX291dD0wLCEwKX0sdi5wcm90b3R5cGUub25EYXRhPWZ1bmN0aW9uKHQpe3RoaXMuY2h1bmtzLnB1c2godCl9LHYucHJvdG90eXBlLm9uRW5kPWZ1bmN0aW9uKHQpe3Q9PT11JiYoInN0cmluZyI9PT10aGlzLm9wdGlvbnMudG8/dGhpcy5yZXN1bHQ9dGhpcy5jaHVua3Muam9pbigiIik6dGhpcy5yZXN1bHQ9aS5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKSksdGhpcy5jaHVua3M9W10sdGhpcy5lcnI9dCx0aGlzLm1zZz10aGlzLnN0cm0ubXNnfSxyLkRlZmxhdGU9dixyLmRlZmxhdGU9eSxyLmRlZmxhdGVSYXc9bSxyLmd6aXA9d30seyIuL3V0aWxzL2NvbW1vbiI6MSwiLi91dGlscy9zdHJpbmdzIjoyLCIuL3psaWIvZGVmbGF0ZSI6NSwiLi96bGliL21lc3NhZ2VzIjo2LCIuL3psaWIvenN0cmVhbSI6OH1dfSx7fSxbXSkoIi9saWIvZGVmbGF0ZS5qcyIpfSkpLGw9cyhPYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbH0pKSx1PW8oKGZ1bmN0aW9uKHQsZSl7dmFyIHI7dC5leHBvcnRzPShyPXJ8fGZ1bmN0aW9uKHQsZSl7dmFyIHI7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5jcnlwdG8mJihyPXdpbmRvdy5jcnlwdG8pLCFyJiYidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lm1zQ3J5cHRvJiYocj13aW5kb3cubXNDcnlwdG8pLCFyJiZ2b2lkIDAhPT1hJiZhLmNyeXB0byYmKHI9YS5jcnlwdG8pLCFyKXRyeXtyPWx9Y2F0Y2godCl7fXZhciBuPWZ1bmN0aW9uKCl7aWYocil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHIuZ2V0UmFuZG9tVmFsdWVzKXRyeXtyZXR1cm4gci5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXX1jYXRjaCh0KXt9aWYoImZ1bmN0aW9uIj09dHlwZW9mIHIucmFuZG9tQnl0ZXMpdHJ5e3JldHVybiByLnJhbmRvbUJ5dGVzKDQpLnJlYWRJbnQzMkxFKCl9Y2F0Y2godCl7fX10aHJvdyBuZXcgRXJyb3IoIk5hdGl2ZSBjcnlwdG8gbW9kdWxlIGNvdWxkIG5vdCBiZSB1c2VkIHRvIGdldCBzZWN1cmUgcmFuZG9tIG51bWJlci4iKX0saT1PYmplY3QuY3JlYXRlfHxmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByO3JldHVybiB0LnByb3RvdHlwZT1lLHI9bmV3IHQsdC5wcm90b3R5cGU9bnVsbCxyfX0oKSxvPXt9LHM9by5saWI9e30saD1zLkJhc2U9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZT1pKHRoaXMpO3JldHVybiB0JiZlLm1peEluKHQpLGUuaGFzT3duUHJvcGVydHkoImluaXQiKSYmdGhpcy5pbml0IT09ZS5pbml0fHwoZS5pbml0PWZ1bmN0aW9uKCl7ZS4kc3VwZXIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxlLmluaXQucHJvdG90eXBlPWUsZS4kc3VwZXI9dGhpcyxlfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmV4dGVuZCgpO3JldHVybiB0LmluaXQuYXBwbHkodCxhcmd1bWVudHMpLHR9LGluaXQ6ZnVuY3Rpb24oKXt9LG1peEluOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXQuaGFzT3duUHJvcGVydHkoZSkmJih0aGlzW2VdPXRbZV0pO3QuaGFzT3duUHJvcGVydHkoInRvU3RyaW5nIikmJih0aGlzLnRvU3RyaW5nPXQudG9TdHJpbmcpfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKX19LGM9cy5Xb3JkQXJyYXk9aC5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCxyKXt0PXRoaXMud29yZHM9dHx8W10sdGhpcy5zaWdCeXRlcz1yIT1lP3I6NCp0Lmxlbmd0aH0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKHR8fGYpLnN0cmluZ2lmeSh0aGlzKX0sY29uY2F0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMud29yZHMscj10LndvcmRzLG49dGhpcy5zaWdCeXRlcyxpPXQuc2lnQnl0ZXM7aWYodGhpcy5jbGFtcCgpLG4lNClmb3IodmFyIGE9MDthPGk7YSsrKXt2YXIgbz1yW2E+Pj4yXT4+PjI0LWElNCo4JjI1NTtlW24rYT4+PjJdfD1vPDwyNC0obithKSU0Kjh9ZWxzZSBmb3IoYT0wO2E8aTthKz00KWVbbithPj4+Ml09clthPj4+Ml07cmV0dXJuIHRoaXMuc2lnQnl0ZXMrPWksdGhpc30sY2xhbXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLndvcmRzLHI9dGhpcy5zaWdCeXRlcztlW3I+Pj4yXSY9NDI5NDk2NzI5NTw8MzItciU0KjgsZS5sZW5ndGg9dC5jZWlsKHIvNCl9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9aC5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0LndvcmRzPXRoaXMud29yZHMuc2xpY2UoMCksdH0scmFuZG9tOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0O3IrPTQpZS5wdXNoKG4oKSk7cmV0dXJuIG5ldyBjLmluaXQoZSx0KX19KSx1PW8uZW5jPXt9LGY9dS5IZXg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxpPTA7aTxyO2krKyl7dmFyIGE9ZVtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTU7bi5wdXNoKChhPj4+NCkudG9TdHJpbmcoMTYpKSxuLnB1c2goKDE1JmEpLnRvU3RyaW5nKDE2KSl9cmV0dXJuIG4uam9pbigiIil9LHBhcnNlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxyPVtdLG49MDtuPGU7bis9MilyW24+Pj4zXXw9cGFyc2VJbnQodC5zdWJzdHIobiwyKSwxNik8PDI0LW4lOCo0O3JldHVybiBuZXcgYy5pbml0KHIsZS8yKX19LGQ9dS5MYXRpbjE9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC53b3JkcyxyPXQuc2lnQnl0ZXMsbj1bXSxpPTA7aTxyO2krKyl7dmFyIGE9ZVtpPj4+Ml0+Pj4yNC1pJTQqOCYyNTU7bi5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoYSkpfXJldHVybiBuLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dC5sZW5ndGgscj1bXSxuPTA7bjxlO24rKylyW24+Pj4yXXw9KDI1NSZ0LmNoYXJDb2RlQXQobikpPDwyNC1uJTQqODtyZXR1cm4gbmV3IGMuaW5pdChyLGUpfX0sXz11LlV0Zjg9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZC5zdHJpbmdpZnkodCkpKX1jYXRjaCh0KXt0aHJvdyBuZXcgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIil9fSxwYXJzZTpmdW5jdGlvbih0KXtyZXR1cm4gZC5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQodCkpKX19LHA9cy5CdWZmZXJlZEJsb2NrQWxnb3JpdGhtPWguZXh0ZW5kKHtyZXNldDpmdW5jdGlvbigpe3RoaXMuX2RhdGE9bmV3IGMuaW5pdCx0aGlzLl9uRGF0YUJ5dGVzPTB9LF9hcHBlbmQ6ZnVuY3Rpb24odCl7InN0cmluZyI9PXR5cGVvZiB0JiYodD1fLnBhcnNlKHQpKSx0aGlzLl9kYXRhLmNvbmNhdCh0KSx0aGlzLl9uRGF0YUJ5dGVzKz10LnNpZ0J5dGVzfSxfcHJvY2VzczpmdW5jdGlvbihlKXt2YXIgcixuPXRoaXMuX2RhdGEsaT1uLndvcmRzLGE9bi5zaWdCeXRlcyxvPXRoaXMuYmxvY2tTaXplLHM9YS8oNCpvKSxoPShzPWU/dC5jZWlsKHMpOnQubWF4KCgwfHMpLXRoaXMuX21pbkJ1ZmZlclNpemUsMCkpKm8sbD10Lm1pbig0KmgsYSk7aWYoaCl7Zm9yKHZhciB1PTA7dTxoO3UrPW8pdGhpcy5fZG9Qcm9jZXNzQmxvY2soaSx1KTtyPWkuc3BsaWNlKDAsaCksbi5zaWdCeXRlcy09bH1yZXR1cm4gbmV3IGMuaW5pdChyLGwpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciB0PWguY2xvbmUuY2FsbCh0aGlzKTtyZXR1cm4gdC5fZGF0YT10aGlzLl9kYXRhLmNsb25lKCksdH0sX21pbkJ1ZmZlclNpemU6MH0pLGc9KHMuSGFzaGVyPXAuZXh0ZW5kKHtjZmc6aC5leHRlbmQoKSxpbml0OmZ1bmN0aW9uKHQpe3RoaXMuY2ZnPXRoaXMuY2ZnLmV4dGVuZCh0KSx0aGlzLnJlc2V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7cC5yZXNldC5jYWxsKHRoaXMpLHRoaXMuX2RvUmVzZXQoKX0sdXBkYXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hcHBlbmQodCksdGhpcy5fcHJvY2VzcygpLHRoaXN9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxibG9ja1NpemU6MTYsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHQuaW5pdChyKS5maW5hbGl6ZShlKX19LF9jcmVhdGVIbWFjSGVscGVyOmZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLHIpe3JldHVybiBuZXcgZy5ITUFDLmluaXQodCxyKS5maW5hbGl6ZShlKX19fSksby5hbGdvPXt9KTtyZXR1cm4gb30oTWF0aCkscil9KSksZj1vKChmdW5jdGlvbih0LGUpe3ZhciByO3QuZXhwb3J0cz0ocj11LGZ1bmN0aW9uKCl7dmFyIHQ9cixlPXQubGliLldvcmRBcnJheTtmdW5jdGlvbiBuKHQscixuKXtmb3IodmFyIGk9W10sYT0wLG89MDtvPHI7bysrKWlmKG8lNCl7dmFyIHM9blt0LmNoYXJDb2RlQXQoby0xKV08PG8lNCoyfG5bdC5jaGFyQ29kZUF0KG8pXT4+PjYtbyU0KjI7aVthPj4+Ml18PXM8PDI0LWElNCo4LGErK31yZXR1cm4gZS5jcmVhdGUoaSxhKX10LmVuYy5CYXNlNjQ9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt2YXIgZT10LndvcmRzLHI9dC5zaWdCeXRlcyxuPXRoaXMuX21hcDt0LmNsYW1wKCk7Zm9yKHZhciBpPVtdLGE9MDthPHI7YSs9Mylmb3IodmFyIG89KGVbYT4+PjJdPj4+MjQtYSU0KjgmMjU1KTw8MTZ8KGVbYSsxPj4+Ml0+Pj4yNC0oYSsxKSU0KjgmMjU1KTw8OHxlW2ErMj4+PjJdPj4+MjQtKGErMiklNCo4JjI1NSxzPTA7czw0JiZhKy43NSpzPHI7cysrKWkucHVzaChuLmNoYXJBdChvPj4+NiooMy1zKSY2MykpO3ZhciBoPW4uY2hhckF0KDY0KTtpZihoKWZvcig7aS5sZW5ndGglNDspaS5wdXNoKGgpO3JldHVybiBpLmpvaW4oIiIpfSxwYXJzZTpmdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aCxyPXRoaXMuX21hcCxpPXRoaXMuX3JldmVyc2VNYXA7aWYoIWkpe2k9dGhpcy5fcmV2ZXJzZU1hcD1bXTtmb3IodmFyIGE9MDthPHIubGVuZ3RoO2ErKylpW3IuY2hhckNvZGVBdChhKV09YX12YXIgbz1yLmNoYXJBdCg2NCk7aWYobyl7dmFyIHM9dC5pbmRleE9mKG8pOy0xIT09cyYmKGU9cyl9cmV0dXJuIG4odCxlLGkpfSxfbWFwOiJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSJ9fSgpLHIuZW5jLkJhc2U2NCl9KSksZD0obygoZnVuY3Rpb24odCxlKXt2YXIgcjt0LmV4cG9ydHM9KHI9dSxmdW5jdGlvbih0KXt2YXIgZT1yLG49ZS5saWIsaT1uLldvcmRBcnJheSxhPW4uSGFzaGVyLG89ZS5hbGdvLHM9W107IWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTw2NDtlKyspc1tlXT00Mjk0OTY3Mjk2KnQuYWJzKHQuc2luKGUrMSkpfDB9KCk7dmFyIGg9by5NRDU9YS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5faGFzaD1uZXcgaS5pbml0KFsxNzMyNTg0MTkzLDQwMjMyMzM0MTcsMjU2MjM4MzEwMiwyNzE3MzM4NzhdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPTA7cjwxNjtyKyspe3ZhciBuPWUrcixpPXRbbl07dFtuXT0xNjcxMTkzNSYoaTw8OHxpPj4+MjQpfDQyNzgyNTUzNjAmKGk8PDI0fGk+Pj44KX12YXIgYT10aGlzLl9oYXNoLndvcmRzLG89dFtlKzBdLGg9dFtlKzFdLGQ9dFtlKzJdLF89dFtlKzNdLHA9dFtlKzRdLGc9dFtlKzVdLHY9dFtlKzZdLHk9dFtlKzddLG09dFtlKzhdLHc9dFtlKzldLGI9dFtlKzEwXSxrPXRbZSsxMV0seD10W2UrMTJdLHo9dFtlKzEzXSxCPXRbZSsxNF0sQT10W2UrMTVdLFM9YVswXSxFPWFbMV0sQz1hWzJdLE89YVszXTtTPWMoUyxFLEMsTyxvLDcsc1swXSksTz1jKE8sUyxFLEMsaCwxMixzWzFdKSxDPWMoQyxPLFMsRSxkLDE3LHNbMl0pLEU9YyhFLEMsTyxTLF8sMjIsc1szXSksUz1jKFMsRSxDLE8scCw3LHNbNF0pLE89YyhPLFMsRSxDLGcsMTIsc1s1XSksQz1jKEMsTyxTLEUsdiwxNyxzWzZdKSxFPWMoRSxDLE8sUyx5LDIyLHNbN10pLFM9YyhTLEUsQyxPLG0sNyxzWzhdKSxPPWMoTyxTLEUsQyx3LDEyLHNbOV0pLEM9YyhDLE8sUyxFLGIsMTcsc1sxMF0pLEU9YyhFLEMsTyxTLGssMjIsc1sxMV0pLFM9YyhTLEUsQyxPLHgsNyxzWzEyXSksTz1jKE8sUyxFLEMseiwxMixzWzEzXSksQz1jKEMsTyxTLEUsQiwxNyxzWzE0XSksUz1sKFMsRT1jKEUsQyxPLFMsQSwyMixzWzE1XSksQyxPLGgsNSxzWzE2XSksTz1sKE8sUyxFLEMsdiw5LHNbMTddKSxDPWwoQyxPLFMsRSxrLDE0LHNbMThdKSxFPWwoRSxDLE8sUyxvLDIwLHNbMTldKSxTPWwoUyxFLEMsTyxnLDUsc1syMF0pLE89bChPLFMsRSxDLGIsOSxzWzIxXSksQz1sKEMsTyxTLEUsQSwxNCxzWzIyXSksRT1sKEUsQyxPLFMscCwyMCxzWzIzXSksUz1sKFMsRSxDLE8sdyw1LHNbMjRdKSxPPWwoTyxTLEUsQyxCLDksc1syNV0pLEM9bChDLE8sUyxFLF8sMTQsc1syNl0pLEU9bChFLEMsTyxTLG0sMjAsc1syN10pLFM9bChTLEUsQyxPLHosNSxzWzI4XSksTz1sKE8sUyxFLEMsZCw5LHNbMjldKSxDPWwoQyxPLFMsRSx5LDE0LHNbMzBdKSxTPXUoUyxFPWwoRSxDLE8sUyx4LDIwLHNbMzFdKSxDLE8sZyw0LHNbMzJdKSxPPXUoTyxTLEUsQyxtLDExLHNbMzNdKSxDPXUoQyxPLFMsRSxrLDE2LHNbMzRdKSxFPXUoRSxDLE8sUyxCLDIzLHNbMzVdKSxTPXUoUyxFLEMsTyxoLDQsc1szNl0pLE89dShPLFMsRSxDLHAsMTEsc1szN10pLEM9dShDLE8sUyxFLHksMTYsc1szOF0pLEU9dShFLEMsTyxTLGIsMjMsc1szOV0pLFM9dShTLEUsQyxPLHosNCxzWzQwXSksTz11KE8sUyxFLEMsbywxMSxzWzQxXSksQz11KEMsTyxTLEUsXywxNixzWzQyXSksRT11KEUsQyxPLFMsdiwyMyxzWzQzXSksUz11KFMsRSxDLE8sdyw0LHNbNDRdKSxPPXUoTyxTLEUsQyx4LDExLHNbNDVdKSxDPXUoQyxPLFMsRSxBLDE2LHNbNDZdKSxTPWYoUyxFPXUoRSxDLE8sUyxkLDIzLHNbNDddKSxDLE8sbyw2LHNbNDhdKSxPPWYoTyxTLEUsQyx5LDEwLHNbNDldKSxDPWYoQyxPLFMsRSxCLDE1LHNbNTBdKSxFPWYoRSxDLE8sUyxnLDIxLHNbNTFdKSxTPWYoUyxFLEMsTyx4LDYsc1s1Ml0pLE89ZihPLFMsRSxDLF8sMTAsc1s1M10pLEM9ZihDLE8sUyxFLGIsMTUsc1s1NF0pLEU9ZihFLEMsTyxTLGgsMjEsc1s1NV0pLFM9ZihTLEUsQyxPLG0sNixzWzU2XSksTz1mKE8sUyxFLEMsQSwxMCxzWzU3XSksQz1mKEMsTyxTLEUsdiwxNSxzWzU4XSksRT1mKEUsQyxPLFMseiwyMSxzWzU5XSksUz1mKFMsRSxDLE8scCw2LHNbNjBdKSxPPWYoTyxTLEUsQyxrLDEwLHNbNjFdKSxDPWYoQyxPLFMsRSxkLDE1LHNbNjJdKSxFPWYoRSxDLE8sUyx3LDIxLHNbNjNdKSxhWzBdPWFbMF0rU3wwLGFbMV09YVsxXStFfDAsYVsyXT1hWzJdK0N8MCxhWzNdPWFbM10rT3wwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2RhdGEscj1lLndvcmRzLG49OCp0aGlzLl9uRGF0YUJ5dGVzLGk9OCplLnNpZ0J5dGVzO3JbaT4+PjVdfD0xMjg8PDI0LWklMzI7dmFyIGE9dC5mbG9vcihuLzQyOTQ5NjcyOTYpLG89bjtyWzE1KyhpKzY0Pj4+OTw8NCldPTE2NzExOTM1JihhPDw4fGE+Pj4yNCl8NDI3ODI1NTM2MCYoYTw8MjR8YT4+PjgpLHJbMTQrKGkrNjQ+Pj45PDw0KV09MTY3MTE5MzUmKG88PDh8bz4+PjI0KXw0Mjc4MjU1MzYwJihvPDwyNHxvPj4+OCksZS5zaWdCeXRlcz00KihyLmxlbmd0aCsxKSx0aGlzLl9wcm9jZXNzKCk7Zm9yKHZhciBzPXRoaXMuX2hhc2gsaD1zLndvcmRzLGM9MDtjPDQ7YysrKXt2YXIgbD1oW2NdO2hbY109MTY3MTE5MzUmKGw8PDh8bD4+PjI0KXw0Mjc4MjU1MzYwJihsPDwyNHxsPj4+OCl9cmV0dXJuIHN9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9YS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pO2Z1bmN0aW9uIGModCxlLHIsbixpLGEsbyl7dmFyIHM9dCsoZSZyfH5lJm4pK2krbztyZXR1cm4oczw8YXxzPj4+MzItYSkrZX1mdW5jdGlvbiBsKHQsZSxyLG4saSxhLG8pe3ZhciBzPXQrKGUmbnxyJn5uKStpK287cmV0dXJuKHM8PGF8cz4+PjMyLWEpK2V9ZnVuY3Rpb24gdSh0LGUscixuLGksYSxvKXt2YXIgcz10KyhlXnJebikraStvO3JldHVybihzPDxhfHM+Pj4zMi1hKStlfWZ1bmN0aW9uIGYodCxlLHIsbixpLGEsbyl7dmFyIHM9dCsocl4oZXx+bikpK2krbztyZXR1cm4oczw8YXxzPj4+MzItYSkrZX1lLk1ENT1hLl9jcmVhdGVIZWxwZXIoaCksZS5IbWFjTUQ1PWEuX2NyZWF0ZUhtYWNIZWxwZXIoaCl9KE1hdGgpLHIuTUQ1KX0pKSxvKChmdW5jdGlvbih0LGUpe3ZhciByLG4saSxhLG8scyxoLGM7dC5leHBvcnRzPShuPShyPWM9dSkubGliLGk9bi5Xb3JkQXJyYXksYT1uLkhhc2hlcixvPXIuYWxnbyxzPVtdLGg9by5TSEExPWEuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGkuaW5pdChbMTczMjU4NDE5Myw0MDIzMjMzNDE3LDI1NjIzODMxMDIsMjcxNzMzODc4LDMyODUzNzc1MjBdKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMuX2hhc2gud29yZHMsbj1yWzBdLGk9clsxXSxhPXJbMl0sbz1yWzNdLGg9cls0XSxjPTA7Yzw4MDtjKyspe2lmKGM8MTYpc1tjXT0wfHRbZStjXTtlbHNle3ZhciBsPXNbYy0zXV5zW2MtOF1ec1tjLTE0XV5zW2MtMTZdO3NbY109bDw8MXxsPj4+MzF9dmFyIHU9KG48PDV8bj4+PjI3KStoK3NbY107dSs9YzwyMD8xNTE4NTAwMjQ5KyhpJmF8fmkmbyk6Yzw0MD8xODU5Nzc1MzkzKyhpXmFebyk6Yzw2MD8oaSZhfGkmb3xhJm8pLTE4OTQwMDc1ODg6KGleYV5vKS04OTk0OTc1MTQsaD1vLG89YSxhPWk8PDMwfGk+Pj4yLGk9bixuPXV9clswXT1yWzBdK258MCxyWzFdPXJbMV0raXwwLHJbMl09clsyXSthfDAsclszXT1yWzNdK298MCxyWzRdPXJbNF0raHwwfSxfZG9GaW5hbGl6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGEsZT10LndvcmRzLHI9OCp0aGlzLl9uRGF0YUJ5dGVzLG49OCp0LnNpZ0J5dGVzO3JldHVybiBlW24+Pj41XXw9MTI4PDwyNC1uJTMyLGVbMTQrKG4rNjQ+Pj45PDw0KV09TWF0aC5mbG9vcihyLzQyOTQ5NjcyOTYpLGVbMTUrKG4rNjQ+Pj45PDw0KV09cix0LnNpZ0J5dGVzPTQqZS5sZW5ndGgsdGhpcy5fcHJvY2VzcygpLHRoaXMuX2hhc2h9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIHQ9YS5jbG9uZS5jYWxsKHRoaXMpO3JldHVybiB0Ll9oYXNoPXRoaXMuX2hhc2guY2xvbmUoKSx0fX0pLHIuU0hBMT1hLl9jcmVhdGVIZWxwZXIoaCksci5IbWFjU0hBMT1hLl9jcmVhdGVIbWFjSGVscGVyKGgpLGMuU0hBMSl9KSksbygoZnVuY3Rpb24odCxlKXt2YXIgcixuLGk7dC5leHBvcnRzPShuPShyPXUpLmxpYi5CYXNlLGk9ci5lbmMuVXRmOCx2b2lkKHIuYWxnby5ITUFDPW4uZXh0ZW5kKHtpbml0OmZ1bmN0aW9uKHQsZSl7dD10aGlzLl9oYXNoZXI9bmV3IHQuaW5pdCwic3RyaW5nIj09dHlwZW9mIGUmJihlPWkucGFyc2UoZSkpO3ZhciByPXQuYmxvY2tTaXplLG49NCpyO2Uuc2lnQnl0ZXM+biYmKGU9dC5maW5hbGl6ZShlKSksZS5jbGFtcCgpO2Zvcih2YXIgYT10aGlzLl9vS2V5PWUuY2xvbmUoKSxvPXRoaXMuX2lLZXk9ZS5jbG9uZSgpLHM9YS53b3JkcyxoPW8ud29yZHMsYz0wO2M8cjtjKyspc1tjXV49MTU0OTU1NjgyOCxoW2NdXj05MDk1MjI0ODY7YS5zaWdCeXRlcz1vLnNpZ0J5dGVzPW4sdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2hhc2hlcjt0LnJlc2V0KCksdC51cGRhdGUodGhpcy5faUtleSl9LHVwZGF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faGFzaGVyLnVwZGF0ZSh0KSx0aGlzfSxmaW5hbGl6ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9oYXNoZXIscj1lLmZpbmFsaXplKHQpO3JldHVybiBlLnJlc2V0KCksZS5maW5hbGl6ZSh0aGlzLl9vS2V5LmNsb25lKCkuY29uY2F0KHIpKX19KSkpfSkpLG8oKGZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpLGEsbyxzLGgsYzt0LmV4cG9ydHM9KG49KHI9Yz11KS5saWIsaT1uLkJhc2UsYT1uLldvcmRBcnJheSxvPXIuYWxnbyxzPW8uTUQ1LGg9by5FdnBLREY9aS5leHRlbmQoe2NmZzppLmV4dGVuZCh7a2V5U2l6ZTo0LGhhc2hlcjpzLGl0ZXJhdGlvbnM6MX0pLGluaXQ6ZnVuY3Rpb24odCl7dGhpcy5jZmc9dGhpcy5jZmcuZXh0ZW5kKHQpfSxjb21wdXRlOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByLG49dGhpcy5jZmcsaT1uLmhhc2hlci5jcmVhdGUoKSxvPWEuY3JlYXRlKCkscz1vLndvcmRzLGg9bi5rZXlTaXplLGM9bi5pdGVyYXRpb25zO3MubGVuZ3RoPGg7KXtyJiZpLnVwZGF0ZShyKSxyPWkudXBkYXRlKHQpLmZpbmFsaXplKGUpLGkucmVzZXQoKTtmb3IodmFyIGw9MTtsPGM7bCsrKXI9aS5maW5hbGl6ZShyKSxpLnJlc2V0KCk7by5jb25jYXQocil9cmV0dXJuIG8uc2lnQnl0ZXM9NCpoLG99fSksci5FdnBLREY9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBoLmNyZWF0ZShyKS5jb21wdXRlKHQsZSl9LGMuRXZwS0RGKX0pKSxvKChmdW5jdGlvbih0LGUpe3ZhciByLG4saSxhLG8scyxoLGMsbCxmLGQsXyxwLGcsdix5LG0sdyxiLGs7dC5leHBvcnRzPXZvaWQoKHI9dSkubGliLkNpcGhlcnx8KGk9cixhPWkubGliLG89YS5CYXNlLHM9YS5Xb3JkQXJyYXksaD1hLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0sYz1pLmVuYyxjLlV0ZjgsbD1jLkJhc2U2NCxmPWkuYWxnby5FdnBLREYsZD1hLkNpcGhlcj1oLmV4dGVuZCh7Y2ZnOm8uZXh0ZW5kKCksY3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLHQsZSl9LGNyZWF0ZURlY3J5cHRvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSx0LGUpfSxpbml0OmZ1bmN0aW9uKHQsZSxyKXt0aGlzLmNmZz10aGlzLmNmZy5leHRlbmQociksdGhpcy5feGZvcm1Nb2RlPXQsdGhpcy5fa2V5PWUsdGhpcy5yZXNldCgpfSxyZXNldDpmdW5jdGlvbigpe2gucmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9kb1Jlc2V0KCl9LHByb2Nlc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2FwcGVuZCh0KSx0aGlzLl9wcm9jZXNzKCl9LGZpbmFsaXplOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLl9hcHBlbmQodCksdGhpcy5fZG9GaW5hbGl6ZSgpfSxrZXlTaXplOjQsaXZTaXplOjQsX0VOQ19YRk9STV9NT0RFOjEsX0RFQ19YRk9STV9NT0RFOjIsX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P2s6d31yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJue2VuY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmVuY3J5cHQoZSxyLG4saSl9LGRlY3J5cHQ6ZnVuY3Rpb24ocixuLGkpe3JldHVybiB0KG4pLmRlY3J5cHQoZSxyLG4saSl9fX19KCl9KSxhLlN0cmVhbUNpcGhlcj1kLmV4dGVuZCh7X2RvRmluYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvY2VzcyghMCl9LGJsb2NrU2l6ZToxfSksXz1pLm1vZGU9e30scD1hLkJsb2NrQ2lwaGVyTW9kZT1vLmV4dGVuZCh7Y3JlYXRlRW5jcnlwdG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZSh0LGUpfSxjcmVhdGVEZWNyeXB0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5EZWNyeXB0b3IuY3JlYXRlKHQsZSl9LGluaXQ6ZnVuY3Rpb24odCxlKXt0aGlzLl9jaXBoZXI9dCx0aGlzLl9pdj1lfX0pLGc9Xy5DQkM9ZnVuY3Rpb24oKXt2YXIgdD1wLmV4dGVuZCgpO2Z1bmN0aW9uIGUodCxlLHIpe3ZhciBpLGE9dGhpcy5faXY7YT8oaT1hLHRoaXMuX2l2PW4pOmk9dGhpcy5fcHJldkJsb2NrO2Zvcih2YXIgbz0wO288cjtvKyspdFtlK29dXj1pW29dfXJldHVybiB0LkVuY3J5cHRvcj10LmV4dGVuZCh7cHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQscil7dmFyIG49dGhpcy5fY2lwaGVyLGk9bi5ibG9ja1NpemU7ZS5jYWxsKHRoaXMsdCxyLGkpLG4uZW5jcnlwdEJsb2NrKHQsciksdGhpcy5fcHJldkJsb2NrPXQuc2xpY2UocixyK2kpfX0pLHQuRGVjcnlwdG9yPXQuZXh0ZW5kKHtwcm9jZXNzQmxvY2s6ZnVuY3Rpb24odCxyKXt2YXIgbj10aGlzLl9jaXBoZXIsaT1uLmJsb2NrU2l6ZSxhPXQuc2xpY2UocixyK2kpO24uZGVjcnlwdEJsb2NrKHQsciksZS5jYWxsKHRoaXMsdCxyLGkpLHRoaXMuX3ByZXZCbG9jaz1hfX0pLHR9KCksdj0oaS5wYWQ9e30pLlBrY3M3PXtwYWQ6ZnVuY3Rpb24odCxlKXtmb3IodmFyIHI9NCplLG49ci10LnNpZ0J5dGVzJXIsaT1uPDwyNHxuPDwxNnxuPDw4fG4sYT1bXSxvPTA7bzxuO28rPTQpYS5wdXNoKGkpO3ZhciBoPXMuY3JlYXRlKGEsbik7dC5jb25jYXQoaCl9LHVucGFkOmZ1bmN0aW9uKHQpe3ZhciBlPTI1NSZ0LndvcmRzW3Quc2lnQnl0ZXMtMT4+PjJdO3Quc2lnQnl0ZXMtPWV9fSxhLkJsb2NrQ2lwaGVyPWQuZXh0ZW5kKHtjZmc6ZC5jZmcuZXh0ZW5kKHttb2RlOmcscGFkZGluZzp2fSkscmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdDtkLnJlc2V0LmNhbGwodGhpcyk7dmFyIGU9dGhpcy5jZmcscj1lLml2LG49ZS5tb2RlO3RoaXMuX3hmb3JtTW9kZT09dGhpcy5fRU5DX1hGT1JNX01PREU/dD1uLmNyZWF0ZUVuY3J5cHRvcjoodD1uLmNyZWF0ZURlY3J5cHRvcix0aGlzLl9taW5CdWZmZXJTaXplPTEpLHRoaXMuX21vZGUmJnRoaXMuX21vZGUuX19jcmVhdG9yPT10P3RoaXMuX21vZGUuaW5pdCh0aGlzLHImJnIud29yZHMpOih0aGlzLl9tb2RlPXQuY2FsbChuLHRoaXMsciYmci53b3JkcyksdGhpcy5fbW9kZS5fX2NyZWF0b3I9dCl9LF9kb1Byb2Nlc3NCbG9jazpmdW5jdGlvbih0LGUpe3RoaXMuX21vZGUucHJvY2Vzc0Jsb2NrKHQsZSl9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmNmZy5wYWRkaW5nO3JldHVybiB0aGlzLl94Zm9ybU1vZGU9PXRoaXMuX0VOQ19YRk9STV9NT0RFPyhlLnBhZCh0aGlzLl9kYXRhLHRoaXMuYmxvY2tTaXplKSx0PXRoaXMuX3Byb2Nlc3MoITApKToodD10aGlzLl9wcm9jZXNzKCEwKSxlLnVucGFkKHQpKSx0fSxibG9ja1NpemU6NH0pLHk9YS5DaXBoZXJQYXJhbXM9by5leHRlbmQoe2luaXQ6ZnVuY3Rpb24odCl7dGhpcy5taXhJbih0KX0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuKHR8fHRoaXMuZm9ybWF0dGVyKS5zdHJpbmdpZnkodGhpcyl9fSksbT0oaS5mb3JtYXQ9e30pLk9wZW5TU0w9e3N0cmluZ2lmeTpmdW5jdGlvbih0KXt2YXIgZT10LmNpcGhlcnRleHQscj10LnNhbHQ7cmV0dXJuKHI/cy5jcmVhdGUoWzEzOTg4OTM2ODQsMTcwMTA3NjgzMV0pLmNvbmNhdChyKS5jb25jYXQoZSk6ZSkudG9TdHJpbmcobCl9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBlLHI9bC5wYXJzZSh0KSxuPXIud29yZHM7cmV0dXJuIDEzOTg4OTM2ODQ9PW5bMF0mJjE3MDEwNzY4MzE9PW5bMV0mJihlPXMuY3JlYXRlKG4uc2xpY2UoMiw0KSksbi5zcGxpY2UoMCw0KSxyLnNpZ0J5dGVzLT0xNikseS5jcmVhdGUoe2NpcGhlcnRleHQ6cixzYWx0OmV9KX19LHc9YS5TZXJpYWxpemFibGVDaXBoZXI9by5leHRlbmQoe2NmZzpvLmV4dGVuZCh7Zm9ybWF0Om19KSxlbmNyeXB0OmZ1bmN0aW9uKHQsZSxyLG4pe249dGhpcy5jZmcuZXh0ZW5kKG4pO3ZhciBpPXQuY3JlYXRlRW5jcnlwdG9yKHIsbiksYT1pLmZpbmFsaXplKGUpLG89aS5jZmc7cmV0dXJuIHkuY3JlYXRlKHtjaXBoZXJ0ZXh0OmEsa2V5OnIsaXY6by5pdixhbGdvcml0aG06dCxtb2RlOm8ubW9kZSxwYWRkaW5nOm8ucGFkZGluZyxibG9ja1NpemU6dC5ibG9ja1NpemUsZm9ybWF0dGVyOm4uZm9ybWF0fSl9LGRlY3J5cHQ6ZnVuY3Rpb24odCxlLHIsbil7cmV0dXJuIG49dGhpcy5jZmcuZXh0ZW5kKG4pLGU9dGhpcy5fcGFyc2UoZSxuLmZvcm1hdCksdC5jcmVhdGVEZWNyeXB0b3IocixuKS5maW5hbGl6ZShlLmNpcGhlcnRleHQpfSxfcGFyc2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/ZS5wYXJzZSh0LHRoaXMpOnR9fSksYj0oaS5rZGY9e30pLk9wZW5TU0w9e2V4ZWN1dGU6ZnVuY3Rpb24odCxlLHIsbil7bnx8KG49cy5yYW5kb20oOCkpO3ZhciBpPWYuY3JlYXRlKHtrZXlTaXplOmUrcn0pLmNvbXB1dGUodCxuKSxhPXMuY3JlYXRlKGkud29yZHMuc2xpY2UoZSksNCpyKTtyZXR1cm4gaS5zaWdCeXRlcz00KmUseS5jcmVhdGUoe2tleTppLGl2OmEsc2FsdDpufSl9fSxrPWEuUGFzc3dvcmRCYXNlZENpcGhlcj13LmV4dGVuZCh7Y2ZnOncuY2ZnLmV4dGVuZCh7a2RmOmJ9KSxlbmNyeXB0OmZ1bmN0aW9uKHQsZSxyLG4pe3ZhciBpPShuPXRoaXMuY2ZnLmV4dGVuZChuKSkua2RmLmV4ZWN1dGUocix0LmtleVNpemUsdC5pdlNpemUpO24uaXY9aS5pdjt2YXIgYT13LmVuY3J5cHQuY2FsbCh0aGlzLHQsZSxpLmtleSxuKTtyZXR1cm4gYS5taXhJbihpKSxhfSxkZWNyeXB0OmZ1bmN0aW9uKHQsZSxyLG4pe249dGhpcy5jZmcuZXh0ZW5kKG4pLGU9dGhpcy5fcGFyc2UoZSxuLmZvcm1hdCk7dmFyIGk9bi5rZGYuZXhlY3V0ZShyLHQua2V5U2l6ZSx0Lml2U2l6ZSxlLnNhbHQpO3JldHVybiBuLml2PWkuaXYsdy5kZWNyeXB0LmNhbGwodGhpcyx0LGUsaS5rZXksbil9fSkpKX0pKSxvKChmdW5jdGlvbih0LGUpe3ZhciByO3QuZXhwb3J0cz0ocj11LGZ1bmN0aW9uKCl7dmFyIHQ9cixlPXQubGliLkJsb2NrQ2lwaGVyLG49dC5hbGdvLGk9W10sYT1bXSxvPVtdLHM9W10saD1bXSxjPVtdLGw9W10sdT1bXSxmPVtdLGQ9W107IWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGU9MDtlPDI1NjtlKyspdFtlXT1lPDEyOD9lPDwxOmU8PDFeMjgzO3ZhciByPTAsbj0wO2ZvcihlPTA7ZTwyNTY7ZSsrKXt2YXIgXz1uXm48PDFebjw8Ml5uPDwzXm48PDQ7Xz1fPj4+OF4yNTUmX145OSxpW3JdPV8sYVtfXT1yO3ZhciBwPXRbcl0sZz10W3BdLHY9dFtnXSx5PTI1Nyp0W19dXjE2ODQzMDA4Kl87b1tyXT15PDwyNHx5Pj4+OCxzW3JdPXk8PDE2fHk+Pj4xNixoW3JdPXk8PDh8eT4+PjI0LGNbcl09eSx5PTE2ODQzMDA5KnZeNjU1MzcqZ14yNTcqcF4xNjg0MzAwOCpyLGxbX109eTw8MjR8eT4+PjgsdVtfXT15PDwxNnx5Pj4+MTYsZltfXT15PDw4fHk+Pj4yNCxkW19dPXkscj8ocj1wXnRbdFt0W3ZecF1dXSxuXj10W3Rbbl1dKTpyPW49MX19KCk7dmFyIF89WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdLHA9bi5BRVM9ZS5leHRlbmQoe19kb1Jlc2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX25Sb3VuZHN8fHRoaXMuX2tleVByaW9yUmVzZXQhPT10aGlzLl9rZXkpe2Zvcih2YXIgdD10aGlzLl9rZXlQcmlvclJlc2V0PXRoaXMuX2tleSxlPXQud29yZHMscj10LnNpZ0J5dGVzLzQsbj00KigodGhpcy5fblJvdW5kcz1yKzYpKzEpLGE9dGhpcy5fa2V5U2NoZWR1bGU9W10sbz0wO288bjtvKyspbzxyP2Fbb109ZVtvXTooYz1hW28tMV0sbyVyP3I+NiYmbyVyPT00JiYoYz1pW2M+Pj4yNF08PDI0fGlbYz4+PjE2JjI1NV08PDE2fGlbYz4+PjgmMjU1XTw8OHxpWzI1NSZjXSk6KGM9aVsoYz1jPDw4fGM+Pj4yNCk+Pj4yNF08PDI0fGlbYz4+PjE2JjI1NV08PDE2fGlbYz4+PjgmMjU1XTw8OHxpWzI1NSZjXSxjXj1fW28vcnwwXTw8MjQpLGFbb109YVtvLXJdXmMpO2Zvcih2YXIgcz10aGlzLl9pbnZLZXlTY2hlZHVsZT1bXSxoPTA7aDxuO2grKyl7aWYobz1uLWgsaCU0KXZhciBjPWFbb107ZWxzZSBjPWFbby00XTtzW2hdPWg8NHx8bzw9ND9jOmxbaVtjPj4+MjRdXV51W2lbYz4+PjE2JjI1NV1dXmZbaVtjPj4+OCYyNTVdXV5kW2lbMjU1JmNdXX19fSxlbmNyeXB0QmxvY2s6ZnVuY3Rpb24odCxlKXt0aGlzLl9kb0NyeXB0QmxvY2sodCxlLHRoaXMuX2tleVNjaGVkdWxlLG8scyxoLGMsaSl9LGRlY3J5cHRCbG9jazpmdW5jdGlvbih0LGUpe3ZhciByPXRbZSsxXTt0W2UrMV09dFtlKzNdLHRbZSszXT1yLHRoaXMuX2RvQ3J5cHRCbG9jayh0LGUsdGhpcy5faW52S2V5U2NoZWR1bGUsbCx1LGYsZCxhKSxyPXRbZSsxXSx0W2UrMV09dFtlKzNdLHRbZSszXT1yfSxfZG9DcnlwdEJsb2NrOmZ1bmN0aW9uKHQsZSxyLG4saSxhLG8scyl7Zm9yKHZhciBoPXRoaXMuX25Sb3VuZHMsYz10W2VdXnJbMF0sbD10W2UrMV1eclsxXSx1PXRbZSsyXV5yWzJdLGY9dFtlKzNdXnJbM10sZD00LF89MTtfPGg7XysrKXt2YXIgcD1uW2M+Pj4yNF1eaVtsPj4+MTYmMjU1XV5hW3U+Pj44JjI1NV1eb1syNTUmZl1ecltkKytdLGc9bltsPj4+MjRdXmlbdT4+PjE2JjI1NV1eYVtmPj4+OCYyNTVdXm9bMjU1JmNdXnJbZCsrXSx2PW5bdT4+PjI0XV5pW2Y+Pj4xNiYyNTVdXmFbYz4+PjgmMjU1XV5vWzI1NSZsXV5yW2QrK10seT1uW2Y+Pj4yNF1eaVtjPj4+MTYmMjU1XV5hW2w+Pj44JjI1NV1eb1syNTUmdV1ecltkKytdO2M9cCxsPWcsdT12LGY9eX1wPShzW2M+Pj4yNF08PDI0fHNbbD4+PjE2JjI1NV08PDE2fHNbdT4+PjgmMjU1XTw8OHxzWzI1NSZmXSlecltkKytdLGc9KHNbbD4+PjI0XTw8MjR8c1t1Pj4+MTYmMjU1XTw8MTZ8c1tmPj4+OCYyNTVdPDw4fHNbMjU1JmNdKV5yW2QrK10sdj0oc1t1Pj4+MjRdPDwyNHxzW2Y+Pj4xNiYyNTVdPDwxNnxzW2M+Pj44JjI1NV08PDh8c1syNTUmbF0pXnJbZCsrXSx5PShzW2Y+Pj4yNF08PDI0fHNbYz4+PjE2JjI1NV08PDE2fHNbbD4+PjgmMjU1XTw8OHxzWzI1NSZ1XSlecltkKytdLHRbZV09cCx0W2UrMV09Zyx0W2UrMl09dix0W2UrM109eX0sa2V5U2l6ZTo4fSk7dC5BRVM9ZS5fY3JlYXRlSGVscGVyKHApfSgpLHIuQUVTKX0pKSksXz1vKChmdW5jdGlvbih0LGUpe3ZhciByO3QuZXhwb3J0cz0ocj11LGZ1bmN0aW9uKHQpe3ZhciBlPXIsbj1lLmxpYixpPW4uV29yZEFycmF5LGE9bi5IYXNoZXIsbz1lLmFsZ28scz1bXSxoPVtdOyFmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7Zm9yKHZhciByPXQuc3FydChlKSxuPTI7bjw9cjtuKyspaWYoIShlJW4pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHIodCl7cmV0dXJuIDQyOTQ5NjcyOTYqKHQtKDB8dCkpfDB9Zm9yKHZhciBuPTIsaT0wO2k8NjQ7KWUobikmJihpPDgmJihzW2ldPXIodC5wb3cobiwuNSkpKSxoW2ldPXIodC5wb3cobiwxLzMpKSxpKyspLG4rK30oKTt2YXIgYz1bXSxsPW8uU0hBMjU2PWEuZXh0ZW5kKHtfZG9SZXNldDpmdW5jdGlvbigpe3RoaXMuX2hhc2g9bmV3IGkuaW5pdChzLnNsaWNlKDApKX0sX2RvUHJvY2Vzc0Jsb2NrOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciByPXRoaXMuX2hhc2gud29yZHMsbj1yWzBdLGk9clsxXSxhPXJbMl0sbz1yWzNdLHM9cls0XSxsPXJbNV0sdT1yWzZdLGY9cls3XSxkPTA7ZDw2NDtkKyspe2lmKGQ8MTYpY1tkXT0wfHRbZStkXTtlbHNle3ZhciBfPWNbZC0xNV0scD0oXzw8MjV8Xz4+PjcpXihfPDwxNHxfPj4+MTgpXl8+Pj4zLGc9Y1tkLTJdLHY9KGc8PDE1fGc+Pj4xNyleKGc8PDEzfGc+Pj4xOSleZz4+PjEwO2NbZF09cCtjW2QtN10rditjW2QtMTZdfXZhciB5PW4maV5uJmFeaSZhLG09KG48PDMwfG4+Pj4yKV4objw8MTl8bj4+PjEzKV4objw8MTB8bj4+PjIyKSx3PWYrKChzPDwyNnxzPj4+NileKHM8PDIxfHM+Pj4xMSleKHM8PDd8cz4+PjI1KSkrKHMmbF5+cyZ1KStoW2RdK2NbZF07Zj11LHU9bCxsPXMscz1vK3d8MCxvPWEsYT1pLGk9bixuPXcrKG0reSl8MH1yWzBdPXJbMF0rbnwwLHJbMV09clsxXStpfDAsclsyXT1yWzJdK2F8MCxyWzNdPXJbM10rb3wwLHJbNF09cls0XStzfDAscls1XT1yWzVdK2x8MCxyWzZdPXJbNl0rdXwwLHJbN109cls3XStmfDB9LF9kb0ZpbmFsaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGF0YSxyPWUud29yZHMsbj04KnRoaXMuX25EYXRhQnl0ZXMsaT04KmUuc2lnQnl0ZXM7cmV0dXJuIHJbaT4+PjVdfD0xMjg8PDI0LWklMzIsclsxNCsoaSs2ND4+Pjk8PDQpXT10LmZsb29yKG4vNDI5NDk2NzI5NiksclsxNSsoaSs2ND4+Pjk8PDQpXT1uLGUuc2lnQnl0ZXM9NCpyLmxlbmd0aCx0aGlzLl9wcm9jZXNzKCksdGhpcy5faGFzaH0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgdD1hLmNsb25lLmNhbGwodGhpcyk7cmV0dXJuIHQuX2hhc2g9dGhpcy5faGFzaC5jbG9uZSgpLHR9fSk7ZS5TSEEyNTY9YS5fY3JlYXRlSGVscGVyKGwpLGUuSG1hY1NIQTI1Nj1hLl9jcmVhdGVIbWFjSGVscGVyKGwpfShNYXRoKSxyLlNIQTI1Nil9KSkscD1vKChmdW5jdGlvbih0LGUpe3ZhciByO3QuZXhwb3J0cz0ocj11LGZ1bmN0aW9uKCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5QnVmZmVyKXt2YXIgdD1yLmxpYi5Xb3JkQXJyYXksZT10LmluaXQ7KHQuaW5pdD1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXImJih0PW5ldyBVaW50OEFycmF5KHQpKSwodCBpbnN0YW5jZW9mIEludDhBcnJheXx8InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OENsYW1wZWRBcnJheSYmdCBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5fHx0IGluc3RhbmNlb2YgSW50MTZBcnJheXx8dCBpbnN0YW5jZW9mIFVpbnQxNkFycmF5fHx0IGluc3RhbmNlb2YgSW50MzJBcnJheXx8dCBpbnN0YW5jZW9mIFVpbnQzMkFycmF5fHx0IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5fHx0IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5KSYmKHQ9bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCkpLHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KXtmb3IodmFyIHI9dC5ieXRlTGVuZ3RoLG49W10saT0wO2k8cjtpKyspbltpPj4+Ml18PXRbaV08PDI0LWklNCo4O2UuY2FsbCh0aGlzLG4scil9ZWxzZSBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLnByb3RvdHlwZT10fX0oKSxyLmxpYi5Xb3JkQXJyYXkpfSkpLGc9bygoZnVuY3Rpb24odCxlKXt0LmV4cG9ydHM9dS5IbWFjU0hBMjU2fSkpO29ubWVzc2FnZT1mdW5jdGlvbih0KXt2YXIgZT10LmRhdGEsbj1lLmpvYixhPWUuY21kLG89ZS51cmwscz1lLmJ1ZmZlcixoPWUua2V5QmFzZTY0LGw9ZS5nemlwLHU9ZS5yZWZlcnJlcix2PWUuaWQseT1lLmFwcElkLG09ZS5pc2xhbmRJZCx3PWUuZGVidWcsYj1lLndoYXQ7c3dpdGNoKGEpe2Nhc2UidXBsb2FkRW5jcnlwdGVkIjohZnVuY3Rpb24odCl7Qi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KG8pO2JyZWFrO2RlZmF1bHQ6Y29uc29sZS5lcnJvcigiVW5rbm93biB3b3JrZXIgY29tbWFuZCIsYSl9ZnVuY3Rpb24gayh0KXt2YXIgZT1EYXRlLm5vdygpLHI9cC5jcmVhdGUodCksbj1mLnBhcnNlKGgpLGE9ZyhyLG4pLG89cC5yYW5kb20oMTYpLHM9ZC5lbmNyeXB0KHIsbix7aXY6b30pLmNpcGhlcnRleHQsYz1uZXcgQXJyYXlCdWZmZXIoNCtvLnNpZ0J5dGVzK2Euc2lnQnl0ZXMrcy5zaWdCeXRlcyksbD1uZXcgRGF0YVZpZXcoYyksdT0wO2wuc2V0VWludDMyKHUsMTEyOTQ2ODIwOSwhMSksdSs9NDtmb3IodmFyIF89MCx5PVtvLGEsc107Xzx5Lmxlbmd0aDtfKyspe3ZhciBtLGs9aSh5W19dLndvcmRzKTt0cnl7Zm9yKGsucygpOyEobT1rLm4oKSkuZG9uZTspe3ZhciB4PW0udmFsdWU7bC5zZXRJbnQzMih1LHgsITEpLHUrPTR9fWNhdGNoKHQpe2suZSh0KX1maW5hbGx5e2suZigpfX1yZXR1cm4gdyYmY29uc29sZS5sb2coIiIuY29uY2F0KHYsIiAiKS5jb25jYXQoYiwiIGVuY3J5cHRlZCAoIikuY29uY2F0KGMuYnl0ZUxlbmd0aCwiIGJ5dGVzKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1lLCJtcyIpKSxjfWZ1bmN0aW9uIHgodCl7dmFyIGU9RGF0ZS5ub3coKSxyPWMuZGVmbGF0ZSh0LHtnemlwOiEwLGxldmVsOjF9KTtyZXR1cm4gdyYmY29uc29sZS5sb2coIiIuY29uY2F0KHYsIiAiKS5jb25jYXQoYiwiIGNvbXByZXNzZWQgKCIpLmNvbmNhdChyLmxlbmd0aCwiIGJ5dGVzKSBpbiAiKS5jb25jYXQoRGF0ZS5ub3coKS1lLCJtcyIpKSxyfWZ1bmN0aW9uIHoodCl7dmFyIGU9XyhwLmNyZWF0ZSh0KSk7cmV0dXJuIGYuc3RyaW5naWZ5KGUpLnJlcGxhY2UoLz0vZywiIikucmVwbGFjZSgvXCsvZywiLSIpLnJlcGxhY2UoL1wvL2csIl8iKX1mdW5jdGlvbiBCKCl7cmV0dXJuKEI9cihyZWdlbmVyYXRvclJ1bnRpbWUubWFyaygoZnVuY3Rpb24gdChlKXt2YXIgcixpLGEsbyxoO3JldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcCgoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHQucHJldj0wLHI9ayhsP3gocyk6cyksZS5pbmNsdWRlcygiJUhBU0glIikmJihlPWUucmVwbGFjZSgiJUhBU0glIix6KHIpKSksdC5uZXh0PTUsZmV0Y2goZSx7bWV0aG9kOiJQVVQiLG1vZGU6ImNvcnMiLGhlYWRlcnM6eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iLCJYLUNyb3F1ZXQtQXBwIjp5LCJYLUNyb3F1ZXQtSWQiOm19LHJlZmVycmVyOnUsYm9keTpyfSk7Y2FzZSA1OmlmKGk9dC5zZW50LGE9aS5vayxvPWkuc3RhdHVzLGg9aS5zdGF0dXNUZXh0LGEpe3QubmV4dD0xMTticmVha310aHJvdyBFcnJvcigic2VydmVyIHJldHVybmVkICIuY29uY2F0KG8sIiAiKS5jb25jYXQoaCwiIGZvciBQVVQgIikuY29uY2F0KGUpKTtjYXNlIDExOncmJmNvbnNvbGUubG9nKCIiLmNvbmNhdCh2LCIgdXBsb2FkZWQgIikuY29uY2F0KGIsIiAoIikuY29uY2F0KG8sIikgIikuY29uY2F0KGUpKSxwb3N0TWVzc2FnZSh7am9iOm4sdXJsOmUsb2s6YSxzdGF0dXM6byxzdGF0dXNUZXh0Omh9KSx0Lm5leHQ9MTk7YnJlYWs7Y2FzZSAxNTp0LnByZXY9MTUsdC50MD10LmNhdGNoKDApLHcmJmNvbnNvbGUubG9nKCIiLmNvbmNhdCh2LCIgdXBsb2FkIGVycm9yICIpLmNvbmNhdCh0LnQwLm1lc3NhZ2UpKSxwb3N0TWVzc2FnZSh7am9iOm4sb2s6ITEsc3RhdHVzOi0xLHN0YXR1c1RleHQ6dC50MC5tZXNzYWdlfSk7Y2FzZSAxOTpjYXNlIDIwOmNhc2UiZW5kIjpyZXR1cm4gdC5zdG9wKCl9fSksdCxudWxsLFtbMCwxNV1dKX0pKSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSgpOwoK",Ua=null,Oa=!1,function(t){return Ba=Ba||Qa(Da,Ua,Oa),new Worker(Ba,t)}),qa="0.4.1-1";window.location.hostname.match(/co?de?pe?n\.io/)?console.log("Croquet SDK "+qa):console.log("%cCroquet%c SDK %c"+qa,"color:#F0493E","color:inherit","color:".concat(qa.includes("+")?"#909":"inherit"));var $a=window.location.hostname.match(/^(.*\.)?croquet\.io$/i)?window.location.host:"croquet.io",ts="wss://".concat($a,"/reflector/v").concat(1),es=null;var ns=H.nocheat;var rs=new Aa;rs.onerror=function(t){return console.error("UploadWorker error: ".concat(t.message))};var is=0,os=new Set;function as(t){var n,r=k(os);try{var i=function(){var e=n.value;if(e.id===t){var r=e.islandCreator;return{v:{appId:r.appId,islandId:r.islandId,uploadEncrypted:function(t){return e.uploadEncrypted(t)},downloadEncrypted:function(t){return e.downloadEncrypted(t)}}}}};for(r.s();!(n=r.n()).done;){var o=i();if("object"===e(o))return o.v}}catch(t){r.e(t)}finally{r.f()}return{}}var ss=function(){function t(){i(this,t),this.reset()}var n,o,s,c,u,d,h,f,m,p,y,b,Z,X,w,G;return a(t,[{key:"reset",value:function(){window.ISLAND===this.island&&delete window.ISLAND,this.island=null,this.connection=this.connection||new cs(this),this.networkQueue=new et,this.time=0,this.extrapolatedTimeBase=Date.now(),this.key=null,this.viewId=this.viewId||Math.floor(Math.random()*Math.pow(36,10)).toString(36),this.users=0,this.usersTotal=0,this.cpuTime=0,this.triggeringCpuTime=null,this.synced=null,this.latency=0,this.latencyHistory&&(this.latencyHistory=[]),this.localTicker&&(window.clearInterval(this.localTicker),delete this.localTicker),this.syncTimer&&(window.clearTimeout(this.syncTimer),delete this.syncTimer),this.tuttiHistory=[],ne.removeAllSubscriptionsFor(this.viewId),ne.addSubscription(this.viewId,"__views__",this.viewId,(function(t){return Rt("users now ".concat(t.count))}),"oncePerFrameWhileSynced"),this.leaving||qt.showSyncWait(!0)}},{key:"checkForConnection",value:function(t){this.connection.checkForConnection(t)}},{key:"dormantDisconnect",value:function(){this.connected&&this.connection.dormantDisconnect()}},{key:"establishSession",value:(G=r(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,c,u,d,h,f,m,p,y,b,v,Z,g,X,w,G,x=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(es={messages:H.has("debug","messages",!1),sends:H.has("debug","sends",!1),ticks:H.has("debug","ticks",!1),pong:H.has("debug","pong",!1),snapshot:H.has("debug","snapshot",!1),session:H.has("debug","session",!1),initsnapshot:H.has("debug","initsnapshot","localhost"),reflector:H.has("debug","reflector",H.dev||"localhost")},n=e.name,r=e.optionsFromUrl,i=e.password,o=e.appId,a=e.viewIdDebugSuffix,s=o?"".concat(o,"/").concat(n):n,a&&(this.viewId=this.viewId.replace(/_.*$/,"")+"_"+(""+a).slice(0,16)),c=l({},e.options),r){u=k(r);try{for(u.s();!(d=u.n()).done;)(h=d.value)in H&&(c[h]=H[h])}catch(t){u.e(t)}finally{u.f()}}for(f={},m=0,p=["tps"];m<p.length;m++)(y=p[m])in H?f[y]=H[y]:y in e&&(f[y]=e[y]);return this.key=Ri(i,"",{keySize:8}),this.oldKey=Ri("THIS SHOULDN'T BE IN LOGS","",{keySize:8}),t.next=12,q(s,c,f,qa);case 12:return b=t.sent,v=b.id,Z=b.islandId,g=b.codeHash,es.session&&console.log('Session ID for "'.concat(s,'": ').concat(v)),this.islandCreator=l(l({},e),{},{options:c,name:s,islandId:Z,codeHash:g}),X=!1,this.islandCreator.snapshot?this.islandCreator.snapshot.id!==v&&(w=this.islandCreator.snapshot.islandId===Z,console.warn("Existing snapshot was for different ".concat(w?"code base":"session","!")),X=!0):X=!0,X&&(this.islandCreator.snapshot={id:v,time:0,meta:{id:v,islandId:Z,codeHash:g,created:(new Date).toISOString()}}),G=new Promise((function(t,e){return x.islandCreator.sessionSynced={resolve:t,reject:e}})),this.join(),t.next=25,G;case 25:return t.abrupt("return",this.island.modelsByName);case 26:case"end":return t.stop()}}),t,this)}))),function(t){return G.apply(this,arguments)})},{key:"lastKnownTime",value:function(t){return Math.max(t.time,t.externalTime)}},{key:"syncCheck",value:(w=r(regeneratorRuntime.mark((function t(e,n,r){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===this.synced){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.sendTutti(e,n,r);case 4:i=t.sent,(o=Object.keys(i)).length>1?console.warn("sync check failed:",o):console.log("sync check ok");case 7:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return w.apply(this,arguments)})},{key:"takeSnapshot",value:function(){var t=this.island.snapshot(),e=this.lastKnownTime(t),n=t.externalSeq;return t.meta=l(l({},this.islandCreator.snapshot.meta),{},{options:this.islandCreator.options,time:e,seq:n,date:(new Date).toISOString(),host:window.location.hostname,sdk:qa}),delete t.meta.hash,t}},{key:"scheduleSnapshot",value:function(){if(this.island){var t=this.island.time,e=t-this.island.lastSnapshotPoll;if(e<5e3)es.snapshot&&console.log("not requesting snapshot poll (".concat(e,"ms since poll scheduled)"));else{var n=new Ys(t,0,this.island.id,"handlePollForSnapshot",[]);this.sendTagged(n,{debounce:5e3,msgID:"pollForSnapshot"}),es.snapshot&&console.log(this.id,"requesting snapshot poll via reflector")}}}},{key:"handlePollForSnapshot",value:function(t,e){var n=this;if(!0===this.synced){var r=this.triggeringCpuTime||this.cpuTime;this.triggeringCpuTime=null,this.cpuTime=0;var i=Kt.begin("snapshot"),o={cpuTime:r,hash:this.island.getSummaryHash(),viewId:this.viewId},a=Kt.end("snapshot")-i;this.cpuTime-=a,es.snapshot&&console.log(this.id,"Summary hashing took ".concat(Math.ceil(a),"ms")),Promise.resolve().then((function(){return n.pollForSnapshot(t,e,o)}))}}},{key:"pollForSnapshot",value:(X=r(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,l,u,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.cpuTime+=Math.random(),es.snapshot&&console.log(this.id,"sending snapshot vote",r),t.next=4,this.sendTutti(e,n,r);case 4:if(i=t.sent,!0===this.synced){t.next=8;break}return es.snapshot&&console.log(this.id,"Ignoring snapshot vote during sync"),t.abrupt("return");case 8:es.snapshot&&console.log(this.id,"received snapshot votes",i),o=Object.keys(i),a=o.map((function(t){return JSON.parse(t)})),s={},a.forEach((function(t,e){var n=t.hash;s[n]||(s[n]=[]),s[n].push(e)})),c=function(t,e){var n=s[t];n.length>1&&n.sort((function(t,e){return a[t].cpuTime-a[e].cpuTime}));var r=n[0];if(a[r].viewId===d.viewId){var i=e?null:{groupSize:n.length};d.serveSnapshot(i)}},l=Object.keys(s),u=l[0],l.length>1&&(console.warn(this.id,"Snapshots fall into ".concat(l.length," groups")),l.sort((function(t,e){return s[e].length-s[t].length})),s[l[0]].length===s[l[1]].length&&(es.snapshot&&console.log(this.id,"Deciding consensus by tie-break"),u=l[0]<l[1]?l[0]:l[1])),l.forEach((function(t){return c(t,t===u)}));case 18:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return X.apply(this,arguments)})},{key:"serveSnapshot",value:function(t){var e=Kt.begin("snapshot"),n=this.takeSnapshot(),r=Kt.end("snapshot")-e;this.cpuTime-=r,es.snapshot&&console.log(this.id,"Snapshotting took ".concat(Math.ceil(r)," ms")),this.uploadSnapshot(n,t)}},{key:"snapshotUrl",value:function(t,e,n){var r,i="".concat(R("snapshots")).concat(this.id),o="".concat((r=Math.ceil(t),(""+r).padStart(10,"0")),"_").concat(e,"-").concat(n,".snap");return"".concat(i,"/").concat(o)}},{key:"hashSnapshot",value:function(t){return t.meta.hash?t.meta.hash:(t.meta.hashPromise||(t.meta.hashPromise=new Promise((function(e){var n=l({},t);delete n.meta,Q(JSON.stringify(n)).then((function(n){t.meta.hash=n,delete t.meta.hashPromise,e(n)}))}))),t.meta.hashPromise)}},{key:"uploadSnapshot",value:(Z=r(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,c,l,u,d,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:null,t.next=3,this.hashSnapshot(e);case 3:return r=Kt.begin("snapshot"),i=JSON.stringify(e),o=Kt.end("snapshot")-r,es.snapshot&&console.log(this.id,"snapshot stringified (".concat(i.length," bytes) in ").concat(Math.ceil(o),"ms")),a=e.meta,s=a.time,c=a.seq,l=a.hash,u=this.snapshotUrl(s,c,l),d=this.connection.socket,t.prev=10,t.next=13,this.uploadEncrypted({url:u,content:i,key:this.key,gzip:!0,debug:es.snapshot,what:"snapshot"});case 13:if(this.connection.socket===d){t.next=16;break}return console.warn(this.id,"Controller was reset while trying to upload snapshot"),t.abrupt("return",!1);case 16:t.next=22;break;case 18:return t.prev=18,t.t0=t.catch(10),console.error(this.id,"Failed to upload snapshot"),t.abrupt("return",!1);case 22:return this.announceSnapshotUrl(s,c,l,u,n),t.abrupt("return",!0);case 24:case"end":return t.stop()}}),t,this,[[10,18]])}))),function(t){return Z.apply(this,arguments)})},{key:"announceSnapshotUrl",value:function(t,e,n,r,i){if(es.snapshot){var o="time: ".concat(t,", seq: ").concat(e,", hash: ").concat(n);i&&(o+=", dissident: "+JSON.stringify(i)),console.log(this.id,"sending snapshot url to reflector (".concat(o,"): ").concat(r))}try{this.connection.send(JSON.stringify({id:this.id,action:"SNAP",args:{time:t,seq:e,hash:n,url:r,dissident:i}}))}catch(t){console.error("ERROR while sending",t)}}},{key:"downloadEncrypted",value:(b=r(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,c,l,u,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.url,r=e.gzip,i=e.key,o=e.debug,a=e.json,s=e.what,c=Date.now(),t.next=4,fetch(n,{method:"GET",mode:"cors",headers:{"X-Croquet-App":this.islandCreator.appId,"X-Croquet-Id":this.islandCreator.islandId},referrer:qt.referrerURL()});case 4:return l=t.sent,t.next=7,l.arrayBuffer();case 7:return u=t.sent,o&&console.log(this.id,"".concat(s," fetched (").concat(u.byteLength," bytes) in ").concat(-c+(c=Date.now()),"ms")),d=this.decryptBinary(u,i),o&&console.log(this.id,"".concat(s," decrypted (").concat(d.length," bytes) in ").concat(-c+(c=Date.now()),"ms")),h=r?Ea.inflate(d):d,o&&r&&console.log(this.id,"".concat(s," inflated (").concat(h.length," bytes) in ").concat(-c+(c=Date.now()),"ms")),t.abrupt("return",a?JSON.parse((new TextDecoder).decode(h)):h);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"uploadEncrypted",value:(y=r(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,c,l,u,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.url,r=e.content,i=e.key,o=e.gzip,a=e.debug,s=e.what,c="string"==typeof r?(new TextEncoder).encode(r).buffer:r,l="string"==typeof i?i:Ni.stringify(i),u=++is,t.abrupt("return",new Promise((function(t,e){rs.postMessage({job:u,cmd:"uploadEncrypted",url:n,buffer:c,keyBase64:l,gzip:o,referrer:qt.referrerURL(),id:d.id,appId:d.islandCreator.appId,islandId:d.islandCreator.islandId,debug:a,what:s},[c]),rs.addEventListener("message",(function n(r){if(u===r.data.job){var i=r.data,o=i.url,a=i.ok,s=i.status,c=i.statusText;rs.removeEventListener("message",n),a?t(o):e(Error("".concat(s,": ").concat(c)))}}))})));case 5:case"end":return t.stop()}}),t)}))),function(t){return y.apply(this,arguments)})},{key:"persistentUrl",value:function(t){var e=this.islandCreator,n=e.appId,r=e.islandId;return"".concat(R("apps")).concat(n,"/").concat(r,"/save/").concat(t)}},{key:"persist",value:(p=r(regeneratorRuntime.mark((function t(e,n,r,i,o){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.synced){t.next=2;break}return t.abrupt("return");case 2:if(this.islandCreator.appId){t.next=4;break}throw Error("Persistence API requires appId");case 4:return t.next=6,this.persistenceVoting(e,n,i,o);case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:return a=this.persistentUrl(i),t.next=12,this.uploadEncrypted({url:a,content:r,key:this.key,gzip:!0,debug:es.snapshot,what:"persistent data"});case 12:es.snapshot&&console.log(this.id,"sending persistent data url to reflector: ".concat(a));try{this.connection.send(JSON.stringify({id:this.id,action:"SAVE",args:{url:a}}))}catch(t){console.error("ERROR while sending",t)}case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,i){return p.apply(this,arguments)})},{key:"persistenceVoting",value:(m=r(regeneratorRuntime.mark((function t(e,n,r,i){var o,a,s,c,l,u,d,h,f,m,p,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0===this.synced){t.next=2;break}return t.abrupt("return",!1);case 2:return o={view:this.viewId,hash:r,ms:i+.001*Math.random()},es.snapshot&&console.log(this.id,"sending persistence vote",o),t.next=6,this.sendTutti(e,n,o);case 6:a=t.sent,es.snapshot&&console.log(this.id,"received persistence votes",a),s=1/0,c="",l=0,u=Object.keys(a);case 11:if(!(l<u.length)){t.next=23;break}if(d=u[l],h=JSON.parse(d),f=h.view,m=h.hash,p=h.ms,m===o.hash){t.next=16;break}return t.abrupt("continue",20);case 16:if(!(p>s||p===s&&f>c)){t.next=18;break}return t.abrupt("continue",20);case 18:s=p,c=f;case 20:l++,t.next=11;break;case 23:return y=c===this.viewId,t.abrupt("return",y);case 25:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return m.apply(this,arguments)})},{key:"convertReflectorMessage",value:function(t){var e=this.id,n="noop",r=[];switch(t[2].what){case"users":var i=t[2],o=i.joined,a=i.left,s=i.active,c=i.total;this.users=s,this.usersTotal=c;var l=this.id,u="__views__",d={entered:o||[],exited:a||[],count:s};e=this.id,n="publishFromModelOnly",r=[l,u,d],ne.handleEvent(this.viewId+":"+u,d);break;case"tally":var h=t[2],f=h.tuttiSeq,m=h.tally,p=h.tallyTarget,y=this.tuttiHistory.findIndex((function(t){return t.tuttiSeq===f})),b=-1!==y&&this.tuttiHistory.splice(y,1)[0];if(b&&b.resolve(m),p){var Z={tuttiSeq:f,tally:m};b&&(Z._local=b.payload);var g=v(p,3);e=g[0],n=g[1],r=[g[2],Z]}}var X=new Ys(0,0,e,n,r);t[2]=X.asState()[2]}},{key:"receive",value:(f=r(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,c,l,u,d,h,f,m,p,y,b,Z,g,X,w,G=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.lastReceived=this.connection.lastReceived,t.t0=e,t.next="SYNC"===t.t0?4:"RECV"===t.t0?58:"TICK"===t.t0?80:"INFO"===t.t0?87:"REQU"===t.t0?90:"LEAVE"===t.t0?92:95;break;case 4:r=n.messages,i=n.url,o=n.persisted,a=n.time,s=o?"persisted session":"snapshot",es.session&&console.log(this.id,"received SYNC: time ".concat(a,", ").concat(r.length," messages, ").concat(s," ").concat(i||"<none>")),c=k(r),t.prev=8,c.s();case 10:if((l=c.n()).done){t.next=29;break}if("string"==typeof(u=l.value)[2]){t.next=16;break}this.convertReflectorMessage(u),t.next=24;break;case 16:t.prev=16,u[2]=this.decryptPayload(u[2])[0],t.next=24;break;case 20:return t.prev=20,t.t1=t.catch(16),this.connection.closeConnectionWithError("SYNC",Error("failed to decrypt message: ".concat(t.t1.message)),4200),t.abrupt("return");case 24:es.messages&&console.log(this.id,"received in SYNC "+JSON.stringify(u)),u[1]>>>=0,this.networkQueue.put(u);case 27:t.next=10;break;case 29:t.next=34;break;case 31:t.prev=31,t.t2=t.catch(8),c.e(t.t2);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(this.timeFromReflector(a),es.session&&console.log("".concat(this.id," fetching ").concat(s," ").concat(i)),!i){t.next=50;break}return t.prev=40,t.next=43,this.downloadEncrypted({url:i,gzip:!0,key:this.key,debug:es.snapshot,json:!0,what:s});case 43:d=t.sent,t.next=50;break;case 46:return t.prev=46,t.t3=t.catch(40),this.connection.closeConnectionWithError("SYNC",Error("failed to fetch ".concat(s,": ").concat(t.t3.message)),4200),t.abrupt("return");case 50:if(this.connected){t.next=53;break}return console.log(this.id,"socket went away during SYNC"),t.abrupt("return");case 53:return o?this.install(d):(d&&(this.islandCreator.snapshot=d),this.install()),es.session&&console.log("".concat(this.id," fast-forwarding from ").concat(Math.round(this.island.time))),h=function t(){G.simulate(Date.now()+200)?(es.session&&console.log("".concat(G.id," fast-forwarded to ").concat(Math.round(G.island.time))),G.islandCreator.sessionSynced.resolve(G.island)):setTimeout(t,0)},setTimeout(h,0),t.abrupt("return");case 58:if((f=n)[1]>>>=0,"string"==typeof f[2]){t.next=66;break}es.messages&&console.log(this.id,"received META "+JSON.stringify(f)),this.convertReflectorMessage(f),es.messages&&console.log(this.id,"converted to "+JSON.stringify(f)),t.next=77;break;case 66:t.prev=66,m=this.decryptPayload(f[2]),p=v(m,3),y=p[0],b=p[1],Z=p[2],f[2]=y,b===this.viewId&&this.addToStatistics(Z,this.lastReceived),es.messages&&console.log(this.id,"received "+JSON.stringify(f)),t.next=77;break;case 73:return t.prev=73,t.t4=t.catch(66),this.connection.closeConnectionWithError("RECV",Error("failed to decrypt message: ".concat(t.t4.message)),4200),t.abrupt("return");case 77:return this.networkQueue.put(f),this.timeFromReflector(f[0]),t.abrupt("return");case 80:if(this.island){t.next=82;break}return t.abrupt("return");case 82:return g="number"==typeof n?n:n.time,es.ticks&&console.log(this.id,"Controller received TICK "+g),this.timeFromReflector(g),this.tickMultiplier&&this.multiplyTick(g),t.abrupt("return");case 87:return X=n.msg,w=n.options,qt.showMessage(X,w),t.abrupt("return");case 90:return this.cpuTime=1e4,t.abrupt("return");case 92:return console.log(this.id,"Controller received LEAVE"),this.leave(),t.abrupt("return");case 95:console.warn("Unknown action:",e,n);case 96:case"end":return t.stop()}}),t,this,[[8,31,34,37],[16,20],[40,46],[66,73]])}))),function(t,e){return f.apply(this,arguments)})},{key:"install",value:function(t){es.session&&console.log("".concat(this.id," installing island"));var e=this.islandCreator,n=e.snapshot,r=e.initFn,i=e.options,o=new Ls(n,(function(){try{return r(i,t)}catch(t){throw zt("initFn",t),t}}));if(es.initsnapshot&&!n.modelsById){var a=JSON.stringify(o.snapshot());o=new Ls(JSON.parse(a),(function(){return r(i)}))}var s=this.lastKnownTime(o);this.time=Math.max(this.time,s),this.setIsland(o)}},{key:"setIsland",value:function(t){this.island=t,this.island.controller=this}},{key:"join",value:(h=r(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkForConnection(!1),t.next=3,this.connection.connectionPromise;case 3:os.add(this),es.session&&console.log(this.id,"Controller sending JOIN"),e=this.getTickAndMultiplier(),n=e.tick,r=e.delay,i=this.islandCreator,o=i.name,a=i.codeHash,s=i.appId,c=i.islandId,l={name:o,version:1,user:this.viewId,ticks:{tick:n,delay:r},url:qt.referrerURL(),codeHash:a,sdk:qa},s&&Object.assign(l,{appId:s,islandId:c}),this.connection.send(JSON.stringify({id:this.id,action:"JOIN",args:l}));case 10:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"leave",value:function(){this.connected&&(console.log(this.id,"LEAVING session for ".concat(this.islandCreator.name)),this.connection.send(JSON.stringify({id:this.id,action:"LEAVING"})));var t=this.islandCreator.destroyerFn;if(this.reset(),os.delete(this),!this.islandCreator)throw Error("do not discard islandCreator!");t&&t()}},{key:"encrypt",value:(d=r(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Hi.random(16),r=zi.encrypt(e,this.key,{iv:n}),i=ji(e,this.key),o="".concat(Ni.stringify(n)).concat(Ni.stringify(i)).concat(r),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"decrypt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.key,n=Ni.parse(t.slice(0,24)),r=Ni.parse(t.slice(24,68)),i=t.slice(68),o=zi.decrypt(i,e,{iv:n}),a="";try{a=Vi.stringify(o)}catch(t){}var s=ji(a,this.key);if(this.compareHmacs(r.words,s.words))return a;if(e!==this.oldKey)return this.decrypt(t,this.oldKey);throw Error("Decryption error")}},{key:"decryptBinary",value:function(t,e){var n,r,i,o,a,s=(new TextDecoder).decode(new Uint8Array(t,0,4));switch("string"==typeof e&&(e=Ni.parse(e)),s){case"CRQ0":n=(new TextDecoder).decode(t),r=Ni.parse(n.slice(4,28)),i=Ni.parse(n.slice(28,72)),o=n.slice(72),a=zi.decrypt(o,e,{iv:r});break;case"CRQ1":n=new Uint8Array(t),r=Hi.create(n.subarray(4,20)),i=Hi.create(n.subarray(20,52)),o=Hi.create(n.subarray(52)),a=zi.decrypt({ciphertext:o},e,{iv:r});break;default:throw Error("".concat(this.id," unknown encryption version ").concat(s))}a.clamp();var c=ji(a,e);if(this.compareHmacs(i.words,c.words))return this.cryptoJsWordArrayToUint8Array(a);if(e!==this.oldKey)return this.decryptBinary(t,this.oldKey);throw Error("Decryption error")}},{key:"cryptoJsWordArrayToUint8Array",value:function(t){for(var e=t.sigBytes,n=t.words,r=new Uint8Array(e),i=0,o=0;i!==e;){var a=n[o++];if(r[i++]=(4278190080&a)>>>24,i===e)break;if(r[i++]=(16711680&a)>>>16,i===e)break;if(r[i++]=(65280&a)>>>8,i===e)break;r[i++]=255&a}return r}},{key:"encryptMessage",value:(u=r(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.asState(),o=v(i,3),a=o[0],s=o[1],c=o[2],t.next=3,this.encryptPayload([c,n,r]);case 3:return l=t.sent,t.abrupt("return",[a,s,l]);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return u.apply(this,arguments)})},{key:"encryptPayload",value:(c=r(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.encrypt(JSON.stringify(e)));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"decryptPayload",value:function(t){return JSON.parse(this.decrypt(t))}},{key:"compareHmacs",value:function(t,e){for(var n=t.length===e.length,r=0;r<t.length;r++)t[r]!==e[r]&&(n=!1);return n}},{key:"sendMessage",value:(s=r(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connected){t.next=2;break}return t.abrupt("return");case 2:if(!this.viewOnly){t.next=4;break}return t.abrupt("return");case 4:return es.sends&&console.log(this.id,"sending SEND ".concat(e.asState())),this.lastSent=Date.now(),t.next=8,this.encryptMessage(e,this.viewId,this.lastSent);case 8:n=t.sent,this.connection.send(JSON.stringify({id:this.id,action:"SEND",args:[].concat(g(n),[this.latency])}));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"sendTagged",value:(o=r(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connected){t.next=2;break}return t.abrupt("return");case 2:if(!this.viewOnly){t.next=4;break}return t.abrupt("return");case 4:return es.sends&&console.log(this.id,"sending tagged SEND ".concat(e.asState()," with tags ").concat(JSON.stringify(n))),this.lastSent=Date.now(),t.next=8,this.encryptMessage(e,this.viewId,this.lastSent);case 8:r=t.sent,this.connection.send(JSON.stringify({id:this.id,action:"SEND",args:[].concat(g(r),[this.latency]),tags:n}));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"sendTutti",value:(n=r(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,c,l=this,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=u.length>3&&void 0!==u[3]?u[3]:null,o=!(u.length>4&&void 0!==u[4])||u[4],a=u.length>5&&void 0!==u[5]?u[5]:null,this.connected){t.next=5;break}return t.abrupt("return",null);case 5:if(!this.viewOnly){t.next=7;break}return t.abrupt("return",null);case 7:if(s=ue(r),es.sends&&console.log(this.id,"sending TUTTI ".concat(s," ").concat(i&&i.asState()," ").concat(a)),this.lastSent=Date.now(),t.t0=i,!t.t0){t.next=15;break}return t.next=14,this.encryptMessage(i,this.viewId,this.lastSent);case 14:t.t0=t.sent;case 15:return c=t.t0,this.connection.send(JSON.stringify({id:this.id,action:"TUTTI",args:[e,n,s,c,o,a]})),t.abrupt("return",new Promise((function(t){l.tuttiHistory.length>100&&l.tuttiHistory.shift(),l.tuttiHistory.push({tuttiSeq:n,payload:s,resolve:t})})));case 18:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"sendLog",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.connected&&(e.length<2&&(e=e[0]),this.connection.send(JSON.stringify({action:"LOG",args:e})))}},{key:"addToStatistics",value:function(t,e){this.latency=e-t,this.latencyHistory&&(this.latencyHistory.length>=100&&this.latencyHistory.shift(),this.latencyHistory.push({time:e,ms:this.latency}))}},{key:"getTickAndMultiplier",value:function(){var t=this.islandCreator.options,n=v(((["number","string"].includes(e(t.tps))?t.tps:["number","string"].includes(e(this.islandCreator.tps))?this.islandCreator.tps:20)+"x").split("x").map((function(t){return Number.parseInt("0"+t,10)})),2),r=n[0],i=n[1],o=1e3/Math.max(1/30,Math.min(60,r)),a=Math.max(1,i),s=0;return a>1&&!ns&&(this.tickMultiplier={tick:o,multiplier:a},s=Math.ceil(o*(a-1)/a)),{tick:o,multiplier:a,delay:s}}},{key:"requestTicks",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.connected&&this.island){var e=this.getTickAndMultiplier(),n=e.tick,r=e.delay;t.tick=n,t.delay=r,this.connection.setTick(n),es.session&&console.log(this.id,"Controller requesting TICKS",t);try{this.connection.send(JSON.stringify({id:this.id,action:"TICKS",args:t}))}catch(t){console.error("ERROR while sending",t)}}}},{key:"simulate",value:function(t){var e=this;if(!this.island)return!0;try{var n=!0;if(this.networkQueue.size+this.island.messages.size===0)n=this.island.advanceTo(this.time,t);else{for(var r=Kt.begin("simulate");n;){var i=this.networkQueue.peek();if(!i)break;if(!(n=this.island.advanceTo(i[0],t)))break;this.networkQueue.nextNonBlocking();var o=this.island.scheduleExternalMessage(i);n=this.island.advanceTo(o.time,t),this.cpuTime+=5}n&&(n=this.island.advanceTo(this.time,t)),this.cpuTime+=Math.max(.01,Kt.end("simulate")-r)}var a=this.backlog;if(Kt.backlog(a),"boolean"==typeof this.synced&&(this.synced&&a>1e3||!this.synced&&a<100))!this.synced?this.syncTimer||(this.syncTimer=setTimeout((function(){delete e.syncTimer,e.backlog<100&&e.applySyncChange(!0)}),200)):this.applySyncChange(!1);return n&&this.cpuTime>5e3&&(this.triggeringCpuTime=this.cpuTime,this.cpuTime=0,setTimeout((function(){return e.scheduleSnapshot()}),Math.floor(2e3*Math.random()))),n}catch(t){return zt("simulate",t),this.connection.closeConnectionWithError("simulate",t),"error"}}},{key:"applySyncChange",value:function(t){this.synced=t,qt.showSyncWait(!t),this.island.publishFromView(this.viewId,"synced",t)}},{key:"inViewRealm",value:function(t){var e=this;return le(this.island,(function(){return t(e.island)}))}},{key:"processModelViewEvents",value:function(){return this.island?this.island.processModelViewEvents():0}},{key:"timeFromReflector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reflector";t<this.time?("controller"!==e||es.ticks)&&console.warn("time is ".concat(this.time,", ignoring time ").concat(t," from ").concat(e)):("boolean"!=typeof this.synced&&(this.synced=!1),this.time=t,this.extrapolatedTimeBase=Date.now()-t,this.island&&Kt.backlog(this.backlog),this.tickHook&&this.tickHook())}},{key:"multiplyTick",value:function(t){var e=this;this.localTicker&&window.clearInterval(this.localTicker);var n=this.tickMultiplier,r=n.tick,i=n.multiplier,o=r/i,a=1;this.localTicker=window.setInterval((function(){e.timeFromReflector(t+a*o,"controller"),es.ticks&&console.log(e.id,"Controller generate TICK "+e.time,a),++a>=i&&(window.clearInterval(e.localTicker),e.localTicker=0)}),o)}},{key:"toString",value:function(){return"Controller[".concat(this.id,"]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}},{key:"id",get:function(){return this.island?this.island.id:this.islandCreator.snapshot.id}},{key:"extrapolatedNow",get:function(){return Date.now()-this.extrapolatedTimeBase}},{key:"viewOnly",get:function(){return this.islandCreator.viewOnly}},{key:"backlog",get:function(){return this.island?this.time-this.island.time:0}},{key:"starvation",get:function(){return Date.now()-this.lastReceived}},{key:"activity",get:function(){return Date.now()-this.lastSent}},{key:"connected",get:function(){return this.connection.connected}},{key:"latencies",get:function(){return this.latencyHistory||(this.latencyHistory=[]),this.latencyHistory}}]),t}(),cs=function(){function t(e){i(this,t),this.controller=e,this.connectBlocked=!1,this.connectRestricted=!1,this.connectHasBeenCalled=!1,this.missingTickThreshold=1/0,this.setUpConnectionPromise()}var e;return a(t,[{key:"setTick",value:function(t){this.missingTickThreshold=Math.min(3*t,45e3)}},{key:"setUpConnectionPromise",value:function(){var t=this;this.connectionPromise=new Promise((function(e){return t.resolveConnection=e}))}},{key:"checkForConnection",value:function(t){this.socket||this.connectHasBeenCalled||this.connectBlocked||this.connectRestricted&&!t||this.connectToReflector()}},{key:"connectToReflector",value:(e=r(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.connectHasBeenCalled=!0,this.connectBlocked=!1,this.connectRestricted=!1,e=es.reflector?"wss://croquet.io/reflector-dev/dev":ts,n="",H.reflector&&(H.reflector.match(/^[-a-z0-9]+$/i)?n="?".concat(H.reflector):e=H.reflector),e.match(/^wss?:/)){t.next=8;break}throw Error("Cannot interpret reflector address "+e);case 8:return e.endsWith("/")||(e+="/"),t.abrupt("return",new Promise((function(t){var i=Object.assign(new WebSocket("".concat(e).concat(r.controller.id).concat(n)),{onopen:function(e){r.socket=i,es.session&&console.log(r.socket.constructor.name,"connected to",r.socket.url),Kt.connected(!0),r.resolveConnection(null),t()},onmessage:function(t){r.receive(t.data)},onerror:function(t){Mt("Connection error"),console.log(i.constructor.name,"error")},onclose:function(t){var e=1e3!==t.code&&t.code<4100,n=4110===t.code;n||1e3===t.code||Mt("Connection closed: ".concat(t.code," ").concat(t.reason),{duration:e?void 0:36e5}),es.session&&console.log(i.constructor.name,"closed:",t.code,t.reason),Kt.connected(!1),n?r.connectRestricted=!0:r.connectBlocked=!0,r.disconnected(),e&&(Vt("Reconnecting ..."),window.setTimeout((function(){return r.connectToReflector()}),2e3))}})})));case 10:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"disconnected",value:function(){this.socket&&(this.socket=null,this.lastReceived=0,this.lastSent=0,this.connectHasBeenCalled=!1,this.setUpConnectionPromise(),this.controller.leave())}},{key:"send",value:function(t){this.lastSent=Date.now(),this.socket.send(t)}},{key:"receive",value:function(t){this.lastReceived=Date.now();var e=JSON.parse(t),n=e.id,r=e.action,i=e.args;if(n)try{this.controller.receive(r,i)}catch(t){this.closeConnectionWithError("receive",t)}else switch(r){case"PONG":es.pong&&console.log("PONG after",Date.now()-i,"ms");break;default:console.warn("Unknown action",r)}}},{key:"dormantDisconnect",value:function(){this.connected&&(es.session&&console.log(this.id,"dormant; disconnecting from reflector"),this.socket.close(4110,"Going dormant"))}},{key:"closeConnectionWithError",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;console.error(e),console.warn("closing socket"),this.socket.close(n,"Error in "+t)}},{key:"PULSE",value:function(t){this.connected&&(0===this.socket.bufferedAmount?this.send(JSON.stringify({action:"PULSE"})):t-this.lastSent>500&&console.log("".concat(this.id," Reflector connection stalled: ").concat(this.socket.bufferedAmount," bytes unsent for ").concat(t-this.lastSent," ms")))}},{key:"keepAlive",value:function(t){0!==this.lastReceived&&(t-this.lastSent>2e4||t-this.lastReceived>this.missingTickThreshold)&&this.PULSE(t)}},{key:"id",get:function(){return this.controller.id}},{key:"connected",get:function(){return this.socket&&this.socket.readyState===WebSocket.OPEN}}]),t}();window.setInterval((function(){var t,e=k(os);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.connected&&n.connection.keepAlive(Date.now())}}catch(t){e.e(t)}finally{e.f()}}),100);var ls=Symbol("hash"),us=Symbol("key"),ds=Symbol("path"),hs=new Map;function fs(t){return H.has("debug",t,!1)}function ms(t,e){return t?"".concat(R("apps")).concat(t,"/data/").concat(e):"".concat(R("sessiondata")).concat(e)}function ps(t){return t.replace(/.*\//,"")}var ys=function(){var t,n;function o(t,e,n){i(this,o);var r=hs.get(t);if(r)return fs("data")&&console.log("Croquet.Data: using cached handle for ".concat(t)),r;Object.defineProperty(this,ls,{value:t}),Object.defineProperty(this,us,{value:e}),n&&Object.defineProperty(this,ds,{value:n}),hs.set(t,this),fs("data")&&console.log("Croquet.Data: created new handle for ".concat(t))}return a(o,null,[{key:"store",value:(n=r(regeneratorRuntime.mark((function t(n,r){var i,a,s,c,l,u,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===e(n)&&(console.warn("Deprecated: Croquet.Data.store(sessionId, data) called without sessionId"),r=n),!Ls.hasCurrent()){t.next=3;break}throw Error("Croquet.Data.store() called from Model code");case 3:return i=as(n),a=i.appId,s=i.islandId,c=i.uploadEncrypted,a||console.warn("Deprecated: Croquet.Data API used without declaring appId in Croquet.Session.join()"),l=Hi.random(32).toString(Ni),u=a&&"".concat(a,"/").concat(s),t.next=9,c({url:ms(u,"%HASH%"),content:r,key:l,debug:fs("data"),what:"data"});case 9:return d=t.sent,h=ps(d),t.abrupt("return",new o(h,l,u));case 12:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})},{key:"fetch",value:(t=r(regeneratorRuntime.mark((function t(n,r){var i,o,a,s,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===e(n)&&(console.warn("Deprecated: Croquet.Data.fetch(sessionId, handle) called without sessionId"),r=n),!Ls.hasCurrent()){t.next=3;break}throw Error("Croquet.Data.fetch() called from Model code");case 3:if(i=as(n),o=i.appId,a=i.downloadEncrypted,o||console.warn("Deprecated: Croquet.Data API used without declaring appId in Croquet.Session.join()"),s=r&&r[ls],c=r&&r[us],l=r&&r[ds],"string"==typeof s&&"string"==typeof c){t.next=10;break}throw Error("Croquet.Data.fetch() called with invalid handle");case 10:return u=ms(l,s),t.abrupt("return",a({url:u,key:c,debug:fs("data"),what:"data"}));case 12:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})},{key:"hash",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64url";"function"==typeof t&&(t=Function.prototype.toString.call(t)),"string"==typeof t?t=(new TextEncoder).encode(t):t&&t.constructor===DataView?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t&&t.constructor===ArrayBuffer?t=new Uint8Array(t):ArrayBuffer.isView(t)||(t=(new TextEncoder).encode(ue(t)));var n=Mi(Hi.create(t));switch(e){case"hex":return n.toString();case"base64":return n.toString(Ni);case"base64url":return n.toString(Ni).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");default:throw Error('Croquet.Data: unknown hash output "'.concat(e,'", expected "hex"/"base64"/"base64url"'))}}},{key:"fromId",value:function(t){var e=t.slice(0,1);switch(e){case"0":return new this(t.slice(1,44),t.slice(44));case"1":return new this(t.slice(1,44),t.slice(44,87)+"=",t.slice(87));default:throw Error("Croquet.Data expected handle v".concat("1"," got v").concat(e))}}},{key:"toId",value:function(t){if(t){var e=t[ls],n=t[us],r=t[ds];return r?"".concat("1").concat(e).concat(n.slice(0,-1)).concat(r):"0".concat(e).concat(n)}}}]),o}(),bs={cls:ys,write:function(t){return ys.toId(t)},read:function(t){return ys.fromId(t)}},vs=null,Zs={};function gs(t,e){var n=JSON.parse(atob(t.slice(1,-1))),r=n.qPara,i=n.qArgs,o=n.qFn,a=JSON.stringify(r),s=Zs[a]||(Zs[a]=m(Function,g(r)));return"number"==typeof o&&(i[o]=s),s.call.apply(s,[e].concat(g(i))).bind(e)}function Xs(t,e){if(vs)throw Error("Island confusion");if(!(t instanceof Ls))throw Error("not an island: "+t);var n=vs;try{vs=t,window.ISLAND=t,e()}finally{vs=n}}var ws="#__vote",Gs="#reflected",xs="#divergence",Ls=function(){function t(e,n){var r=this;i(this,t),t.installCustomMath(),Xs(this,(function(){ce(r,(function(){if(r.modelsById={},r.modelsByName={},r.messages=new $t((function(t,e){return t.before(e)})),r.subscriptions={},r.views={},r._random=function(){throw Error("You must not use random when applying state!")},r.id=e.id,r.time=0,r.seq=4294967280,r.externalTime=0,r.externalSeq=r.seq,r.futureSeq=0,r.tuttiSeq=0,r.lastSnapshotPoll=0,r.persisted="",r.modelsId=0,r.controller=null,e.modelsById){for(var t=Ps.newOrRecycled(r).readIsland(e,"$"),i=[],o=0,a=Object.keys(t);o<a.length;o++){var s=a[o];s in r||"meta"===s?"messages"===s?i=t.messages:r[s]=t[s]:console.warn("Ignoring property snapshot.".concat(s))}var c,l=k(i);try{for(l.s();!(c=l.n()).done;){var u=c.value;r.messages.add(u.convertIfNeeded(r))}}catch(t){l.e(t)}finally{l.f()}}else r._random=new de(e.id,{state:!0}),n(r),r.addSubscription(r,r.id,"__views__",r.generateJoinExit)}))}))}return a(t,null,[{key:"current",value:function(){return vs||console.warn("No CurrentIsland!"),vs}},{key:"hasCurrent",value:function(){return!!vs}},{key:"installCustomMath",value:function(){if(!window.BrowserMath){window.CroquetMath.random=function(){return vs.random()},window.BrowserMath={};for(var t=function(){var t=v(n[e],2),r=t[0],i=t[1],o=window.Math[r];window.BrowserMath[r]=o,window.Math[r]=["pow","atan2"].includes(r)?function(t,e){return vs?i(t,e):o(t,e)}:function(t){return vs?i(t):o(t)}},e=0,n=Object.entries(window.CroquetMath);e<n.length;e++)t()}}}]),a(t,[{key:"registerModel",value:function(t,e){if(vs!==this)throw Error("Island Error");return e||(e=this.id+"/M"+ ++this.modelsId),this.modelsById[e]=t,e}},{key:"deregisterModel",value:function(t){if(vs!==this)throw Error("Island Error");var e=this.modelsById;delete this.modelsById[t];for(var n=0,r=Object.entries(this.modelsByName);n<r.length;n++){var i=v(r[n],2),o=i[0];e===i[1]&&delete this.modelsByName[o]}this.messages.removeMany((function(e){return e.hasReceiver(t)}))}},{key:"lookUpModel",value:function(t){if(t===this.id)return this;var e=this.modelsById[t];if(e)return e;var n=v(t.match(/^([^#]+)#(.*)$/),3),r=(n[0],n[1]),i=n[2];return this.modelsById[r].lookUp(i)}},{key:"get",value:function(t){return this.modelsByName[t]}},{key:"set",value:function(t,e){if(vs!==this)throw Error("Island Error");this.modelsByName[t]=e}},{key:"getNextTuttiSeq",value:function(){return this.tuttiSeq=this.tuttiSeq+1>>>0,this.tuttiSeq}},{key:"callModelMethod",value:function(t,e,n){if(vs)throw Error("Island Error");var r=this.lookUpModel(t);if(r){var i=new Ys(this.time,0,r.id,e,n);this.controller.sendMessage(i)}else console.error(Error("Model not found: ".concat(t)))}},{key:"noop",value:function(){}},{key:"generateJoinExit",value:function(t){var e=t.entered,n=t.exited,r=t.count;if(0!==e.length&&0!==n.length){var i=e.filter((function(t){return n.includes(t)}));if(0!==i.length&&(e=e.filter((function(t){return!i.includes(t)})),n=n.filter((function(t){return!i.includes(t)})),0===e.length&&0===n.length))return}if(e.length===r){var o,a=k(n=Object.keys(this.views));try{for(a.s();!(o=a.n()).done;){var s=o.value;this.views[s].extraConnections=0}}catch(t){a.e(t)}finally{a.f()}}var c,l=k(n);try{for(l.s();!(c=l.n()).done;){var u=c.value;if(this.views[u]){if(this.views[u].extraConnections){this.views[u].extraConnections--,console.warn("@".concat(this.time,"#").concat(this.seq," view ").concat(u," exited after joining twice, ignoring"));continue}delete this.views[u],this.publishFromModelOnly(this.id,"view-exit",u)}else console.error("@".concat(this.time,"#").concat(this.seq," view ").concat(u," exited without being present - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," ").concat(u," left without being present"))}}catch(t){l.e(t)}finally{l.f()}var d,h=k(e);try{for(h.s();!(d=h.n()).done;){var f=d.value;this.views[f]?(console.warn("@".concat(this.time,"#").concat(this.seq," view ").concat(f," joined but already present, ignoring")),this.views[f].extraConnections=(this.views[f].extraConnections||0)+1):(this.views[f]={},this.publishFromModelOnly(this.id,"view-join",f))}}catch(t){h.e(t)}finally{h.f()}var m=Object.values(this.views).reduce((function(t,e){return t+1+(e.extraConnections||0)}),0);r!==m&&(console.error("@".concat(this.time,"#").concat(this.seq," view count mismatch (client: ").concat(m,", server: ").concat(r,") - this should not happen")),this.controller.sendLog("view-exit-mismatch @".concat(this.time,"#").concat(this.seq," connections reported: ").concat(m," actual: ").concat(r)))}},{key:"scheduleExternalMessage",value:function(t){var e=Ys.fromState(t,this);if(e.time<this.time)throw Error("past message from reflector "+t);var n=this.externalSeq+1>>>0;if(e.seq!==n)throw Error("External message error. Expected message #".concat(n," got #").concat(e.seq));return this.externalTime=e.time,this.externalSeq=e.seq,e.seq=2*e.seq+1,this.messages.add(e),e}},{key:"futureSend",value:function(t,e,n,r){if(t.every)return this.futureRepeat(t.every,e,n,r);if(t<0)throw Error("attempt to send future message into the past");this.futureSeq=this.futureSeq+1>>>0;var i=new Ys(this.time+t,2*this.futureSeq,e,n,r);return this.messages.add(i),i}},{key:"futureRepeat",value:function(t,e,n,r){this.futureSend(t,this.id,"futureExecAndRepeat",[t,e,n,r])}},{key:"futureExecAndRepeat",value:function(t,e,n,r){var i=this.lookUpModel(e);if("function"==typeof i[n])try{i[n].apply(i,g(r))}catch(t){zt("future message ".concat(i,".").concat(n),t)}else{var o=gs(n,i);try{o.apply(void 0,g(r))}catch(t){zt("future message ".concat(i," ").concat(o),t)}}this.futureRepeat(t,e,n,r)}},{key:"future",value:function(t,e,n,r){var i=this.asQFunc(t,n);if("string"==typeof i)return this.futureSend(e,t.id,i,r);var o=this;return new Proxy(t,{get:function(n,r){if("function"==typeof t[r])return function(){if(o.lookUpModel(t.id)!==t)throw Error("future send to unregistered model");for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o.futureSend(e,t.id,r,i)};throw Error("Tried to call "+r+"() on future of "+Object.getPrototypeOf(t).constructor.name+" which is not a function")}})}},{key:"advanceTo",value:function(t,e){if(vs)throw Error("Island Error");for(var n,r=0;(n=this.messages.peek())&&n.time<=t;){var i=n,o=i.time,a=i.seq;if(o<this.time)throw Error("past message encountered: "+n);if(1&a&&(this.seq=this.seq+1>>>0,a/2>>>0!==this.seq))throw Error("Sequence error: expected ".concat(this.seq," got ").concat(a/2>>>0," in ").concat(n));if(this.messages.poll(),this.time=n.time,n.executeOn(this),++r>100&&(r=0,Date.now()>e))return!1}return this.time=t,!0}},{key:"asQFunc",value:function(t,e){if("string"==typeof e)return e;if("function"==typeof e){if(t[e.name]===e)return e.name;for(var n=t;null!==n;){for(var r=0,i=Object.entries(Object.getOwnPropertyDescriptors(n));r<i.length;r++){var o=v(i[r],2),a=o[0];if(o[1].value===e)return a}n=Object.getPrototypeOf(n)}var s=e.toString().match(/^\(?([a-z][a-z0-9]*)?\)? *=> *this\.([a-z][a-z0-9]*) *\( *([a-z][a-z0-9]*)? *\) *$/i);return!s||s[3]&&s[3]!==s[1]?function(t,e){"function"==typeof t&&(e=t,t={});var n=Object.keys(t).concat(["return "+e]),r=Object.values(t),i={qPara:n,qArgs:r},o=r.indexOf(e);return o>=0&&(r[o]=n[o],i.qFn=o),"{".concat(btoa(JSON.stringify(i)),"}")}(e):s[2]}return null}},{key:"addSubscription",value:function(t,e,n,r){if(vs!==this)throw Error("Island Error");var i=this.asQFunc(t,r);if("string"!=typeof i)throw Error('Subscription handler for "'.concat(n,'" must be a method name'));if(i.indexOf(".")<0&&"function"!=typeof t[i]&&"{"!==i[0])throw Error('Subscriber method for "'.concat(n,'" not found: ').concat(t,".").concat(i,"()"));var o=e+":"+n,a=t.id+"."+i;if(this.subscriptions[o]){if(-1!==this.subscriptions[o].indexOf(a))throw Error("".concat(t,".").concat(i," already subscribed to ").concat(n))}else this.subscriptions[o]=[];this.subscriptions[o].push(a)}},{key:"removeSubscription",value:function(t,e,n,r){if(vs!==this)throw Error("Island Error");var i=e+":"+n,o=t.id+"."+r,a=this.subscriptions[i];if(a){var s=a.indexOf(o);a.splice(s,1),0===a.length&&delete this.subscriptions[i]}}},{key:"removeAllSubscriptionsFor",value:function(t){for(var e="".concat(t.id,":"),n="".concat(t.id,"."),r=0,i=Object.entries(this.subscriptions);r<i.length;r++){var o=v(i[r],2),a=o[0],s=o[1];if(a.startsWith(e))delete this.subscriptions[a];else{for(var c=s.length-1;c>=0;c--)s[c].startsWith(n)&&s.splice(c,1);0===s.size&&delete this.subscriptions[a]}}}},{key:"publishFromModel",value:function(t,e,n){if(vs!==this)throw Error("Island Error");var r=e.endsWith(Gs);r&&(e=e.slice(0,e.length-Gs.length));var i=t+":"+e;this.handleModelEventInModel(i,n,r),this.handleModelEventInView(i,n)}},{key:"publishFromModelOnly",value:function(t,e,n){if(vs!==this)throw Error("Island Error");var r=t+":"+e;this.handleModelEventInModel(r,n)}},{key:"publishFromView",value:function(t,e,n){if(vs)throw Error("Island Error");var r=t+":"+e;this.handleViewEventInModel(r,n),this.handleViewEventInView(r,n)}},{key:"handleModelEventInModel",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(vs!==this)throw Error("Island Error");if(n){var r=this.getNextTuttiSeq();if(!0!==this.controller.synced)return;var i=t+ws,o=t+xs,a=!!ne.subscriptions[i],s=!!this.subscriptions[t],c=!!this.subscriptions[o];a&&c&&console.log("divergence subscription for ".concat(t," overridden by vote subscription"));var l,u=s?new Ys(this.time,0,this.id,"handleModelEventInModel",[t,e]):null;l=a?[this.id,"handleModelEventInView",i]:[this.id,"handleTuttiDivergence",o],this.controller.sendTutti(this.time,r,e,u,a,l)}else if(this.subscriptions[t]){var d,h=k(this.subscriptions[t]);try{for(h.s();!(d=h.n()).done;){var f=d.value,m=f.split("."),p=Z(m),y=p[0],b=p.slice(1),v=b.join("."),g=this.lookUpModel(y);if(g)if("{"!==v[0])if(-1===v.indexOf(".")){if("function"!=typeof g[v]){zt("event ".concat(t," ").concat(g,".").concat(v,"(): method not found"));continue}try{g[v](e)}catch(e){zt("event ".concat(t," ").concat(g,".").concat(v,"()"),e)}}else try{var X=v.split(".");g.call(X[0],X[1],e)}catch(e){zt("event ".concat(t," ").concat(g,".").concat(v,"()"),e)}else{var w=gs(v,g);try{w(e)}catch(e){zt("event ".concat(t," ").concat(g," ").concat(w),e)}}else Vt("event ".concat(t," .").concat(v,"(): subscriber not found"))}}catch(t){h.e(t)}finally{h.f()}}}},{key:"handleViewEventInModel",value:function(t,e){if(this.subscriptions[t]){var n=new Ys(this.time,0,this.id,"handleModelEventInModel",[t,e]);this.controller.sendMessage(n)}}},{key:"handleModelEventInView",value:function(t,e){var n=this;ne.handleEvent(t,e,(function(t){return function(t){if(!vs)throw Error("Island confusion");var e=vs;try{vs=null,t()}finally{vs=e}}((function(){return le(n,t,!0)}))}))}},{key:"handleViewEventInView",value:function(t,e){ne.handleEvent(t,e)}},{key:"handleTuttiDivergence",value:function(t,e){if(this.subscriptions[t])this.handleModelEventInModel(t,e);else{var n=t.split(":").slice(-1)[0];console.warn("uncaptured divergence in ".concat(n,":"),e)}}},{key:"processModelViewEvents",value:function(){var t=this;if(vs)throw Error("Island Error");return le(this,(function(){return ne.processFrameEvents(!!t.controller.synced)}))}},{key:"pollToCheckSync",value:function(){var t=this,e=this.time,n=this.getNextTuttiSeq();if(!0===this.controller.synced){var r=Date.now(),i=this.getSummaryHash(),o=Date.now()-r;this.controller.cpuTime-=o,Promise.resolve().then((function(){return t.controller.syncCheck(e,n,i)}))}}},{key:"handlePollForSnapshot",value:function(){var t=this.getNextTuttiSeq(),e=this.time,n=e-this.lastSnapshotPoll;n<5e3?console.log("rejecting snapshot poll ".concat(n,"ms after previous")):(this.lastSnapshotPoll=e,this.controller.handlePollForSnapshot(e,t))}},{key:"snapshot",value:function(){return Is.newOrRecycled(this).snapshot(this,"$")}},{key:"getSummaryHash",value:function(){return ue((new Ks).getHash(this))}},{key:"persist",value:function(t,n){var r=this,i=Kt.begin("snapshot"),o="function"==typeof n?n.call(t):n;if("object"!==e(o))throw Error("Croquet: persistSession() can only persist objects (got ".concat(e(o),")"));var a=ue(o),s=ys.hash(a),c=Kt.end("snapshot")-i,l=H.has("debug","snapshot"),u=this.persisted===s;if(l&&console.log("".concat(this.id," persistent data collected, stringified and hashed in ").concat(Math.ceil(c),"ms").concat(u?" (unchanged, ignoring)":"")),!u&&(this.persisted=s,this.controller)){var d=this.time,h=this.getNextTuttiSeq();Promise.resolve().then((function(){return r.controller.persist(d,h,a,s,c)}))}}},{key:"random",value:function(){if(vs!==this)throw Error("Island Error");return this._random()}},{key:"randomID",value:function(){if(vs!==this)throw Error("Island Error");for(var t="",e=0;e<4;e++)t+=(this._random.int32()>>>0).toString(16).padStart(8,"0");return t}},{key:"toString",value:function(){return"Island[".concat(this.id,"]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}}]),t}();function ks(t,e,n){n.length>0&&(n=Ts.newOrRecycled().encode(n));return"".concat(t,">").concat(e).concat(n.length>0?JSON.stringify(n):"")}function Ws(t,e){var n=v(t.match(/^([^[]+)(\[.*)?$/i),3),r=(n[0],n[1]),i=n[2],o=v(r.split(">"),2),a=o[0],s=o[1],c=[];i&&(c=Hs.newOrRecycled(e).decode(JSON.parse(i)));return{receiver:a,selector:s,args:c}}function Ss(t,e){return(e-t|0)>=0}var Ys=function(){function t(e,n,r,o,a){i(this,t),this.time=e,this.seq=n,this.receiver=r,this.selector=o,this.args=a}return a(t,[{key:"convertIfNeeded",value:function(t){if(this.payload){var e=Ws(this.payload,t),n=e.receiver,r=e.selector,i=e.args;delete this.payload,this.receiver=n,this.selector=r,this.args=i}return this}},{key:"before",value:function(t){return this.time!==t.time?this.time<t.time:this.isExternal()!==t.isExternal()?t.isExternal():this.isExternal()?Ss(this.externalSeq,t.externalSeq):Ss(this.internalSeq,t.internalSeq)}},{key:"hasReceiver",value:function(t){return this.receiver===t}},{key:"isExternal",value:function(){return 1&this.seq}},{key:"asState",value:function(){return[this.time,this.seq,ks(this.receiver,this.selector,this.args)]}},{key:"executeOn",value:function(t){var e=this,n=this.receiver,r=this.selector,i=this.args,o=t.lookUpModel(n);if(o)if("{"===r[0]){var a=gs(r,o);Xs(t,(function(){ce(t,(function(){try{a.apply(void 0,g(i))}catch(t){zt("".concat(e.shortString()," ").concat(a),t)}}))}))}else"function"!=typeof o[r]?Vt("".concat(this.shortString()," ").concat(o,".").concat(r,"(): method not found")):Xs(t,(function(){ce(t,(function(){try{o[r].apply(o,g(i))}catch(t){zt("".concat(e.shortString()," ").concat(o,".").concat(r,"()"),t)}}))}));else Vt("".concat(this.shortString()," ").concat(r,"(): receiver not found"))}},{key:"shortString",value:function(){return"".concat(this.isExternal()?"External":"Future","Message")}},{key:"toString",value:function(){var t=this.receiver,e=this.selector,n=this.args,r=this.isExternal(),i=r?this.externalSeq:this.internalSeq;return"".concat(r?"External":"Future","Message[").concat(this.time).concat(":#"[+r]).concat(i," ").concat(t,".").concat(e,"(").concat(n.map(JSON.stringify).join(", "),")]")}},{key:Symbol.toPrimitive,value:function(){return this.toString()}},{key:"externalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t+1}},{key:"internalSeq",get:function(){return this.seq/2>>>0},set:function(t){this.seq=2*t}}],[{key:"fromState",value:function(e,n){var r=v(e,3),i=r[0],o=r[1],a=Ws(r[2],n);return new t(i,o,a.receiver,a.selector,a.args)}}]),t}(),Cs=function(){var t=new ArrayBuffer(8),e=new DataView(t);return function(t){return e.setFloat64(0,t,!0),e.getInt32(0,!0)+e.getInt32(4,!0)}}(),Ks=function(){function t(){i(this,t),this.refs=new Map,this.todo=[],this.hashers=new Map,this.addHasher("Teatime:Message",Ys),this.addHasher("Teatime:Data",bs);var e,n=k(js.allClassTypes());try{for(n.s();!(e=n.n()).done;){var r=v(e.value,2),o=r[0],a=r[1];this.addHasher(o,a)}}catch(t){n.e(t)}finally{n.f()}}return a(t,[{key:"addHasher",value:function(t,e){var n=this,r=Object.getPrototypeOf(e)===Object.prototype?e:{cls:e,write:function(t){return Object.assign({},t)}},i=r.cls,o=r.write;this.hashers.set(i,(function(t){return n.hashStructure(t,o(t))}))}},{key:"getHash",value:function(t){this.hashState={oC:0,mC:0,nanC:0,infC:0,zC:0,nC:0,nH:0,sC:0,sL:0,fC:0};for(var e=0,n=Object.entries(t);e<n.length;e++){var r=v(n[e],2),i=r[0],o=r[1];if("controller"!==i&&"meta"!==i)if("_random"===i)this.hash(o.state(),!1);else if("messages"===i){var a=o.asArray();(this.hashState.fC=a.length)&&this.hash(a,!1)}else this.hashEntry(i,o)}return this.hashDeferred(),this.hashState}},{key:"hashDeferred",value:function(){for(;this.todo.length>0;){var t=this.todo.shift(),e=t.key,n=t.value;this.hashEntry(e,n,!1)}}},{key:"hash",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(e(t)){case"number":return void(Number.isNaN(t)?this.hashState.nanC++:Number.isFinite(t)?0===t?this.hashState.zC++:(this.hashState.nC++,this.hashState.nH+=Cs(t)):this.hashState.infC++);case"string":return this.hashState.sC++,void(this.hashState.sL+=t.length);case"boolean":case"undefined":return;default:var r=Object.prototype.toString.call(t).slice(8,-1);switch(r){case"Array":return void this.hashArray(t,n);case"ArrayBuffer":return void this.hashArray(new Uint8Array(t),!1);case"Set":case"Map":return void this.hashStructure(t,g(t));case"DataView":return void this.hashArray(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),!1);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return void this.hashArray(t,!1);case"Object":if(t instanceof js)this.hashModel(t);else if(t.constructor===Object)this.hashObject(t,n);else{var i=this.hashers.get(t.constructor);if(!i)throw Error("Don't know how to hash ".concat(t.constructor.name));i(t)}return;case"Null":return;default:throw Error("Don't know how to hash ".concat(r))}}}},{key:"hashModel",value:function(t){if(!this.refs.has(t)){this.hashState.mC++,this.refs.set(t,!0);for(var e=0,n=Object.entries(t);e<n.length;e++){var r=v(n[e],2),i=r[0],o=r[1];"__realm"!==i&&(void 0!==o&&this.hashEntry(i,o))}}}},{key:"hashObject",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.refs.has(t)){this.hashState.oC++,this.refs.set(t,!0);for(var n=0,r=Object.entries(t);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];void 0!==a&&this.hashEntry(o,a,e)}}}},{key:"hashArray",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.refs.has(t)){this.refs.set(t,!0);for(var n=0;n<t.length;n++)this.hashEntry(n,t[n],e)}}},{key:"hashStructure",value:function(t,e){void 0!==e&&(this.refs.has(t)||(this.refs.set(t,!0),this.hash(e,!1)))}},{key:"hashEntry",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"$"!==t[0]?r&&"object"===e(n)?this.todo.push({key:t,value:n}):this.hash(n):Vt("hash: ignoring property ".concat(t),{only:"once"})}}]),t}(),Is=function(){function t(e){i(this,t),this.island=e,this.nextRef=1,this.refs=new Map,this.todo=[],this.writers=new Map,this.addWriter("Teatime:Message",Ys),this.addWriter("Teatime:Data",bs);var n,r=k(js.allClassTypes());try{for(r.s();!(n=r.n()).done;){var o=v(n.value,2),a=o[0],s=o[1];this.addWriter(a,s)}}catch(t){r.e(t)}finally{r.f()}}return a(t,null,[{key:"newOrRecycled",value:function(t){var e=this.reusableInstance;return e?(e.island=t,e.nextRef=1,e.refs=new Map,e.todo=[]):e=this.reusableInstance=new this(t),e}},{key:"resetInstance",value:function(){this.reusableInstance=null}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(t){this[this.name+"-instance"]=t}}]),a(t,[{key:"addWriter",value:function(t,e){var n=this,r=Object.getPrototypeOf(e)===Object.prototype?e:{cls:e,write:function(t){return Object.assign({},t)}},i=r.cls,o=r.write;this.writers.set(i,(function(e,r){return n.writeAs(t,e,o(e),r)}))}},{key:"snapshot",value:function(t){for(var e={_random:t._random.state(),messages:this.write(t.messages.asArray())},n=0,r=Object.entries(t);n<r.length;n++){var i=v(r[n],2),o=i[0],a=i[1];"controller"!==o&&(e[o]||this.writeInto(e,o,a,"$"))}return this.writeDeferred(),e}},{key:"writeDeferred",value:function(){for(;this.todo.length>0;){var t=this.todo.shift(),e=t.state,n=t.key,r=t.value,i=t.path;this.writeInto(e,n,r,i,!1)}}},{key:"write",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e(t)){case"number":return Object.is(t,-0)?{$class:"NegZero"}:Number.isSafeInteger(t)?t:Number.isNaN(t)?{$class:"NaN"}:Number.isFinite(t)?this.writeFloat(t):{$class:"Infinity",$value:Math.sign(t)};case"string":case"boolean":case"undefined":return t;default:var i=Object.prototype.toString.call(t).slice(8,-1);switch(i){case"Array":return this.writeArray(t,n,r);case"ArrayBuffer":return this.writeArrayBuffer(t);case"Set":case"Map":return this.writeAs(i,t,g(t),n);case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":return this.writeTypedArray(i,t);case"Object":if(t instanceof js)return this.writeModel(t,n);if(t.constructor===Object)return this.writeObject(t,n,r);var o=this.writers.get(t.constructor);if(o)return o(t,n);throw Error("Don't know how to write ".concat(t.constructor.name," at ").concat(n));case"Null":return t;default:throw Error("Don't know how to write ".concat(i," at ").concat(n))}}}},{key:"writeModel",value:function(t,e){if(this.refs.has(t))return this.writeRef(t);var n={$model:js.classToID(t.constructor)};this.refs.set(t,n);var r,i=k(Object.keys(t).sort());try{for(i.s();!(r=i.n()).done;){var o=r.value;if("__realm"!==o){var a=t[o];void 0!==a&&this.writeInto(n,o,a,e)}}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"writeObject",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.refs.has(t))return this.writeRef(t);var r={};this.refs.set(t,r);var i,o=k(Object.keys(t).sort());try{for(o.s();!(i=o.n()).done;){var a=i.value,s=t[a];void 0!==s&&this.writeInto(r,a,s,e,n)}}catch(t){o.e(t)}finally{o.f()}return r}},{key:"writeArray",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.refs.has(t))return this.writeRef(t);var r=[];this.refs.set(t,r);for(var i=0;i<t.length;i++)this.writeInto(r,i,t[i],e,n);return r}},{key:"writeArrayBuffer",value:function(t){if(this.refs.has(t))return this.writeRef(t);var e={$class:"ArrayBuffer",$value:Ms(t)};return this.refs.set(t,e),e}},{key:"writeTypedArray",value:function(t,e){if(this.refs.has(e))return this.writeRef(e);var n={$class:t,$value:[this.writeArrayBuffer(e.buffer),e.byteOffset,"DataView"===t?e.byteLength:e.length]};return this.refs.set(e,n),n}},{key:"writeFloat",value:function(t){return t}},{key:"writeAs",value:function(t,n,r,i){if(void 0===r)return r;if(this.refs.has(n))return this.writeRef(n);var o={$class:t};this.refs.set(n,o);var a=this.write(r,i,!1);return"object"!==e(a)||a.$class||Array.isArray(a)?o.$value=a:Object.assign(o,a),o}},{key:"writeRef",value:function(t){var n=this.refs.get(t);if("object"!==e(n))throw Error("Non-object in refs: "+t);return Array.isArray(n)&&(n.toJSON=function(){return{$id:this.$id,$class:"Array",$value:g(this)}}),{$ref:n.$id||(n.$id=this.nextRef++)}}},{key:"writeInto",value:function(t,n,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if("$"!==n[0])if(o&&"object"===e(r))this.todo.push({state:t,key:n,value:r,path:i});else{var a="string"==typeof n&&n.match(/^[_a-z][_a-z0-9]*$/i),s=i+(a?".".concat(n):"[".concat(JSON.stringify(n),"]")),c=this.write(r,s);void 0!==c&&(t[n]=c)}else Vt("snapshot: ignoring property ".concat(n),{only:"once"})}}]),t}(),Ps=function(){function t(e){i(this,t),this.island=e,this.refs=new Map,this.todo=[],this.unresolved=[],this.readers=new Map,this.addReader("Teatime:Message",Ys),this.addReader("Teatime:Data",bs);var n,r=k(js.allClassTypes());try{for(r.s();!(n=r.n()).done;){var o=v(n.value,2),a=o[0],s=o[1];this.addReader(a,s)}}catch(t){r.e(t)}finally{r.f()}this.readers.set("NaN",(function(){return NaN})),this.readers.set("Infinity",(function(t){return t*(1/0)})),this.readers.set("NegZero",(function(){return-0})),this.readers.set("Set",(function(t){return new Set(t)})),this.readers.set("Map",(function(t){return new Map(t)})),this.readers.set("Array",(function(t){return t.slice(0)})),this.readers.set("ArrayBuffer",(function(t){return function(t){for(var e=window.atob(t),n=e.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.charCodeAt(i);return r.buffer}(t)})),this.readers.set("DataView",(function(t){return m(DataView,g(t))})),this.readers.set("Int8Array",(function(t){return m(Int8Array,g(t))})),this.readers.set("Uint8Array",(function(t){return m(Uint8Array,g(t))})),this.readers.set("Uint8ClampedArray",(function(t){return m(Uint8ClampedArray,g(t))})),this.readers.set("Int16Array",(function(t){return m(Int16Array,g(t))})),this.readers.set("Uint16Array",(function(t){return m(Uint16Array,g(t))})),this.readers.set("Int32Array",(function(t){return m(Int32Array,g(t))})),this.readers.set("Uint32Array",(function(t){return m(Uint32Array,g(t))})),this.readers.set("Float32Array",(function(t){return m(Float32Array,g(t))})),this.readers.set("Float64Array",(function(t){return m(Float64Array,g(t))}))}return a(t,null,[{key:"newOrRecycled",value:function(t){var e=this.reusableInstance;return e?(e.island=t,e.refs=new Map,e.todo=[],e.unresolved=[]):e=this.reusableInstance=new this(t),e}},{key:"resetInstance",value:function(){this.reusableInstance=null}},{key:"reusableInstance",get:function(){return this[this.name+"-instance"]},set:function(t){this[this.name+"-instance"]=t}}]),a(t,[{key:"addReader",value:function(t,n){var r="object"===e(n)?n.read:function(t){return Object.assign(Object.create(n.prototype),t)};this.readers.set(t,r)}},{key:"readIsland",value:function(t,e){if("$"!==e)throw Error("Island must be root object");for(var n={_random:new de(null,{state:t._random})},r=0,i=Object.entries(t);r<i.length;r++){var o=v(i[r],2),a=o[0],s=o[1];n[a]||this.readInto(n,a,s,e)}return this.readDeferred(),this.resolveRefs(),n}},{key:"readDeferred",value:function(){for(;this.todo.length>0;){var t=this.todo.shift(),e=t.object,n=t.key,r=t.value,i=t.path;this.readInto(e,n,r,i,1)}}},{key:"resolveRefs",value:function(){var t,e=k(this.unresolved);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=n.object,i=n.key,o=n.ref,a=n.path;if(!this.refs.has(o))throw Error("Unresolved ref: ".concat(o," at ").concat(a,"[").concat(JSON.stringify(i),"]"));r[i]=this.refs.get(o)}}catch(t){e.e(t)}finally{e.f()}}},{key:"read",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(e(t)){case"number":case"string":case"boolean":return t;default:var i=Object.prototype.toString.call(t).slice(8,-1);switch(i){case"Array":return this.readArray(t,n,r);case"Null":return null;case"Object":var o=t.$class,a=t.$model,s=t.$ref;if(s)throw Error("refs should have been handled in readInto()");return a?this.readModel(t,n):o?this.readAs(o,t,n):this.readObject(Object,t,n,r);default:throw Error("Don't know how to read ".concat(i," at ").concat(n))}}}},{key:"readModel",value:function(t,e){var n=js.instantiateClassID(t.$model,t.id);t.$id&&this.refs.set(t.$id,n);for(var r=0,i=Object.entries(t);r<i.length;r++){var o=v(i[r],2),a=o[0],s=o[1];"id"!==a&&"$"!==a[0]&&this.readInto(n,a,s,e)}return n}},{key:"readObject",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=new t;e.$id&&this.refs.set(e.$id,i);for(var o=0,a=Object.entries(e);o<a.length;o++){var s=v(a[o],2),c=s[0],l=s[1];"$"!==c[0]&&this.readInto(i,c,l,n,r)}return i}},{key:"readArray",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];t.$id&&this.refs.set(t.$id,r);for(var i=0;i<t.length;i++)void 0!==t[i]&&this.readInto(r,i,t[i],e,n);return r}},{key:"readAs",value:function(t,e,n){var r={},i=new Map;if("$value"in e)r=this.read(e.$value,n,2);else for(var o=0,a=Object.entries(e);o<a.length;o++){var s=v(a[o],2),c=s[0],l=s[1];if("$"!==c[0]){var u=l&&l.$ref;u?this.refs.has(u)?r[c]=this.refs.get(u):(r[c]="<unresolved>",i.set(u,c)):this.readInto(r,c,l,n,1)}}var d=this.readers.get(t)(r,n);d||"NaN"===t||"NegZero"===t||console.warn('Reading "'.concat(t,'" returned ').concat(d," at ").concat(n)),e.$id&&this.refs.set(e.$id,d);var h,f=k(i.entries());try{for(f.s();!(h=f.n()).done;){var m=v(h.value,2),p=m[0],y=m[1];this.unresolved.push({object:d,key:y,ref:p,path:n})}}catch(t){f.e(t)}finally{f.f()}return d}},{key:"readRef",value:function(t,e,n,r){if(!n||!n.$ref)return!1;var i=n.$ref;return this.refs.has(i)?t[e]=this.refs.get(i):(t[e]="<unresolved>",this.unresolved.push({object:t,key:e,ref:i,path:r})),!0}},{key:"readInto",value:function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!this.readRef(t,n,r,i))if(0!==o||"object"!==e(r)){var a="string"==typeof n&&n.match(/^[_a-z][_a-z0-9]*$/i),s=i+(a?".".concat(n):"[".concat(JSON.stringify(n),"]"));t[n]=this.read(r,s,o>0?o-1:0)}else this.todo.push({object:t,key:n,value:r,path:i})}}]),t}(),Ts=function(t){u(n,t);var e=y(n);function n(){return i(this,n),e.apply(this,arguments)}return a(n,[{key:"encode",value:function(t){var e=this.writeArray(t,"$");return this.writeDeferred(),e}},{key:"writeModel",value:function(t){return{$ref:t.id}}}]),n}(Is),Hs=function(t){u(n,t);var e=y(n);function n(){return i(this,n),e.apply(this,arguments)}return a(n,[{key:"decode",value:function(t){var e=this.readArray(t,"$");return this.readDeferred(),this.resolveRefs(),e}},{key:"resolveRefs",value:function(){var t,e=k(this.unresolved);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=n.object,i=n.key,o=n.ref,a=n.path;if(this.refs.has(o))r[i]=this.refs.get(o);else{var s=this.island.lookUpModel(o);if(!s)throw Error("Unresolved ref: ".concat(o," at ").concat(a,"[").concat(JSON.stringify(i),"]"));r[i]=s}}}catch(t){e.e(t)}finally{e.f()}}}]),n}(Ps);function Ns(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,o=Object.values(t).filter((function(t){var e=Object.prototype.toString.call(t).slice(8,-1);return("Object"===e||"Array"===e)&&!i.has(t)})),a=k(o);try{for(a.s();!(e=a.n()).done;){var s=e.value;i.add(s);var c=n+"."+s.constructor.name;if(r[c]){if(r[c]!==s.constructor)throw new Error("Class with name "+c+" already gathered, but new one has different identity")}else r[c]=s.constructor}}catch(t){a.e(t)}finally{a.f()}var l,u=k(o);try{for(u.s();!(l=u.n()).done;){var d=l.value;Ns(d,n,r,i)}}catch(t){u.e(t)}finally{u.f()}}function Ms(t){for(var e=new Uint8Array(t),n=e.byteLength,r="",i=0;i<n;i++)r+=String.fromCharCode(e[i]);return window.btoa(r)}var Vs=H.has("debug","classes",!1),Rs=Symbol("SECRET"),zs=new WeakSet,js=function(){function t(e){if(i(this,t),e!==Rs)throw Error("You must create ".concat(this,' using create() not "new"!'))}return a(t,null,[{key:"create",value:function(e,n,r){if(!Es(this))throw Error('Model class "'.concat(this.name,'" not registered'));var i=se(),o=new this(Rs);return Object.defineProperty(o,"__realm",{value:i}),Object.defineProperty(o,"id",{value:i.register(o),enumerable:!0}),zs.add(o),"string"==typeof n&&(console.warn('Croquet: Model.create(..., "'.concat(n,'") with a well-known name argument is deprecated!')),o.beWellKnownAs(n),n=void 0),r&&o.beWellKnownAs(r),o.init(e,n),zs.has(o)&&(zs.delete(o),Object.getPrototypeOf(this)!==t&&console.warn("".concat(o," did not call super.init(options)"))),o}},{key:"createNoInit",value:function(t){var e=se(),n=new this(Rs);return Object.defineProperty(n,"__realm",{value:e}),Object.defineProperty(n,"id",{value:t,enumerable:!0}),n}},{key:"allowConstructors",value:function(){Rs=void 0,console.warn("disabling error reporting for Model constructors")}},{key:"register",value:function(t){return t||(t=this.name,console.warn("Deprecation warning: ".concat(this.name,".register(classId) called without classId. See https://croquet.io/sdk/docs/Model.html#.register"))),Ps.resetInstance(),Is.resetInstance(),Ts.resetInstance(),Hs.resetInstance(),O(this,t),function(t,e){var n=Fs[e];if(n&&n!==t)throw Error("Registering model class ".concat(t.name,' failed, id "').concat(e,'" already used by ').concat(n.name));Es(t)?Vs&&!n&&console.warn("ignoring re-exported model class ".concat(e)):(Vs&&console.log("registering model class ".concat(e)),t[Js]=e);Fs[e]=t}(this,t),this}},{key:"types",value:function(){return{}}},{key:"classToID",value:function(t){return function(t){if(Es(t))return t[Js];throw Error('Class "'.concat(t.name,'" not found, did you call ').concat(t.name,'.register("').concat(t.name,'")?'))}(t)}},{key:"classFromID",value:function(t){return Qs(t)}},{key:"allClasses",value:function(){return _s()}},{key:"allClassTypes",value:function(){return function(){var t,e={},n=k(_s());try{for(n.s();!(t=n.n()).done;){var r=t.value;Object.assign(e,r.types())}}catch(t){n.e(t)}finally{n.f()}return Object.entries(e)}()}},{key:"instantiateClassID",value:function(t,e){return Qs(t).createNoInit(e)}}]),a(t,[{key:"init",value:function(t){zs.delete(this)}},{key:"destroy",value:function(){se().unsubscribeAll(this),se().deregister(this)}},{key:"publish",value:function(t,e,n){this.__realm||this.__realmError(),this.__realm.publish(e,n,t)}},{key:"subscribe",value:function(t,e,n){return this.__realm||this.__realmError(),this.__realm.subscribe(this,t,e,n)}},{key:"unsubscribe",value:function(t,e){this.__realm||this.__realmError(),this.__realm.unsubscribe(this,t,e)}},{key:"unsubscribeAll",value:function(){this.__realm||this.__realmError(),this.__realm.unsubscribeAll(this)}},{key:"__realmError",value:function(){if(!this.id)throw Error("".concat(this," has no ID, did you call super.init(options)?"))}},{key:"future",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.__realm||this.__realmError();for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this.__realm.future(this,t,e,r)}},{key:"random",value:function(){return se().random()}},{key:"now",value:function(){return se().now()}},{key:"beWellKnownAs",value:function(t){se().island.set(t,this)}},{key:"getModel",value:function(t){return this.__realm.island.lookUpModel(t)}},{key:"wellKnownModel",value:function(t){return this.__realm.island.get(t)}},{key:"modelOnly",value:function(t){if(Ls.current()===this.__realm.island)return!0;var e=Error(t||"".concat(this,".modelOnly() called from outside a model!"));throw zt("view code",e),e}},{key:"persistSession",value:function(t){if(this!==this.wellKnownModel("modelRoot"))throw Error("persistSession() must only be called on the root model");this.__realm.island.persist(this,t)}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor[Js]||this.constructor.name;return t.includes("Model")?t:"".concat(t,"[Model]")}},{key:"sessionId",get:function(){return this.__realm.island.id}}]),t}(),Fs={},Js=Symbol("CLASS_ID");function _s(){return Object.values(Fs)}function Es(t){return Object.prototype.hasOwnProperty.call(t,Js)}function Qs(t){if(Fs[t])return Fs[t];throw Error('Class "'.concat(t,'" in snapshot, but not found in current source?'))}var Ds="Croquet.Model";js[Js]=Ds,Fs[Ds]=js;var Us=function(){function t(e){i(this,t),Object.defineProperty(this,"realm",{value:se()}),Object.defineProperty(this,"id",{value:this.realm.register(this),configurable:!0})}return a(t,null,[{key:"displayStatus",value:function(t,e){return Rt(t,e)}},{key:"displayWarning",value:function(t,e){return Vt(t,e)}},{key:"displayError",value:function(t,e){return Mt(t,e)}}]),a(t,[{key:"detach",value:function(){this.unsubscribeAll(),this.realm.deregister(this),Object.defineProperty(this,"id",{value:""})}},{key:"reattach",value:function(){Object.defineProperty(this,"id",{value:this.realm.register(this)})}},{key:"publish",value:function(t,e,n){this.realm.publish(e,n,t)}},{key:"subscribe",value:function(t,e,n){n=n.bind(this);var r=e.event?e:{event:e},i=r.event,o=r.handling;this.realm.subscribe(i,this.id,n,t,o)}},{key:"unsubscribe",value:function(t,e){this.realm.unsubscribe(e,this.id,null,t)}},{key:"unsubscribeAll",value:function(){this.realm.unsubscribeAll(this.id)}},{key:"future",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.realm.future(this,t)}},{key:"random",value:function(){return se().random()}},{key:"now",value:function(){return this.realm.now()}},{key:"externalNow",value:function(){return this.realm.externalNow()}},{key:"extrapolatedNow",value:function(){return this.realm.extrapolatedNow()}},{key:"update",value:function(t){}},{key:"wellKnownModel",value:function(t){return this.realm.island.get(t)}},{key:"inSameViewRealm",value:function(t){return le(this.realm.island,t,!0)}},{key:Symbol.toPrimitive,value:function(){var t=this.constructor.name;return t.includes("View")?t:"".concat(t,"[View]")}},{key:"sessionId",get:function(){return this.realm.island.id}},{key:"viewId",get:function(){return this.realm.island.controller.viewId}}]),t}(),Os=new(function(){function t(){i(this,t),this.ready=!1,this.isInIframe=window.top!==window,this.subscriptions={},this.enumerator=null}return a(t,[{key:"setReceiver",value:function(t){this.receiver=t,this.ready=!0}},{key:"setIframeEnumerator",value:function(t){this.enumerator=t}},{key:"on",value:function(t,e){var n=this;if(!this.receiver)throw Error("setReceiver() has not been called");if("string"==typeof e&&(e=this.receiver[e]),!e)throw Error("Messenger.on: the second argument must be a method name or a function");if(this.subscriptions[t]){if(this.findIndex(this.subscriptions[t],e)>=0)throw Error("".concat(e," is already subscribed"))}else this.subscriptions[t]=[];this.subscriptions[t].push(e),this.listener||(this.listener=function(t){return n.receive(t)},window.addEventListener("message",this.listener))}},{key:"detach",value:function(){this.listener&&(window.removeEventListener("message",this.listener),this.listener=null),this.stopPublishingPointerMove(),this.receiver=null,this.subscriptions={},this.enumerator=null,this.ready=!1}},{key:"removeSubscription",value:function(t,e){"string"==typeof e&&(e=this.receiver[e]);var n=this.subscriptions[t];if(n){var r=this.findIndex(n,e);n.splice(r,1),0===n.length&&delete this.subscriptions[t]}}},{key:"removeAllSubscriptions",value:function(){this.subscriptions={}}},{key:"receive",value:function(t){var e=t.data,n=e.event,r=e.data,i=t.source;this.handleEvent(n,r,i)}},{key:"handleEvent",value:function(t,e,n){var r=this,i=this.subscriptions[t];i&&i.forEach((function(t){t.call(r.receiver,e,n)}))}},{key:"send",value:function(t,e,n){this.isInIframe?window.top.postMessage({event:t,data:e},"*"):n?n.postMessage({event:t,data:e},"*"):this.enumerator&&this.enumerator().forEach((function(n){n.contentWindow.postMessage({event:t,data:e},"*")}))}},{key:"findIndex",value:function(t,e){return t.findIndex((function(t){return t.view===e.view&&t.method===e.method}))}},{key:"startPublishingPointerMove",value:function(){var t=this;this._moveHandler=function(e){return t.send("pointerPosition",{x:e.clientX,y:e.clientY,type:e.type})},window.document.addEventListener("pointermove",this._moveHandler,!0)}},{key:"stopPublishingPointerMove",value:function(){this._moveHandler&&(window.document.removeEventListener("pointermove",this._moveHandler,!0),this._moveHandler=null)}}]),t}());var Bs={},As=function(){function t(){i(this,t)}var e,n;return a(t,null,[{key:"join",value:(n=r(regeneratorRuntime.mark((function e(n){var i,o,a,s,c,u,d,h,f,m,p,y,b,Z,X,w,G,x,L,k,W,S,Y,C,K,I,P,T,N,M,V,R,z,j,F=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(j=function(){var t="autoSleep"in H&&!H.autoSleep,e="number"==typeof H.autoSleep?1e3*H.autoSleep:1e4,r=setInterval((function(){if(Bs[S.id])if(P()){T||(T=Date.now(),N=Y+T-C);var i=Date.now()-T;t?"manual"!==n.step&&S.step(N+i):i>e&&k.dormantDisconnect()}else T&&(T=0);else clearInterval(r)}),1e3)},z=function(){S.model=null,S.view&&(H.has("debug","session",!1)&&console.log(S.id,"Detaching root view"),S.view.detach(),""!==S.view.id&&console.warn("Croquet: ".concat(S.view," did not call super.detach()")),S.view=null),qt.clearSessionMoniker(),Os.ready&&Os.detach()},R=function(){return(R=r(regeneratorRuntime.mark((function t(e){var r,i,o,a,s,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z(),!k.leaving){t.next=4;break}return k.leaving(!0),t.abrupt("return");case 4:for(r={snapshot:e,options:W,initFn:function(t,e){return X.create(t,e,"modelRoot")},destroyerFn:V},i=0,o=Object.entries(n);i<o.length;i++)a=v(o[i],2),s=a[0],c=a[1],L.includes(s)&&(r[s]=c);return t.next=8,k.establishSession(r);case 8:S.model=k.island.get("modelRoot"),S.id=k.id,Bs[S.id]=k,qt.makeSessionWidgets(S.id),k.inViewRealm((function(){H.has("debug","session",!1)&&console.log(S.id,"Creating root view"),S.view=new w(S.model)}));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)},V=function(t){return R.apply(this,arguments)},Z=function(t,e){return t===e||t.prototype instanceof e},i=F.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=F[a];("string"==typeof n[0]||o.length>0)&&(console.warn("Croquet: please use new Session.join( {name, ...} ) API. See https://croquet.io/sdk/docs/Session.html#.join"),s=[n].concat(o),c=s[0],u=s[1],d=s[2],h=s[3],n=h||{},d&&Object.getPrototypeOf(d)===Object.prototype&&void 0===h?n=d:n.view=d,n.model=u,n.name=c),f=0,m=Object.entries(n);case 8:if(!(f<m.length)){e.next=17;break}if(p=v(m[f],2),y=p[0],!((b=p[1])instanceof Promise)){e.next=14;break}return e.next=13,b;case 13:n[y]=e.sent;case 14:f++,e.next=8;break;case 17:if(n.name){e.next=19;break}throw Error("Croquet: no session name provided in Session.join()!");case 19:if(X=n.model,Z(X,js)){e.next=22;break}throw Error("ModelRoot must inherit from Croquet.Model");case 22:if(w=n.view,Z(w,Us)){e.next=25;break}throw Error("ViewRoot must inherit from Croquet.View");case 25:if(n.appId){e.next=29;break}console.warn("Croquet: no appId provided in Session.join()"),e.next=31;break;case 29:if(n.appId.match(/^[a-z_][a-z0-9_]*(\.[a-z_][a-z0-9_]*)+$/i)){e.next=31;break}throw Error('Croquet: malformed appId "'.concat(n.appId,'"'));case 31:return n.password||(console.warn("Croquet: no session password provided in Session.join()"),n.password="THIS SHOULDN'T BE IN LOGS"),(G=H.reflector||n.reflector)&&(G.includes("://")||G.match(/^[-a-z0-9]+$/i)?H.reflector=G:console.warn('Croquet: Not a valid websocket url, ignoring reflector "'.concat(G,'"'))),n.debug&&(x=function(t){return"string"==typeof t&&(t=t.split(",")),t?Array.isArray(t)?t:[t]:[]},H.debug=[].concat(g(x(n.debug)),g(x(H.debug))).join(",")),"autoSleep"in n&&(H.autoSleep=n.autoSleep),"expectedSimFPS"in n&&(tc=Math.min(n.expectedSimFPS,$s)),L=["name","password","appId","tps","optionsFromUrl","viewIdDebugSuffix"],ic(),k=new ss,W=JSON.parse(JSON.stringify(l({},n.options))),e.t0=function(t){ec(t,k,S.view)},e.t1=function(){return t.leave(S.id)},S={id:"",model:null,view:null,step:e.t0,leave:e.t1,get latency(){return k.latency},get latencies(){return k.latencies}},e.next=46,V();case 46:return Y=0,C=Date.now(),K=0,I=2e4,P=function(){return"hidden"===document.visibilityState||Date.now()-C>I||K>I},T=0,N=0,M=function t(e){var r,i,o,a;Bs[S.id]&&(r=K,i=e-Y,o=.1,a=3e4,K=0|Math.min(a,Math.max(i,r*(1-o)+i*o)),Y=e,C=Date.now(),P()||(k.checkForConnection(!0),"manual"!==n.step&&S.step(e)),window.requestAnimationFrame(t))},window.requestAnimationFrame(M),j(),e.abrupt("return",S);case 57:case"end":return e.stop()}}),e)}))),function(t){return n.apply(this,arguments)})},{key:"leave",value:(e=r(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Bs[e]){t.next=3;break}return t.abrupt("return",!1);case 3:if(delete Bs[e],r=new Promise((function(t){return n.leaving=t})),(i=n.connection).connected){t.next=8;break}return t.abrupt("return",!1);case 8:return i.socket.close(1e3),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"thisSession",value:function(){var t=Ls.current();return t?t.id:""}}]),t}(),qs=[0],$s=120,tc=60;function ec(t,e,n){var r=e.backlog,i=e.latency,o=e.starvation,a=e.activity;if(Kt.animationFrame(t,{backlog:r,starvation:o,latency:i,activity:a,users:e.users}),e.island){var s=Date.now(),c=qs.reduce((function(t,e){return t+e}),0)/qs.length;e.simulate(s+Math.min(c,200));var l=0===tc?0:1e3/tc*4;e.backlog>l&&e.simulate(s+200-c),qs.push(Date.now()-s),qs.length>4&&qs.shift(),Kt.begin("update"),e.processModelViewEvents(),Kt.end("update"),n&&(Kt.begin("render"),e.inViewRealm((function(){return n.update(t)})),Kt.end("render"))}}var nc={};function rc(t){if(!Object.isFrozen(t)){Object.freeze(t);for(var n=0,r=Object.values(t);n<r.length;n++){var i=r[n];!i||"object"!==e(i)&&"function"!=typeof i||rc(i)}}}function ic(){Object.isFrozen(nc)||(rc(nc),function(t){var e=JSON.stringify(t,(function(t,e){return"function"==typeof e?""+e:e}));if("{}"!==e){var n=JSON.parse(e),r=Q(N(n));U.push(r),J()&&r.then((function(t){_[t].name="Croquet Constants"}))}}(nc))}return t.App=qt,t.Constants=nc,t.Data=ys,t.Messenger=Os,t.Model=js,t.Session=As,t.View=Us,t.gatherInternalClassTypes=function(t,e){var n={};return Ns({root:t},e,n,new Set),n},t.startSession=function(){return qt.showMessage("Croquet.startSession() is deprecated, please use Croquet.Session.join()",{level:"warning",only:"once"}),As.join.apply(As,arguments)},t}({});
